%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    Connection13{{"Connection[13∈0] ➊<br />ᐸ9ᐳ"}}:::plan
    Constant6{{"Constant[6∈0] ➊<br />ᐸundefinedᐳ"}}:::plan
    Constant6 & Constant6 & Constant6 --> Connection13
    Connection27{{"Connection[27∈0] ➊<br />ᐸ25ᐳ"}}:::plan
    Constant6 & Constant6 & Constant6 --> Connection27
    Connection41{{"Connection[41∈0] ➊<br />ᐸ39ᐳ"}}:::plan
    Constant6 & Constant6 & Constant6 --> Connection41
    Connection77{{"Connection[77∈0] ➊<br />ᐸ75ᐳ"}}:::plan
    Constant6 & Constant6 & Constant6 --> Connection77
    Connection94{{"Connection[94∈0] ➊<br />ᐸ92ᐳ"}}:::plan
    Constant6 & Constant6 & Constant6 --> Connection94
    Object12{{"Object[12∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access10{{"Access[10∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access11{{"Access[11∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access10 & Access11 --> Object12
    PgSelect52[["PgSelect[52∈0] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Constant111{{"Constant[111∈0] ➊<br />ᐸ'B'ᐳ"}}:::plan
    Object12 & Constant111 --> PgSelect52
    PgSelect62[["PgSelect[62∈0] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object12 & Constant111 --> PgSelect62
    __InputObject73{{"__InputObject[73∈0] ➊"}}:::plan
    Constant113{{"Constant[113∈0] ➊<br />ᐸ'C'ᐳ"}}:::plan
    Constant6 & Constant113 --> __InputObject73
    __InputObject90{{"__InputObject[90∈0] ➊"}}:::plan
    Constant6 & Constant113 --> __InputObject90
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access10
    __Value2 --> Access11
    ApplyInput14{{"ApplyInput[14∈0] ➊"}}:::plan
    Constant115{{"Constant[115∈0] ➊<br />ᐸ[ 'PRIMARY_KEY_ASC' ]ᐳ"}}:::plan
    Constant115 --> ApplyInput14
    ApplyInput28{{"ApplyInput[28∈0] ➊"}}:::plan
    Constant116{{"Constant[116∈0] ➊<br />ᐸ[ 'LETTER_DESC' ]ᐳ"}}:::plan
    Constant116 --> ApplyInput28
    ApplyInput42{{"ApplyInput[42∈0] ➊"}}:::plan
    Constant117{{"Constant[117∈0] ➊<br />ᐸ[ 'LETTER_VIA_VIEW_DESC' ]ᐳ"}}:::plan
    Constant117 --> ApplyInput42
    First54{{"First[54∈0] ➊"}}:::plan
    PgSelectRows55[["PgSelectRows[55∈0] ➊"]]:::plan
    PgSelectRows55 --> First54
    PgSelect52 --> PgSelectRows55
    PgSelectSingle56{{"PgSelectSingle[56∈0] ➊<br />ᐸletter_descriptionsᐳ"}}:::plan
    First54 --> PgSelectSingle56
    First64{{"First[64∈0] ➊"}}:::plan
    PgSelectRows65[["PgSelectRows[65∈0] ➊"]]:::plan
    PgSelectRows65 --> First64
    PgSelect62 --> PgSelectRows65
    PgSelectSingle66{{"PgSelectSingle[66∈0] ➊<br />ᐸletter_descriptionsᐳ"}}:::plan
    First64 --> PgSelectSingle66
    ApplyInput78{{"ApplyInput[78∈0] ➊"}}:::plan
    Constant115 --> ApplyInput78
    ApplyInput79{{"ApplyInput[79∈0] ➊"}}:::plan
    __InputObject73 --> ApplyInput79
    ApplyInput95{{"ApplyInput[95∈0] ➊"}}:::plan
    Constant115 --> ApplyInput95
    ApplyInput96{{"ApplyInput[96∈0] ➊"}}:::plan
    __InputObject90 --> ApplyInput96
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    PgSelect15[["PgSelect[15∈1] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object12 & ApplyInput14 & Connection13 & Constant6 & Constant6 & Constant6 --> PgSelect15
    PgSelectRows16[["PgSelectRows[16∈1] ➊"]]:::plan
    PgSelect15 --> PgSelectRows16
    __Item17[/"__Item[17∈2]<br />ᐸ16ᐳ"\]:::itemplan
    PgSelectRows16 ==> __Item17
    PgSelectSingle18{{"PgSelectSingle[18∈2]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item17 --> PgSelectSingle18
    PgClassExpression19{{"PgClassExpression[19∈3]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle18 --> PgClassExpression19
    PgClassExpression20{{"PgClassExpression[20∈3]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle18 --> PgClassExpression20
    PgClassExpression21{{"PgClassExpression[21∈3]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle18 --> PgClassExpression21
    PgClassExpression22{{"PgClassExpression[22∈3]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle18 --> PgClassExpression22
    PgSelect29[["PgSelect[29∈4] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object12 & ApplyInput28 & Connection27 & Constant6 & Constant6 & Constant6 --> PgSelect29
    PgSelectRows30[["PgSelectRows[30∈4] ➊"]]:::plan
    PgSelect29 --> PgSelectRows30
    __Item31[/"__Item[31∈5]<br />ᐸ30ᐳ"\]:::itemplan
    PgSelectRows30 ==> __Item31
    PgSelectSingle32{{"PgSelectSingle[32∈5]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item31 --> PgSelectSingle32
    PgClassExpression33{{"PgClassExpression[33∈6]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle32 --> PgClassExpression33
    PgClassExpression34{{"PgClassExpression[34∈6]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle32 --> PgClassExpression34
    PgClassExpression35{{"PgClassExpression[35∈6]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle32 --> PgClassExpression35
    PgClassExpression36{{"PgClassExpression[36∈6]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle32 --> PgClassExpression36
    PgSelect43[["PgSelect[43∈7] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object12 & ApplyInput42 & Connection41 & Constant6 & Constant6 & Constant6 --> PgSelect43
    PgSelectRows44[["PgSelectRows[44∈7] ➊"]]:::plan
    PgSelect43 --> PgSelectRows44
    __Item45[/"__Item[45∈8]<br />ᐸ44ᐳ"\]:::itemplan
    PgSelectRows44 ==> __Item45
    PgSelectSingle46{{"PgSelectSingle[46∈8]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item45 --> PgSelectSingle46
    PgClassExpression47{{"PgClassExpression[47∈9]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle46 --> PgClassExpression47
    PgClassExpression48{{"PgClassExpression[48∈9]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle46 --> PgClassExpression48
    PgClassExpression49{{"PgClassExpression[49∈9]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle46 --> PgClassExpression49
    PgClassExpression50{{"PgClassExpression[50∈9]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle46 --> PgClassExpression50
    PgClassExpression57{{"PgClassExpression[57∈10] ➊<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle56 --> PgClassExpression57
    PgClassExpression58{{"PgClassExpression[58∈10] ➊<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle56 --> PgClassExpression58
    PgClassExpression59{{"PgClassExpression[59∈10] ➊<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle56 --> PgClassExpression59
    PgClassExpression60{{"PgClassExpression[60∈10] ➊<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle56 --> PgClassExpression60
    PgClassExpression67{{"PgClassExpression[67∈11] ➊<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle66 --> PgClassExpression67
    PgClassExpression68{{"PgClassExpression[68∈11] ➊<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle66 --> PgClassExpression68
    PgClassExpression69{{"PgClassExpression[69∈11] ➊<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle66 --> PgClassExpression69
    PgClassExpression70{{"PgClassExpression[70∈11] ➊<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle66 --> PgClassExpression70
    PgSelect80[["PgSelect[80∈12] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object12 & ApplyInput78 & ApplyInput79 & Connection77 & Constant6 & Constant6 & Constant6 --> PgSelect80
    PgSelectRows81[["PgSelectRows[81∈12] ➊"]]:::plan
    PgSelect80 --> PgSelectRows81
    __Item82[/"__Item[82∈13]<br />ᐸ81ᐳ"\]:::itemplan
    PgSelectRows81 ==> __Item82
    PgSelectSingle83{{"PgSelectSingle[83∈13]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item82 --> PgSelectSingle83
    PgClassExpression84{{"PgClassExpression[84∈14]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle83 --> PgClassExpression84
    PgClassExpression85{{"PgClassExpression[85∈14]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle83 --> PgClassExpression85
    PgClassExpression86{{"PgClassExpression[86∈14]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle83 --> PgClassExpression86
    PgClassExpression87{{"PgClassExpression[87∈14]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle83 --> PgClassExpression87
    PgSelect97[["PgSelect[97∈15] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object12 & ApplyInput95 & ApplyInput96 & Connection94 & Constant6 & Constant6 & Constant6 --> PgSelect97
    PgSelectRows98[["PgSelectRows[98∈15] ➊"]]:::plan
    PgSelect97 --> PgSelectRows98
    __Item99[/"__Item[99∈16]<br />ᐸ98ᐳ"\]:::itemplan
    PgSelectRows98 ==> __Item99
    PgSelectSingle100{{"PgSelectSingle[100∈16]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item99 --> PgSelectSingle100
    PgClassExpression101{{"PgClassExpression[101∈17]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle100 --> PgClassExpression101
    PgClassExpression102{{"PgClassExpression[102∈17]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle100 --> PgClassExpression102
    PgClassExpression103{{"PgClassExpression[103∈17]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle100 --> PgClassExpression103
    PgClassExpression104{{"PgClassExpression[104∈17]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle100 --> PgClassExpression104

    %% define steps

    subgraph "Buckets for queries/v4/enum_tables.queries"
    Bucket0("Bucket 0 (root)<br /><br />1: <br />ᐳ: 6, 10, 11, 111, 113, 115, 116, 117, 12, 13, 14, 27, 28, 41, 42, 73, 77, 78, 79, 90, 94, 95, 96<br />2: PgSelect[52], PgSelect[62]<br />3: PgSelectRows[55], PgSelectRows[65]<br />ᐳ: 54, 56, 64, 66"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Constant6,Access10,Access11,Object12,Connection13,ApplyInput14,Connection27,ApplyInput28,Connection41,ApplyInput42,PgSelect52,First54,PgSelectRows55,PgSelectSingle56,PgSelect62,First64,PgSelectRows65,PgSelectSingle66,__InputObject73,Connection77,ApplyInput78,ApplyInput79,__InputObject90,Connection94,ApplyInput95,ApplyInput96,Constant111,Constant113,Constant115,Constant116,Constant117 bucket0
    Bucket1("Bucket 1 (nullableBoundary)<br />Deps: 12, 14, 13, 6<br /><br />ROOT Connectionᐸ9ᐳ[13]<br />1: PgSelect[15]<br />2: PgSelectRows[16]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect15,PgSelectRows16 bucket1
    Bucket2("Bucket 2 (listItem)<br /><br />ROOT __Item{2}ᐸ16ᐳ[17]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item17,PgSelectSingle18 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 18<br /><br />ROOT PgSelectSingle{2}ᐸletter_descriptionsᐳ[18]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgClassExpression19,PgClassExpression20,PgClassExpression21,PgClassExpression22 bucket3
    Bucket4("Bucket 4 (nullableBoundary)<br />Deps: 12, 28, 27, 6<br /><br />ROOT Connectionᐸ25ᐳ[27]<br />1: PgSelect[29]<br />2: PgSelectRows[30]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect29,PgSelectRows30 bucket4
    Bucket5("Bucket 5 (listItem)<br /><br />ROOT __Item{5}ᐸ30ᐳ[31]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,__Item31,PgSelectSingle32 bucket5
    Bucket6("Bucket 6 (nullableBoundary)<br />Deps: 32<br /><br />ROOT PgSelectSingle{5}ᐸletter_descriptionsᐳ[32]"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgClassExpression33,PgClassExpression34,PgClassExpression35,PgClassExpression36 bucket6
    Bucket7("Bucket 7 (nullableBoundary)<br />Deps: 12, 42, 41, 6<br /><br />ROOT Connectionᐸ39ᐳ[41]<br />1: PgSelect[43]<br />2: PgSelectRows[44]"):::bucket
    classDef bucket7 stroke:#808000
    class Bucket7,PgSelect43,PgSelectRows44 bucket7
    Bucket8("Bucket 8 (listItem)<br /><br />ROOT __Item{8}ᐸ44ᐳ[45]"):::bucket
    classDef bucket8 stroke:#dda0dd
    class Bucket8,__Item45,PgSelectSingle46 bucket8
    Bucket9("Bucket 9 (nullableBoundary)<br />Deps: 46<br /><br />ROOT PgSelectSingle{8}ᐸletter_descriptionsᐳ[46]"):::bucket
    classDef bucket9 stroke:#ff0000
    class Bucket9,PgClassExpression47,PgClassExpression48,PgClassExpression49,PgClassExpression50 bucket9
    Bucket10("Bucket 10 (nullableBoundary)<br />Deps: 56<br /><br />ROOT PgSelectSingleᐸletter_descriptionsᐳ[56]"):::bucket
    classDef bucket10 stroke:#ffff00
    class Bucket10,PgClassExpression57,PgClassExpression58,PgClassExpression59,PgClassExpression60 bucket10
    Bucket11("Bucket 11 (nullableBoundary)<br />Deps: 66<br /><br />ROOT PgSelectSingleᐸletter_descriptionsᐳ[66]"):::bucket
    classDef bucket11 stroke:#00ffff
    class Bucket11,PgClassExpression67,PgClassExpression68,PgClassExpression69,PgClassExpression70 bucket11
    Bucket12("Bucket 12 (nullableBoundary)<br />Deps: 12, 78, 79, 77, 6<br /><br />ROOT Connectionᐸ75ᐳ[77]<br />1: PgSelect[80]<br />2: PgSelectRows[81]"):::bucket
    classDef bucket12 stroke:#4169e1
    class Bucket12,PgSelect80,PgSelectRows81 bucket12
    Bucket13("Bucket 13 (listItem)<br /><br />ROOT __Item{13}ᐸ81ᐳ[82]"):::bucket
    classDef bucket13 stroke:#3cb371
    class Bucket13,__Item82,PgSelectSingle83 bucket13
    Bucket14("Bucket 14 (nullableBoundary)<br />Deps: 83<br /><br />ROOT PgSelectSingle{13}ᐸletter_descriptionsᐳ[83]"):::bucket
    classDef bucket14 stroke:#a52a2a
    class Bucket14,PgClassExpression84,PgClassExpression85,PgClassExpression86,PgClassExpression87 bucket14
    Bucket15("Bucket 15 (nullableBoundary)<br />Deps: 12, 95, 96, 94, 6<br /><br />ROOT Connectionᐸ92ᐳ[94]<br />1: PgSelect[97]<br />2: PgSelectRows[98]"):::bucket
    classDef bucket15 stroke:#ff00ff
    class Bucket15,PgSelect97,PgSelectRows98 bucket15
    Bucket16("Bucket 16 (listItem)<br /><br />ROOT __Item{16}ᐸ98ᐳ[99]"):::bucket
    classDef bucket16 stroke:#f5deb3
    class Bucket16,__Item99,PgSelectSingle100 bucket16
    Bucket17("Bucket 17 (nullableBoundary)<br />Deps: 100<br /><br />ROOT PgSelectSingle{16}ᐸletter_descriptionsᐳ[100]"):::bucket
    classDef bucket17 stroke:#696969
    class Bucket17,PgClassExpression101,PgClassExpression102,PgClassExpression103,PgClassExpression104 bucket17
    Bucket0 --> Bucket1 & Bucket4 & Bucket7 & Bucket10 & Bucket11 & Bucket12 & Bucket15
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket4 --> Bucket5
    Bucket5 --> Bucket6
    Bucket7 --> Bucket8
    Bucket8 --> Bucket9
    Bucket12 --> Bucket13
    Bucket13 --> Bucket14
    Bucket15 --> Bucket16
    Bucket16 --> Bucket17
    end
