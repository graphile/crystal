%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    Object12{{"Object[12∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access10{{"Access[10∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access11{{"Access[11∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access10 & Access11 --> Object12
    PgSelect52[["PgSelect[52∈0] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Constant109{{"Constant[109∈0] ➊<br />ᐸ'B'ᐳ"}}:::plan
    Object12 & Constant109 --> PgSelect52
    PgSelect62[["PgSelect[62∈0] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object12 & Constant109 --> PgSelect62
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access10
    __Value2 --> Access11
    Lambda14{{"Lambda[14∈0] ➊<br />ᐸextractList_pgSelectApplyᐳ"}}:::plan
    Constant113{{"Constant[113∈0] ➊<br />ᐸ[ 'PRIMARY_KEY_ASC' ]ᐳ"}}:::plan
    Constant113 --> Lambda14
    Lambda28{{"Lambda[28∈0] ➊<br />ᐸextractList_pgSelectApplyᐳ"}}:::plan
    Constant114{{"Constant[114∈0] ➊<br />ᐸ[ 'LETTER_DESC' ]ᐳ"}}:::plan
    Constant114 --> Lambda28
    Lambda42{{"Lambda[42∈0] ➊<br />ᐸextractList_pgSelectApplyᐳ"}}:::plan
    Constant115{{"Constant[115∈0] ➊<br />ᐸ[ 'LETTER_VIA_VIEW_DESC' ]ᐳ"}}:::plan
    Constant115 --> Lambda42
    First54{{"First[54∈0] ➊"}}:::plan
    PgSelectRows55[["PgSelectRows[55∈0] ➊"]]:::plan
    PgSelectRows55 --> First54
    PgSelect52 --> PgSelectRows55
    PgSelectSingle56{{"PgSelectSingle[56∈0] ➊<br />ᐸletter_descriptionsᐳ"}}:::plan
    First54 --> PgSelectSingle56
    First64{{"First[64∈0] ➊"}}:::plan
    PgSelectRows65[["PgSelectRows[65∈0] ➊"]]:::plan
    PgSelectRows65 --> First64
    PgSelect62 --> PgSelectRows65
    PgSelectSingle66{{"PgSelectSingle[66∈0] ➊<br />ᐸletter_descriptionsᐳ"}}:::plan
    First64 --> PgSelectSingle66
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    Connection13{{"Connection[13∈0] ➊<br />ᐸ9ᐳ"}}:::plan
    Connection27{{"Connection[27∈0] ➊<br />ᐸ25ᐳ"}}:::plan
    Connection41{{"Connection[41∈0] ➊<br />ᐸ39ᐳ"}}:::plan
    Connection77{{"Connection[77∈0] ➊<br />ᐸ75ᐳ"}}:::plan
    Connection93{{"Connection[93∈0] ➊<br />ᐸ91ᐳ"}}:::plan
    Constant111{{"Constant[111∈0] ➊<br />ᐸ'C'ᐳ"}}:::plan
    PgSelect15[["PgSelect[15∈1] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object12 & Lambda14 & Connection13 --> PgSelect15
    PgSelectRows16[["PgSelectRows[16∈1] ➊"]]:::plan
    PgSelect15 --> PgSelectRows16
    __Item17[/"__Item[17∈2]<br />ᐸ16ᐳ"\]:::itemplan
    PgSelectRows16 ==> __Item17
    PgSelectSingle18{{"PgSelectSingle[18∈2]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item17 --> PgSelectSingle18
    PgClassExpression19{{"PgClassExpression[19∈3]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle18 --> PgClassExpression19
    PgClassExpression20{{"PgClassExpression[20∈3]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle18 --> PgClassExpression20
    PgClassExpression21{{"PgClassExpression[21∈3]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle18 --> PgClassExpression21
    PgClassExpression22{{"PgClassExpression[22∈3]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle18 --> PgClassExpression22
    PgSelect29[["PgSelect[29∈4] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object12 & Lambda28 & Connection27 --> PgSelect29
    PgSelectRows30[["PgSelectRows[30∈4] ➊"]]:::plan
    PgSelect29 --> PgSelectRows30
    __Item31[/"__Item[31∈5]<br />ᐸ30ᐳ"\]:::itemplan
    PgSelectRows30 ==> __Item31
    PgSelectSingle32{{"PgSelectSingle[32∈5]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item31 --> PgSelectSingle32
    PgClassExpression33{{"PgClassExpression[33∈6]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle32 --> PgClassExpression33
    PgClassExpression34{{"PgClassExpression[34∈6]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle32 --> PgClassExpression34
    PgClassExpression35{{"PgClassExpression[35∈6]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle32 --> PgClassExpression35
    PgClassExpression36{{"PgClassExpression[36∈6]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle32 --> PgClassExpression36
    PgSelect43[["PgSelect[43∈7] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object12 & Lambda42 & Connection41 --> PgSelect43
    PgSelectRows44[["PgSelectRows[44∈7] ➊"]]:::plan
    PgSelect43 --> PgSelectRows44
    __Item45[/"__Item[45∈8]<br />ᐸ44ᐳ"\]:::itemplan
    PgSelectRows44 ==> __Item45
    PgSelectSingle46{{"PgSelectSingle[46∈8]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item45 --> PgSelectSingle46
    PgClassExpression47{{"PgClassExpression[47∈9]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle46 --> PgClassExpression47
    PgClassExpression48{{"PgClassExpression[48∈9]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle46 --> PgClassExpression48
    PgClassExpression49{{"PgClassExpression[49∈9]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle46 --> PgClassExpression49
    PgClassExpression50{{"PgClassExpression[50∈9]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle46 --> PgClassExpression50
    PgClassExpression57{{"PgClassExpression[57∈10] ➊<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle56 --> PgClassExpression57
    PgClassExpression58{{"PgClassExpression[58∈10] ➊<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle56 --> PgClassExpression58
    PgClassExpression59{{"PgClassExpression[59∈10] ➊<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle56 --> PgClassExpression59
    PgClassExpression60{{"PgClassExpression[60∈10] ➊<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle56 --> PgClassExpression60
    PgClassExpression67{{"PgClassExpression[67∈11] ➊<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle66 --> PgClassExpression67
    PgClassExpression68{{"PgClassExpression[68∈11] ➊<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle66 --> PgClassExpression68
    PgClassExpression69{{"PgClassExpression[69∈11] ➊<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle66 --> PgClassExpression69
    PgClassExpression70{{"PgClassExpression[70∈11] ➊<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle66 --> PgClassExpression70
    PgSelect79[["PgSelect[79∈12] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object12 & Lambda14 & Constant111 & Connection77 --> PgSelect79
    PgSelectRows80[["PgSelectRows[80∈12] ➊"]]:::plan
    PgSelect79 --> PgSelectRows80
    __Item81[/"__Item[81∈13]<br />ᐸ80ᐳ"\]:::itemplan
    PgSelectRows80 ==> __Item81
    PgSelectSingle82{{"PgSelectSingle[82∈13]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item81 --> PgSelectSingle82
    PgClassExpression83{{"PgClassExpression[83∈14]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle82 --> PgClassExpression83
    PgClassExpression84{{"PgClassExpression[84∈14]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle82 --> PgClassExpression84
    PgClassExpression85{{"PgClassExpression[85∈14]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle82 --> PgClassExpression85
    PgClassExpression86{{"PgClassExpression[86∈14]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle82 --> PgClassExpression86
    PgSelect95[["PgSelect[95∈15] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object12 & Lambda14 & Constant111 & Connection93 --> PgSelect95
    PgSelectRows96[["PgSelectRows[96∈15] ➊"]]:::plan
    PgSelect95 --> PgSelectRows96
    __Item97[/"__Item[97∈16]<br />ᐸ96ᐳ"\]:::itemplan
    PgSelectRows96 ==> __Item97
    PgSelectSingle98{{"PgSelectSingle[98∈16]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item97 --> PgSelectSingle98
    PgClassExpression99{{"PgClassExpression[99∈17]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle98 --> PgClassExpression99
    PgClassExpression100{{"PgClassExpression[100∈17]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle98 --> PgClassExpression100
    PgClassExpression101{{"PgClassExpression[101∈17]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle98 --> PgClassExpression101
    PgClassExpression102{{"PgClassExpression[102∈17]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle98 --> PgClassExpression102

    %% define steps

    subgraph "Buckets for queries/v4/enum_tables.queries"
    Bucket0("Bucket 0 (root)<br /><br />1: <br />ᐳ: 10, 11, 13, 27, 41, 77, 93, 109, 111, 113, 114, 115, 12, 14, 28, 42<br />2: PgSelect[52], PgSelect[62]<br />3: PgSelectRows[55], PgSelectRows[65]<br />ᐳ: 54, 56, 64, 66"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Access10,Access11,Object12,Connection13,Lambda14,Connection27,Lambda28,Connection41,Lambda42,PgSelect52,First54,PgSelectRows55,PgSelectSingle56,PgSelect62,First64,PgSelectRows65,PgSelectSingle66,Connection77,Connection93,Constant109,Constant111,Constant113,Constant114,Constant115 bucket0
    Bucket1("Bucket 1 (nullableBoundary)<br />Deps: 12, 14, 13<br /><br />ROOT Connectionᐸ9ᐳ[13]<br />1: PgSelect[15]<br />2: PgSelectRows[16]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect15,PgSelectRows16 bucket1
    Bucket2("Bucket 2 (listItem)<br /><br />ROOT __Item{2}ᐸ16ᐳ[17]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item17,PgSelectSingle18 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 18<br /><br />ROOT PgSelectSingle{2}ᐸletter_descriptionsᐳ[18]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgClassExpression19,PgClassExpression20,PgClassExpression21,PgClassExpression22 bucket3
    Bucket4("Bucket 4 (nullableBoundary)<br />Deps: 12, 28, 27<br /><br />ROOT Connectionᐸ25ᐳ[27]<br />1: PgSelect[29]<br />2: PgSelectRows[30]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect29,PgSelectRows30 bucket4
    Bucket5("Bucket 5 (listItem)<br /><br />ROOT __Item{5}ᐸ30ᐳ[31]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,__Item31,PgSelectSingle32 bucket5
    Bucket6("Bucket 6 (nullableBoundary)<br />Deps: 32<br /><br />ROOT PgSelectSingle{5}ᐸletter_descriptionsᐳ[32]"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgClassExpression33,PgClassExpression34,PgClassExpression35,PgClassExpression36 bucket6
    Bucket7("Bucket 7 (nullableBoundary)<br />Deps: 12, 42, 41<br /><br />ROOT Connectionᐸ39ᐳ[41]<br />1: PgSelect[43]<br />2: PgSelectRows[44]"):::bucket
    classDef bucket7 stroke:#808000
    class Bucket7,PgSelect43,PgSelectRows44 bucket7
    Bucket8("Bucket 8 (listItem)<br /><br />ROOT __Item{8}ᐸ44ᐳ[45]"):::bucket
    classDef bucket8 stroke:#dda0dd
    class Bucket8,__Item45,PgSelectSingle46 bucket8
    Bucket9("Bucket 9 (nullableBoundary)<br />Deps: 46<br /><br />ROOT PgSelectSingle{8}ᐸletter_descriptionsᐳ[46]"):::bucket
    classDef bucket9 stroke:#ff0000
    class Bucket9,PgClassExpression47,PgClassExpression48,PgClassExpression49,PgClassExpression50 bucket9
    Bucket10("Bucket 10 (nullableBoundary)<br />Deps: 56<br /><br />ROOT PgSelectSingleᐸletter_descriptionsᐳ[56]"):::bucket
    classDef bucket10 stroke:#ffff00
    class Bucket10,PgClassExpression57,PgClassExpression58,PgClassExpression59,PgClassExpression60 bucket10
    Bucket11("Bucket 11 (nullableBoundary)<br />Deps: 66<br /><br />ROOT PgSelectSingleᐸletter_descriptionsᐳ[66]"):::bucket
    classDef bucket11 stroke:#00ffff
    class Bucket11,PgClassExpression67,PgClassExpression68,PgClassExpression69,PgClassExpression70 bucket11
    Bucket12("Bucket 12 (nullableBoundary)<br />Deps: 12, 14, 111, 77<br /><br />ROOT Connectionᐸ75ᐳ[77]<br />1: PgSelect[79]<br />2: PgSelectRows[80]"):::bucket
    classDef bucket12 stroke:#4169e1
    class Bucket12,PgSelect79,PgSelectRows80 bucket12
    Bucket13("Bucket 13 (listItem)<br /><br />ROOT __Item{13}ᐸ80ᐳ[81]"):::bucket
    classDef bucket13 stroke:#3cb371
    class Bucket13,__Item81,PgSelectSingle82 bucket13
    Bucket14("Bucket 14 (nullableBoundary)<br />Deps: 82<br /><br />ROOT PgSelectSingle{13}ᐸletter_descriptionsᐳ[82]"):::bucket
    classDef bucket14 stroke:#a52a2a
    class Bucket14,PgClassExpression83,PgClassExpression84,PgClassExpression85,PgClassExpression86 bucket14
    Bucket15("Bucket 15 (nullableBoundary)<br />Deps: 12, 14, 111, 93<br /><br />ROOT Connectionᐸ91ᐳ[93]<br />1: PgSelect[95]<br />2: PgSelectRows[96]"):::bucket
    classDef bucket15 stroke:#ff00ff
    class Bucket15,PgSelect95,PgSelectRows96 bucket15
    Bucket16("Bucket 16 (listItem)<br /><br />ROOT __Item{16}ᐸ96ᐳ[97]"):::bucket
    classDef bucket16 stroke:#f5deb3
    class Bucket16,__Item97,PgSelectSingle98 bucket16
    Bucket17("Bucket 17 (nullableBoundary)<br />Deps: 98<br /><br />ROOT PgSelectSingle{16}ᐸletter_descriptionsᐳ[98]"):::bucket
    classDef bucket17 stroke:#696969
    class Bucket17,PgClassExpression99,PgClassExpression100,PgClassExpression101,PgClassExpression102 bucket17
    Bucket0 --> Bucket1 & Bucket4 & Bucket7 & Bucket10 & Bucket11 & Bucket12 & Bucket15
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket4 --> Bucket5
    Bucket5 --> Bucket6
    Bucket7 --> Bucket8
    Bucket8 --> Bucket9
    Bucket12 --> Bucket13
    Bucket13 --> Bucket14
    Bucket15 --> Bucket16
    Bucket16 --> Bucket17
    end
