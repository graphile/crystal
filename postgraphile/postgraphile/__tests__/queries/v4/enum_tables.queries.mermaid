%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    Connection13{{"Connection[13∈0] ➊<br />ᐸ9ᐳ"}}:::plan
    Constant6{{"Constant[6∈0] ➊<br />ᐸundefinedᐳ"}}:::plan
    Constant6 & Constant6 & Constant6 --> Connection13
    Connection28{{"Connection[28∈0] ➊<br />ᐸ26ᐳ"}}:::plan
    Constant6 & Constant6 & Constant6 --> Connection28
    Connection43{{"Connection[43∈0] ➊<br />ᐸ41ᐳ"}}:::plan
    Constant6 & Constant6 & Constant6 --> Connection43
    Connection80{{"Connection[80∈0] ➊<br />ᐸ78ᐳ"}}:::plan
    Constant6 & Constant6 & Constant6 --> Connection80
    Connection97{{"Connection[97∈0] ➊<br />ᐸ95ᐳ"}}:::plan
    Constant6 & Constant6 & Constant6 --> Connection97
    Object12{{"Object[12∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access10{{"Access[10∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access11{{"Access[11∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access10 & Access11 --> Object12
    PgSelect55[["PgSelect[55∈0] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Constant114{{"Constant[114∈0] ➊<br />ᐸ'B'ᐳ"}}:::plan
    Object12 & Constant114 --> PgSelect55
    PgSelect65[["PgSelect[65∈0] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object12 & Constant114 --> PgSelect65
    __InputObject76{{"__InputObject[76∈0] ➊"}}:::plan
    Constant116{{"Constant[116∈0] ➊<br />ᐸ'C'ᐳ"}}:::plan
    Constant6 & Constant116 --> __InputObject76
    __InputObject93{{"__InputObject[93∈0] ➊"}}:::plan
    Constant6 & Constant116 --> __InputObject93
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access10
    __Value2 --> Access11
    Lambda14{{"Lambda[14∈0] ➊<br />ᐸextractList_grafast_applyᐳ"}}:::plan
    Constant118{{"Constant[118∈0] ➊<br />ᐸ[ 'PRIMARY_KEY_ASC' ]ᐳ"}}:::plan
    Constant118 --> Lambda14
    ApplyInput15{{"ApplyInput[15∈0] ➊"}}:::plan
    Constant6 --> ApplyInput15
    Lambda29{{"Lambda[29∈0] ➊<br />ᐸextractList_grafast_applyᐳ"}}:::plan
    Constant119{{"Constant[119∈0] ➊<br />ᐸ[ 'LETTER_DESC' ]ᐳ"}}:::plan
    Constant119 --> Lambda29
    ApplyInput30{{"ApplyInput[30∈0] ➊"}}:::plan
    Constant6 --> ApplyInput30
    Lambda44{{"Lambda[44∈0] ➊<br />ᐸextractList_grafast_applyᐳ"}}:::plan
    Constant120{{"Constant[120∈0] ➊<br />ᐸ[ 'LETTER_VIA_VIEW_DESC' ]ᐳ"}}:::plan
    Constant120 --> Lambda44
    ApplyInput45{{"ApplyInput[45∈0] ➊"}}:::plan
    Constant6 --> ApplyInput45
    First57{{"First[57∈0] ➊"}}:::plan
    PgSelectRows58[["PgSelectRows[58∈0] ➊"]]:::plan
    PgSelectRows58 --> First57
    PgSelect55 --> PgSelectRows58
    PgSelectSingle59{{"PgSelectSingle[59∈0] ➊<br />ᐸletter_descriptionsᐳ"}}:::plan
    First57 --> PgSelectSingle59
    First67{{"First[67∈0] ➊"}}:::plan
    PgSelectRows68[["PgSelectRows[68∈0] ➊"]]:::plan
    PgSelectRows68 --> First67
    PgSelect65 --> PgSelectRows68
    PgSelectSingle69{{"PgSelectSingle[69∈0] ➊<br />ᐸletter_descriptionsᐳ"}}:::plan
    First67 --> PgSelectSingle69
    ApplyInput82{{"ApplyInput[82∈0] ➊"}}:::plan
    __InputObject76 --> ApplyInput82
    ApplyInput99{{"ApplyInput[99∈0] ➊"}}:::plan
    __InputObject93 --> ApplyInput99
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    PgSelect16[["PgSelect[16∈1] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object12 & Lambda14 & ApplyInput15 & Connection13 & Constant6 & Constant6 & Constant6 --> PgSelect16
    PgSelectRows17[["PgSelectRows[17∈1] ➊"]]:::plan
    PgSelect16 --> PgSelectRows17
    __Item18[/"__Item[18∈2]<br />ᐸ17ᐳ"\]:::itemplan
    PgSelectRows17 ==> __Item18
    PgSelectSingle19{{"PgSelectSingle[19∈2]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item18 --> PgSelectSingle19
    PgClassExpression20{{"PgClassExpression[20∈3]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle19 --> PgClassExpression20
    PgClassExpression21{{"PgClassExpression[21∈3]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle19 --> PgClassExpression21
    PgClassExpression22{{"PgClassExpression[22∈3]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle19 --> PgClassExpression22
    PgClassExpression23{{"PgClassExpression[23∈3]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle19 --> PgClassExpression23
    PgSelect31[["PgSelect[31∈4] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object12 & Lambda29 & ApplyInput30 & Connection28 & Constant6 & Constant6 & Constant6 --> PgSelect31
    PgSelectRows32[["PgSelectRows[32∈4] ➊"]]:::plan
    PgSelect31 --> PgSelectRows32
    __Item33[/"__Item[33∈5]<br />ᐸ32ᐳ"\]:::itemplan
    PgSelectRows32 ==> __Item33
    PgSelectSingle34{{"PgSelectSingle[34∈5]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item33 --> PgSelectSingle34
    PgClassExpression35{{"PgClassExpression[35∈6]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle34 --> PgClassExpression35
    PgClassExpression36{{"PgClassExpression[36∈6]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle34 --> PgClassExpression36
    PgClassExpression37{{"PgClassExpression[37∈6]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle34 --> PgClassExpression37
    PgClassExpression38{{"PgClassExpression[38∈6]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle34 --> PgClassExpression38
    PgSelect46[["PgSelect[46∈7] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object12 & Lambda44 & ApplyInput45 & Connection43 & Constant6 & Constant6 & Constant6 --> PgSelect46
    PgSelectRows47[["PgSelectRows[47∈7] ➊"]]:::plan
    PgSelect46 --> PgSelectRows47
    __Item48[/"__Item[48∈8]<br />ᐸ47ᐳ"\]:::itemplan
    PgSelectRows47 ==> __Item48
    PgSelectSingle49{{"PgSelectSingle[49∈8]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item48 --> PgSelectSingle49
    PgClassExpression50{{"PgClassExpression[50∈9]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle49 --> PgClassExpression50
    PgClassExpression51{{"PgClassExpression[51∈9]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle49 --> PgClassExpression51
    PgClassExpression52{{"PgClassExpression[52∈9]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle49 --> PgClassExpression52
    PgClassExpression53{{"PgClassExpression[53∈9]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle49 --> PgClassExpression53
    PgClassExpression60{{"PgClassExpression[60∈10] ➊<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle59 --> PgClassExpression60
    PgClassExpression61{{"PgClassExpression[61∈10] ➊<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle59 --> PgClassExpression61
    PgClassExpression62{{"PgClassExpression[62∈10] ➊<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle59 --> PgClassExpression62
    PgClassExpression63{{"PgClassExpression[63∈10] ➊<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle59 --> PgClassExpression63
    PgClassExpression70{{"PgClassExpression[70∈11] ➊<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle69 --> PgClassExpression70
    PgClassExpression71{{"PgClassExpression[71∈11] ➊<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle69 --> PgClassExpression71
    PgClassExpression72{{"PgClassExpression[72∈11] ➊<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle69 --> PgClassExpression72
    PgClassExpression73{{"PgClassExpression[73∈11] ➊<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle69 --> PgClassExpression73
    PgSelect83[["PgSelect[83∈12] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object12 & Lambda14 & ApplyInput82 & Connection80 & Constant6 & Constant6 & Constant6 --> PgSelect83
    PgSelectRows84[["PgSelectRows[84∈12] ➊"]]:::plan
    PgSelect83 --> PgSelectRows84
    __Item85[/"__Item[85∈13]<br />ᐸ84ᐳ"\]:::itemplan
    PgSelectRows84 ==> __Item85
    PgSelectSingle86{{"PgSelectSingle[86∈13]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item85 --> PgSelectSingle86
    PgClassExpression87{{"PgClassExpression[87∈14]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle86 --> PgClassExpression87
    PgClassExpression88{{"PgClassExpression[88∈14]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle86 --> PgClassExpression88
    PgClassExpression89{{"PgClassExpression[89∈14]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle86 --> PgClassExpression89
    PgClassExpression90{{"PgClassExpression[90∈14]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle86 --> PgClassExpression90
    PgSelect100[["PgSelect[100∈15] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object12 & Lambda14 & ApplyInput99 & Connection97 & Constant6 & Constant6 & Constant6 --> PgSelect100
    PgSelectRows101[["PgSelectRows[101∈15] ➊"]]:::plan
    PgSelect100 --> PgSelectRows101
    __Item102[/"__Item[102∈16]<br />ᐸ101ᐳ"\]:::itemplan
    PgSelectRows101 ==> __Item102
    PgSelectSingle103{{"PgSelectSingle[103∈16]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item102 --> PgSelectSingle103
    PgClassExpression104{{"PgClassExpression[104∈17]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle103 --> PgClassExpression104
    PgClassExpression105{{"PgClassExpression[105∈17]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle103 --> PgClassExpression105
    PgClassExpression106{{"PgClassExpression[106∈17]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle103 --> PgClassExpression106
    PgClassExpression107{{"PgClassExpression[107∈17]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle103 --> PgClassExpression107

    %% define steps

    subgraph "Buckets for queries/v4/enum_tables.queries"
    Bucket0("Bucket 0 (root)<br /><br />1: <br />ᐳ: 6, 10, 11, 114, 116, 118, 119, 120, 12, 13, 14, 15, 28, 29, 30, 43, 44, 45, 76, 80, 82, 93, 97, 99<br />2: PgSelect[55], PgSelect[65]<br />3: PgSelectRows[58], PgSelectRows[68]<br />ᐳ: 57, 59, 67, 69"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Constant6,Access10,Access11,Object12,Connection13,Lambda14,ApplyInput15,Connection28,Lambda29,ApplyInput30,Connection43,Lambda44,ApplyInput45,PgSelect55,First57,PgSelectRows58,PgSelectSingle59,PgSelect65,First67,PgSelectRows68,PgSelectSingle69,__InputObject76,Connection80,ApplyInput82,__InputObject93,Connection97,ApplyInput99,Constant114,Constant116,Constant118,Constant119,Constant120 bucket0
    Bucket1("Bucket 1 (nullableBoundary)<br />Deps: 12, 14, 15, 13, 6<br /><br />ROOT Connectionᐸ9ᐳ[13]<br />1: PgSelect[16]<br />2: PgSelectRows[17]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect16,PgSelectRows17 bucket1
    Bucket2("Bucket 2 (listItem)<br /><br />ROOT __Item{2}ᐸ17ᐳ[18]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item18,PgSelectSingle19 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 19<br /><br />ROOT PgSelectSingle{2}ᐸletter_descriptionsᐳ[19]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgClassExpression20,PgClassExpression21,PgClassExpression22,PgClassExpression23 bucket3
    Bucket4("Bucket 4 (nullableBoundary)<br />Deps: 12, 29, 30, 28, 6<br /><br />ROOT Connectionᐸ26ᐳ[28]<br />1: PgSelect[31]<br />2: PgSelectRows[32]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect31,PgSelectRows32 bucket4
    Bucket5("Bucket 5 (listItem)<br /><br />ROOT __Item{5}ᐸ32ᐳ[33]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,__Item33,PgSelectSingle34 bucket5
    Bucket6("Bucket 6 (nullableBoundary)<br />Deps: 34<br /><br />ROOT PgSelectSingle{5}ᐸletter_descriptionsᐳ[34]"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgClassExpression35,PgClassExpression36,PgClassExpression37,PgClassExpression38 bucket6
    Bucket7("Bucket 7 (nullableBoundary)<br />Deps: 12, 44, 45, 43, 6<br /><br />ROOT Connectionᐸ41ᐳ[43]<br />1: PgSelect[46]<br />2: PgSelectRows[47]"):::bucket
    classDef bucket7 stroke:#808000
    class Bucket7,PgSelect46,PgSelectRows47 bucket7
    Bucket8("Bucket 8 (listItem)<br /><br />ROOT __Item{8}ᐸ47ᐳ[48]"):::bucket
    classDef bucket8 stroke:#dda0dd
    class Bucket8,__Item48,PgSelectSingle49 bucket8
    Bucket9("Bucket 9 (nullableBoundary)<br />Deps: 49<br /><br />ROOT PgSelectSingle{8}ᐸletter_descriptionsᐳ[49]"):::bucket
    classDef bucket9 stroke:#ff0000
    class Bucket9,PgClassExpression50,PgClassExpression51,PgClassExpression52,PgClassExpression53 bucket9
    Bucket10("Bucket 10 (nullableBoundary)<br />Deps: 59<br /><br />ROOT PgSelectSingleᐸletter_descriptionsᐳ[59]"):::bucket
    classDef bucket10 stroke:#ffff00
    class Bucket10,PgClassExpression60,PgClassExpression61,PgClassExpression62,PgClassExpression63 bucket10
    Bucket11("Bucket 11 (nullableBoundary)<br />Deps: 69<br /><br />ROOT PgSelectSingleᐸletter_descriptionsᐳ[69]"):::bucket
    classDef bucket11 stroke:#00ffff
    class Bucket11,PgClassExpression70,PgClassExpression71,PgClassExpression72,PgClassExpression73 bucket11
    Bucket12("Bucket 12 (nullableBoundary)<br />Deps: 12, 14, 82, 80, 6<br /><br />ROOT Connectionᐸ78ᐳ[80]<br />1: PgSelect[83]<br />2: PgSelectRows[84]"):::bucket
    classDef bucket12 stroke:#4169e1
    class Bucket12,PgSelect83,PgSelectRows84 bucket12
    Bucket13("Bucket 13 (listItem)<br /><br />ROOT __Item{13}ᐸ84ᐳ[85]"):::bucket
    classDef bucket13 stroke:#3cb371
    class Bucket13,__Item85,PgSelectSingle86 bucket13
    Bucket14("Bucket 14 (nullableBoundary)<br />Deps: 86<br /><br />ROOT PgSelectSingle{13}ᐸletter_descriptionsᐳ[86]"):::bucket
    classDef bucket14 stroke:#a52a2a
    class Bucket14,PgClassExpression87,PgClassExpression88,PgClassExpression89,PgClassExpression90 bucket14
    Bucket15("Bucket 15 (nullableBoundary)<br />Deps: 12, 14, 99, 97, 6<br /><br />ROOT Connectionᐸ95ᐳ[97]<br />1: PgSelect[100]<br />2: PgSelectRows[101]"):::bucket
    classDef bucket15 stroke:#ff00ff
    class Bucket15,PgSelect100,PgSelectRows101 bucket15
    Bucket16("Bucket 16 (listItem)<br /><br />ROOT __Item{16}ᐸ101ᐳ[102]"):::bucket
    classDef bucket16 stroke:#f5deb3
    class Bucket16,__Item102,PgSelectSingle103 bucket16
    Bucket17("Bucket 17 (nullableBoundary)<br />Deps: 103<br /><br />ROOT PgSelectSingle{16}ᐸletter_descriptionsᐳ[103]"):::bucket
    classDef bucket17 stroke:#696969
    class Bucket17,PgClassExpression104,PgClassExpression105,PgClassExpression106,PgClassExpression107 bucket17
    Bucket0 --> Bucket1 & Bucket4 & Bucket7 & Bucket10 & Bucket11 & Bucket12 & Bucket15
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket4 --> Bucket5
    Bucket5 --> Bucket6
    Bucket7 --> Bucket8
    Bucket8 --> Bucket9
    Bucket12 --> Bucket13
    Bucket13 --> Bucket14
    Bucket15 --> Bucket16
    Bucket16 --> Bucket17
    end
