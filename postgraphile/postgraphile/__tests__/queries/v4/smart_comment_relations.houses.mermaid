%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    Connection13{{"Connection[13∈0] ➊<br />ᐸ9ᐳ"}}:::plan
    Constant6{{"Constant[6∈0] ➊<br />ᐸundefinedᐳ"}}:::plan
    Constant6 & Constant6 & Constant6 --> Connection13
    Connection47{{"Connection[47∈0] ➊<br />ᐸ43ᐳ"}}:::plan
    Constant6 & Constant6 & Constant6 --> Connection47
    Connection89{{"Connection[89∈0] ➊<br />ᐸ85ᐳ"}}:::plan
    Constant6 & Constant6 & Constant6 --> Connection89
    Connection131{{"Connection[131∈0] ➊<br />ᐸ127ᐳ"}}:::plan
    Constant6 & Constant6 & Constant6 --> Connection131
    Connection172{{"Connection[172∈0] ➊<br />ᐸ168ᐳ"}}:::plan
    Constant6 & Constant6 & Constant6 --> Connection172
    Connection210{{"Connection[210∈0] ➊<br />ᐸ206ᐳ"}}:::plan
    Constant6 & Constant6 & Constant6 --> Connection210
    Connection251{{"Connection[251∈0] ➊<br />ᐸ247ᐳ"}}:::plan
    Constant6 & Constant6 & Constant6 --> Connection251
    PgSelect265[["PgSelect[265∈0] ➊<br />ᐸhousesᐳ"]]:::plan
    Object12{{"Object[12∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Constant305{{"Constant[305∈0] ➊<br />ᐸ2ᐳ"}}:::plan
    Constant306{{"Constant[306∈0] ➊<br />ᐸ3ᐳ"}}:::plan
    Object12 & Constant305 & Constant306 --> PgSelect265
    PgSelect284[["PgSelect[284∈0] ➊<br />ᐸhousesᐳ"]]:::plan
    Access280{{"Access[280∈0] ➊<br />ᐸ279.1ᐳ"}}:::plan
    Access282{{"Access[282∈0] ➊<br />ᐸ279.2ᐳ"}}:::plan
    Object12 -->|rejectNull| PgSelect284
    Access280 -->|rejectNull| PgSelect284
    Access282 --> PgSelect284
    Access10{{"Access[10∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access11{{"Access[11∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access10 & Access11 --> Object12
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access10
    __Value2 --> Access11
    Lambda14{{"Lambda[14∈0] ➊<br />ᐸextractList_grafast_applyᐳ"}}:::plan
    Constant308{{"Constant[308∈0] ➊<br />ᐸ[ 'PRIMARY_KEY_ASC' ]ᐳ"}}:::plan
    Constant308 --> Lambda14
    ApplyInput15{{"ApplyInput[15∈0] ➊"}}:::plan
    Constant6 --> ApplyInput15
    Lambda48{{"Lambda[48∈0] ➊<br />ᐸextractList_grafast_applyᐳ"}}:::plan
    Constant308 --> Lambda48
    ApplyInput49{{"ApplyInput[49∈0] ➊"}}:::plan
    Constant6 --> ApplyInput49
    First267{{"First[267∈0] ➊"}}:::plan
    PgSelectRows268[["PgSelectRows[268∈0] ➊"]]:::plan
    PgSelectRows268 --> First267
    PgSelect265 --> PgSelectRows268
    PgSelectSingle269{{"PgSelectSingle[269∈0] ➊<br />ᐸhousesᐳ"}}:::plan
    First267 --> PgSelectSingle269
    Lambda279{{"Lambda[279∈0] ➊<br />ᐸspecifier_House_base64JSONᐳ"}}:::plan
    Constant307{{"Constant[307∈0] ➊<br />ᐸ'WyJob3VzZXMiLDIsM10='ᐳ"}}:::plan
    Constant307 --> Lambda279
    Lambda279 --> Access280
    Lambda279 --> Access282
    First286{{"First[286∈0] ➊"}}:::plan
    PgSelectRows287[["PgSelectRows[287∈0] ➊"]]:::plan
    PgSelectRows287 --> First286
    PgSelect284 --> PgSelectRows287
    PgSelectSingle288{{"PgSelectSingle[288∈0] ➊<br />ᐸhousesᐳ"}}:::plan
    First286 --> PgSelectSingle288
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    Constant20{{"Constant[20∈0] ➊<br />ᐸ'houses'ᐳ"}}:::plan
    Constant36{{"Constant[36∈0] ➊<br />ᐸ'streets'ᐳ"}}:::plan
    Constant54{{"Constant[54∈0] ➊<br />ᐸ'buildings'ᐳ"}}:::plan
    Constant107{{"Constant[107∈0] ➊<br />ᐸ'properties'ᐳ"}}:::plan
    PgSelect16[["PgSelect[16∈1] ➊<br />ᐸhousesᐳ"]]:::plan
    Object12 & Lambda14 & ApplyInput15 & Connection13 & Constant6 & Constant6 & Constant6 --> PgSelect16
    PgSelectRows17[["PgSelectRows[17∈1] ➊"]]:::plan
    PgSelect16 --> PgSelectRows17
    __Item18[/"__Item[18∈2]<br />ᐸ17ᐳ"\]:::itemplan
    PgSelectRows17 ==> __Item18
    PgSelectSingle19{{"PgSelectSingle[19∈2]<br />ᐸhousesᐳ"}}:::plan
    __Item18 --> PgSelectSingle19
    List23{{"List[23∈3]<br />ᐸ20,21,22ᐳ"}}:::plan
    PgClassExpression21{{"PgClassExpression[21∈3]<br />ᐸ__houses__.”street_id”ᐳ"}}:::plan
    PgClassExpression22{{"PgClassExpression[22∈3]<br />ᐸ__houses__...operty_id”ᐳ"}}:::plan
    Constant20 & PgClassExpression21 & PgClassExpression22 --> List23
    PgSelect184[["PgSelect[184∈3]<br />ᐸstreet_propertyᐳ"]]:::plan
    Object12 & PgClassExpression21 & PgClassExpression22 --> PgSelect184
    PgSelect29[["PgSelect[29∈3]<br />ᐸstreetsᐳ"]]:::plan
    Object12 & PgClassExpression21 --> PgSelect29
    PgSelect59[["PgSelect[59∈3]<br />ᐸbuildingsᐳ"]]:::plan
    PgClassExpression28{{"PgClassExpression[28∈3]<br />ᐸ__houses__...ilding_id”ᐳ"}}:::plan
    Object12 & PgClassExpression28 --> PgSelect59
    PgSelect143[["PgSelect[143∈3]<br />ᐸpropertiesᐳ"]]:::plan
    Object12 & PgClassExpression22 --> PgSelect143
    PgSelectSingle19 --> PgClassExpression21
    PgSelectSingle19 --> PgClassExpression22
    Lambda24{{"Lambda[24∈3]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List23 --> Lambda24
    PgClassExpression25{{"PgClassExpression[25∈3]<br />ᐸ__houses__...ding_name”ᐳ"}}:::plan
    PgSelectSingle19 --> PgClassExpression25
    PgClassExpression26{{"PgClassExpression[26∈3]<br />ᐸ__houses__...or_number”ᐳ"}}:::plan
    PgSelectSingle19 --> PgClassExpression26
    PgClassExpression27{{"PgClassExpression[27∈3]<br />ᐸ__houses__...reet_name”ᐳ"}}:::plan
    PgSelectSingle19 --> PgClassExpression27
    PgSelectSingle19 --> PgClassExpression28
    First33{{"First[33∈3]"}}:::plan
    PgSelectRows34[["PgSelectRows[34∈3]"]]:::plan
    PgSelectRows34 --> First33
    PgSelect29 --> PgSelectRows34
    PgSelectSingle35{{"PgSelectSingle[35∈3]<br />ᐸstreetsᐳ"}}:::plan
    First33 --> PgSelectSingle35
    First61{{"First[61∈3]"}}:::plan
    PgSelectRows62[["PgSelectRows[62∈3]"]]:::plan
    PgSelectRows62 --> First61
    PgSelect59 --> PgSelectRows62
    PgSelectSingle63{{"PgSelectSingle[63∈3]<br />ᐸbuildingsᐳ"}}:::plan
    First61 --> PgSelectSingle63
    First145{{"First[145∈3]"}}:::plan
    PgSelectRows146[["PgSelectRows[146∈3]"]]:::plan
    PgSelectRows146 --> First145
    PgSelect143 --> PgSelectRows146
    PgSelectSingle147{{"PgSelectSingle[147∈3]<br />ᐸpropertiesᐳ"}}:::plan
    First145 --> PgSelectSingle147
    First186{{"First[186∈3]"}}:::plan
    PgSelectRows187[["PgSelectRows[187∈3]"]]:::plan
    PgSelectRows187 --> First186
    PgSelect184 --> PgSelectRows187
    PgSelectSingle188{{"PgSelectSingle[188∈3]<br />ᐸstreet_propertyᐳ"}}:::plan
    First186 --> PgSelectSingle188
    PgSelect50[["PgSelect[50∈4]<br />ᐸbuildingsᐳ"]]:::plan
    PgClassExpression40{{"PgClassExpression[40∈4]<br />ᐸ__streets__.”name”ᐳ"}}:::plan
    Object12 & PgClassExpression40 & Lambda48 & ApplyInput49 & Connection47 & Constant6 & Constant6 & Constant6 --> PgSelect50
    List38{{"List[38∈4]<br />ᐸ36,37ᐳ"}}:::plan
    PgClassExpression37{{"PgClassExpression[37∈4]<br />ᐸ__streets__.”id”ᐳ"}}:::plan
    Constant36 & PgClassExpression37 --> List38
    PgSelectSingle35 --> PgClassExpression37
    Lambda39{{"Lambda[39∈4]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List38 --> Lambda39
    PgSelectSingle35 --> PgClassExpression40
    PgSelectRows51[["PgSelectRows[51∈4]"]]:::plan
    PgSelect50 --> PgSelectRows51
    __Item52[/"__Item[52∈5]<br />ᐸ51ᐳ"\]:::itemplan
    PgSelectRows51 ==> __Item52
    PgSelectSingle53{{"PgSelectSingle[53∈5]<br />ᐸbuildingsᐳ"}}:::plan
    __Item52 --> PgSelectSingle53
    List56{{"List[56∈6]<br />ᐸ54,55ᐳ"}}:::plan
    PgClassExpression55{{"PgClassExpression[55∈6]<br />ᐸ__buildings__.”id”ᐳ"}}:::plan
    Constant54 & PgClassExpression55 --> List56
    PgSelectSingle53 --> PgClassExpression55
    Lambda57{{"Lambda[57∈6]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List56 --> Lambda57
    PgClassExpression58{{"PgClassExpression[58∈6]<br />ᐸ__buildings__.”name”ᐳ"}}:::plan
    PgSelectSingle53 --> PgClassExpression58
    List66{{"List[66∈7]<br />ᐸ54,65ᐳ"}}:::plan
    PgClassExpression65{{"PgClassExpression[65∈7]<br />ᐸ__buildings__.”id”ᐳ"}}:::plan
    Constant54 & PgClassExpression65 --> List66
    PgSelect71[["PgSelect[71∈7]<br />ᐸstreetsᐳ"]]:::plan
    PgClassExpression68{{"PgClassExpression[68∈7]<br />ᐸ__buildings__.”name”ᐳ"}}:::plan
    Object12 & PgClassExpression68 --> PgSelect71
    PgSelect102[["PgSelect[102∈7]<br />ᐸpropertiesᐳ"]]:::plan
    PgClassExpression101{{"PgClassExpression[101∈7]<br />ᐸ__building...operty_id”ᐳ"}}:::plan
    Object12 & PgClassExpression101 --> PgSelect102
    PgSelectSingle63 --> PgClassExpression65
    Lambda67{{"Lambda[67∈7]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List66 --> Lambda67
    PgSelectSingle63 --> PgClassExpression68
    PgClassExpression69{{"PgClassExpression[69∈7]<br />ᐸ__buildings__.”floors”ᐳ"}}:::plan
    PgSelectSingle63 --> PgClassExpression69
    PgClassExpression70{{"PgClassExpression[70∈7]<br />ᐸ__building...s_primary”ᐳ"}}:::plan
    PgSelectSingle63 --> PgClassExpression70
    First75{{"First[75∈7]"}}:::plan
    PgSelectRows76[["PgSelectRows[76∈7]"]]:::plan
    PgSelectRows76 --> First75
    PgSelect71 --> PgSelectRows76
    PgSelectSingle77{{"PgSelectSingle[77∈7]<br />ᐸstreetsᐳ"}}:::plan
    First75 --> PgSelectSingle77
    PgSelectSingle63 --> PgClassExpression101
    First104{{"First[104∈7]"}}:::plan
    PgSelectRows105[["PgSelectRows[105∈7]"]]:::plan
    PgSelectRows105 --> First104
    PgSelect102 --> PgSelectRows105
    PgSelectSingle106{{"PgSelectSingle[106∈7]<br />ᐸpropertiesᐳ"}}:::plan
    First104 --> PgSelectSingle106
    PgSelect92[["PgSelect[92∈8]<br />ᐸbuildingsᐳ"]]:::plan
    PgClassExpression82{{"PgClassExpression[82∈8]<br />ᐸ__streets__.”name”ᐳ"}}:::plan
    Object12 & PgClassExpression82 & Lambda48 & ApplyInput49 & Connection89 & Constant6 & Constant6 & Constant6 --> PgSelect92
    List80{{"List[80∈8]<br />ᐸ36,79ᐳ"}}:::plan
    PgClassExpression79{{"PgClassExpression[79∈8]<br />ᐸ__streets__.”id”ᐳ"}}:::plan
    Constant36 & PgClassExpression79 --> List80
    PgSelectSingle77 --> PgClassExpression79
    Lambda81{{"Lambda[81∈8]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List80 --> Lambda81
    PgSelectSingle77 --> PgClassExpression82
    PgSelectRows93[["PgSelectRows[93∈8]"]]:::plan
    PgSelect92 --> PgSelectRows93
    __Item94[/"__Item[94∈9]<br />ᐸ93ᐳ"\]:::itemplan
    PgSelectRows93 ==> __Item94
    PgSelectSingle95{{"PgSelectSingle[95∈9]<br />ᐸbuildingsᐳ"}}:::plan
    __Item94 --> PgSelectSingle95
    List98{{"List[98∈10]<br />ᐸ54,97ᐳ"}}:::plan
    PgClassExpression97{{"PgClassExpression[97∈10]<br />ᐸ__buildings__.”id”ᐳ"}}:::plan
    Constant54 & PgClassExpression97 --> List98
    PgSelectSingle95 --> PgClassExpression97
    Lambda99{{"Lambda[99∈10]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List98 --> Lambda99
    PgClassExpression100{{"PgClassExpression[100∈10]<br />ᐸ__buildings__.”name”ᐳ"}}:::plan
    PgSelectSingle95 --> PgClassExpression100
    List109{{"List[109∈11]<br />ᐸ107,108ᐳ"}}:::plan
    PgClassExpression108{{"PgClassExpression[108∈11]<br />ᐸ__properties__.”id”ᐳ"}}:::plan
    Constant107 & PgClassExpression108 --> List109
    PgSelect113[["PgSelect[113∈11]<br />ᐸstreetsᐳ"]]:::plan
    PgClassExpression111{{"PgClassExpression[111∈11]<br />ᐸ__properti...street_id”ᐳ"}}:::plan
    Object12 & PgClassExpression111 --> PgSelect113
    PgSelectSingle106 --> PgClassExpression108
    Lambda110{{"Lambda[110∈11]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List109 --> Lambda110
    PgSelectSingle106 --> PgClassExpression111
    PgClassExpression112{{"PgClassExpression[112∈11]<br />ᐸ__properti...or_number”ᐳ"}}:::plan
    PgSelectSingle106 --> PgClassExpression112
    First117{{"First[117∈11]"}}:::plan
    PgSelectRows118[["PgSelectRows[118∈11]"]]:::plan
    PgSelectRows118 --> First117
    PgSelect113 --> PgSelectRows118
    PgSelectSingle119{{"PgSelectSingle[119∈11]<br />ᐸstreetsᐳ"}}:::plan
    First117 --> PgSelectSingle119
    PgSelect134[["PgSelect[134∈12]<br />ᐸbuildingsᐳ"]]:::plan
    PgClassExpression124{{"PgClassExpression[124∈12]<br />ᐸ__streets__.”name”ᐳ"}}:::plan
    Object12 & PgClassExpression124 & Lambda48 & ApplyInput49 & Connection131 & Constant6 & Constant6 & Constant6 --> PgSelect134
    List122{{"List[122∈12]<br />ᐸ36,121ᐳ"}}:::plan
    PgClassExpression121{{"PgClassExpression[121∈12]<br />ᐸ__streets__.”id”ᐳ"}}:::plan
    Constant36 & PgClassExpression121 --> List122
    PgSelectSingle119 --> PgClassExpression121
    Lambda123{{"Lambda[123∈12]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List122 --> Lambda123
    PgSelectSingle119 --> PgClassExpression124
    PgSelectRows135[["PgSelectRows[135∈12]"]]:::plan
    PgSelect134 --> PgSelectRows135
    __Item136[/"__Item[136∈13]<br />ᐸ135ᐳ"\]:::itemplan
    PgSelectRows135 ==> __Item136
    PgSelectSingle137{{"PgSelectSingle[137∈13]<br />ᐸbuildingsᐳ"}}:::plan
    __Item136 --> PgSelectSingle137
    List140{{"List[140∈14]<br />ᐸ54,139ᐳ"}}:::plan
    PgClassExpression139{{"PgClassExpression[139∈14]<br />ᐸ__buildings__.”id”ᐳ"}}:::plan
    Constant54 & PgClassExpression139 --> List140
    PgSelectSingle137 --> PgClassExpression139
    Lambda141{{"Lambda[141∈14]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List140 --> Lambda141
    PgClassExpression142{{"PgClassExpression[142∈14]<br />ᐸ__buildings__.”name”ᐳ"}}:::plan
    PgSelectSingle137 --> PgClassExpression142
    List150{{"List[150∈15]<br />ᐸ107,149ᐳ"}}:::plan
    PgClassExpression149{{"PgClassExpression[149∈15]<br />ᐸ__properties__.”id”ᐳ"}}:::plan
    Constant107 & PgClassExpression149 --> List150
    PgSelect154[["PgSelect[154∈15]<br />ᐸstreetsᐳ"]]:::plan
    PgClassExpression152{{"PgClassExpression[152∈15]<br />ᐸ__properti...street_id”ᐳ"}}:::plan
    Object12 & PgClassExpression152 --> PgSelect154
    PgSelectSingle147 --> PgClassExpression149
    Lambda151{{"Lambda[151∈15]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List150 --> Lambda151
    PgSelectSingle147 --> PgClassExpression152
    PgClassExpression153{{"PgClassExpression[153∈15]<br />ᐸ__properti...or_number”ᐳ"}}:::plan
    PgSelectSingle147 --> PgClassExpression153
    First158{{"First[158∈15]"}}:::plan
    PgSelectRows159[["PgSelectRows[159∈15]"]]:::plan
    PgSelectRows159 --> First158
    PgSelect154 --> PgSelectRows159
    PgSelectSingle160{{"PgSelectSingle[160∈15]<br />ᐸstreetsᐳ"}}:::plan
    First158 --> PgSelectSingle160
    PgSelect175[["PgSelect[175∈16]<br />ᐸbuildingsᐳ"]]:::plan
    PgClassExpression165{{"PgClassExpression[165∈16]<br />ᐸ__streets__.”name”ᐳ"}}:::plan
    Object12 & PgClassExpression165 & Lambda48 & ApplyInput49 & Connection172 & Constant6 & Constant6 & Constant6 --> PgSelect175
    List163{{"List[163∈16]<br />ᐸ36,162ᐳ"}}:::plan
    PgClassExpression162{{"PgClassExpression[162∈16]<br />ᐸ__streets__.”id”ᐳ"}}:::plan
    Constant36 & PgClassExpression162 --> List163
    PgSelectSingle160 --> PgClassExpression162
    Lambda164{{"Lambda[164∈16]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List163 --> Lambda164
    PgSelectSingle160 --> PgClassExpression165
    PgSelectRows176[["PgSelectRows[176∈16]"]]:::plan
    PgSelect175 --> PgSelectRows176
    __Item177[/"__Item[177∈17]<br />ᐸ176ᐳ"\]:::itemplan
    PgSelectRows176 ==> __Item177
    PgSelectSingle178{{"PgSelectSingle[178∈17]<br />ᐸbuildingsᐳ"}}:::plan
    __Item177 --> PgSelectSingle178
    List181{{"List[181∈18]<br />ᐸ54,180ᐳ"}}:::plan
    PgClassExpression180{{"PgClassExpression[180∈18]<br />ᐸ__buildings__.”id”ᐳ"}}:::plan
    Constant54 & PgClassExpression180 --> List181
    PgSelectSingle178 --> PgClassExpression180
    Lambda182{{"Lambda[182∈18]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List181 --> Lambda182
    PgClassExpression183{{"PgClassExpression[183∈18]<br />ᐸ__buildings__.”name”ᐳ"}}:::plan
    PgSelectSingle178 --> PgClassExpression183
    PgSelect192[["PgSelect[192∈19]<br />ᐸstreetsᐳ"]]:::plan
    PgClassExpression189{{"PgClassExpression[189∈19]<br />ᐸ__street_p..._.”str_id”ᐳ"}}:::plan
    Object12 & PgClassExpression189 --> PgSelect192
    PgSelect222[["PgSelect[222∈19]<br />ᐸpropertiesᐳ"]]:::plan
    PgClassExpression190{{"PgClassExpression[190∈19]<br />ᐸ__street_p....”prop_id”ᐳ"}}:::plan
    Object12 & PgClassExpression190 --> PgSelect222
    PgSelectSingle188 --> PgClassExpression189
    PgSelectSingle188 --> PgClassExpression190
    PgClassExpression191{{"PgClassExpression[191∈19]<br />ᐸ__street_p...ent_owner”ᐳ"}}:::plan
    PgSelectSingle188 --> PgClassExpression191
    First196{{"First[196∈19]"}}:::plan
    PgSelectRows197[["PgSelectRows[197∈19]"]]:::plan
    PgSelectRows197 --> First196
    PgSelect192 --> PgSelectRows197
    PgSelectSingle198{{"PgSelectSingle[198∈19]<br />ᐸstreetsᐳ"}}:::plan
    First196 --> PgSelectSingle198
    First224{{"First[224∈19]"}}:::plan
    PgSelectRows225[["PgSelectRows[225∈19]"]]:::plan
    PgSelectRows225 --> First224
    PgSelect222 --> PgSelectRows225
    PgSelectSingle226{{"PgSelectSingle[226∈19]<br />ᐸpropertiesᐳ"}}:::plan
    First224 --> PgSelectSingle226
    PgSelect213[["PgSelect[213∈20]<br />ᐸbuildingsᐳ"]]:::plan
    PgClassExpression203{{"PgClassExpression[203∈20]<br />ᐸ__streets__.”name”ᐳ"}}:::plan
    Object12 & PgClassExpression203 & Lambda48 & ApplyInput49 & Connection210 & Constant6 & Constant6 & Constant6 --> PgSelect213
    List201{{"List[201∈20]<br />ᐸ36,200ᐳ"}}:::plan
    PgClassExpression200{{"PgClassExpression[200∈20]<br />ᐸ__streets__.”id”ᐳ"}}:::plan
    Constant36 & PgClassExpression200 --> List201
    PgSelectSingle198 --> PgClassExpression200
    Lambda202{{"Lambda[202∈20]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List201 --> Lambda202
    PgSelectSingle198 --> PgClassExpression203
    PgSelectRows214[["PgSelectRows[214∈20]"]]:::plan
    PgSelect213 --> PgSelectRows214
    __Item215[/"__Item[215∈21]<br />ᐸ214ᐳ"\]:::itemplan
    PgSelectRows214 ==> __Item215
    PgSelectSingle216{{"PgSelectSingle[216∈21]<br />ᐸbuildingsᐳ"}}:::plan
    __Item215 --> PgSelectSingle216
    List219{{"List[219∈22]<br />ᐸ54,218ᐳ"}}:::plan
    PgClassExpression218{{"PgClassExpression[218∈22]<br />ᐸ__buildings__.”id”ᐳ"}}:::plan
    Constant54 & PgClassExpression218 --> List219
    PgSelectSingle216 --> PgClassExpression218
    Lambda220{{"Lambda[220∈22]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List219 --> Lambda220
    PgClassExpression221{{"PgClassExpression[221∈22]<br />ᐸ__buildings__.”name”ᐳ"}}:::plan
    PgSelectSingle216 --> PgClassExpression221
    List229{{"List[229∈23]<br />ᐸ107,228ᐳ"}}:::plan
    PgClassExpression228{{"PgClassExpression[228∈23]<br />ᐸ__properties__.”id”ᐳ"}}:::plan
    Constant107 & PgClassExpression228 --> List229
    PgSelect233[["PgSelect[233∈23]<br />ᐸstreetsᐳ"]]:::plan
    PgClassExpression231{{"PgClassExpression[231∈23]<br />ᐸ__properti...street_id”ᐳ"}}:::plan
    Object12 & PgClassExpression231 --> PgSelect233
    PgSelectSingle226 --> PgClassExpression228
    Lambda230{{"Lambda[230∈23]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List229 --> Lambda230
    PgSelectSingle226 --> PgClassExpression231
    PgClassExpression232{{"PgClassExpression[232∈23]<br />ᐸ__properti...or_number”ᐳ"}}:::plan
    PgSelectSingle226 --> PgClassExpression232
    First237{{"First[237∈23]"}}:::plan
    PgSelectRows238[["PgSelectRows[238∈23]"]]:::plan
    PgSelectRows238 --> First237
    PgSelect233 --> PgSelectRows238
    PgSelectSingle239{{"PgSelectSingle[239∈23]<br />ᐸstreetsᐳ"}}:::plan
    First237 --> PgSelectSingle239
    PgSelect254[["PgSelect[254∈24]<br />ᐸbuildingsᐳ"]]:::plan
    PgClassExpression244{{"PgClassExpression[244∈24]<br />ᐸ__streets__.”name”ᐳ"}}:::plan
    Object12 & PgClassExpression244 & Lambda48 & ApplyInput49 & Connection251 & Constant6 & Constant6 & Constant6 --> PgSelect254
    List242{{"List[242∈24]<br />ᐸ36,241ᐳ"}}:::plan
    PgClassExpression241{{"PgClassExpression[241∈24]<br />ᐸ__streets__.”id”ᐳ"}}:::plan
    Constant36 & PgClassExpression241 --> List242
    PgSelectSingle239 --> PgClassExpression241
    Lambda243{{"Lambda[243∈24]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List242 --> Lambda243
    PgSelectSingle239 --> PgClassExpression244
    PgSelectRows255[["PgSelectRows[255∈24]"]]:::plan
    PgSelect254 --> PgSelectRows255
    __Item256[/"__Item[256∈25]<br />ᐸ255ᐳ"\]:::itemplan
    PgSelectRows255 ==> __Item256
    PgSelectSingle257{{"PgSelectSingle[257∈25]<br />ᐸbuildingsᐳ"}}:::plan
    __Item256 --> PgSelectSingle257
    List260{{"List[260∈26]<br />ᐸ54,259ᐳ"}}:::plan
    PgClassExpression259{{"PgClassExpression[259∈26]<br />ᐸ__buildings__.”id”ᐳ"}}:::plan
    Constant54 & PgClassExpression259 --> List260
    PgSelectSingle257 --> PgClassExpression259
    Lambda261{{"Lambda[261∈26]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List260 --> Lambda261
    PgClassExpression262{{"PgClassExpression[262∈26]<br />ᐸ__buildings__.”name”ᐳ"}}:::plan
    PgSelectSingle257 --> PgClassExpression262
    List276{{"List[276∈27] ➊<br />ᐸ20,274,275ᐳ"}}:::plan
    PgClassExpression274{{"PgClassExpression[274∈27] ➊<br />ᐸ__houses__.”street_id”ᐳ"}}:::plan
    PgClassExpression275{{"PgClassExpression[275∈27] ➊<br />ᐸ__houses__...operty_id”ᐳ"}}:::plan
    Constant20 & PgClassExpression274 & PgClassExpression275 --> List276
    PgClassExpression270{{"PgClassExpression[270∈27] ➊<br />ᐸ__houses__...ding_name”ᐳ"}}:::plan
    PgSelectSingle269 --> PgClassExpression270
    PgClassExpression271{{"PgClassExpression[271∈27] ➊<br />ᐸ__houses__...or_number”ᐳ"}}:::plan
    PgSelectSingle269 --> PgClassExpression271
    PgClassExpression272{{"PgClassExpression[272∈27] ➊<br />ᐸ__houses__...reet_name”ᐳ"}}:::plan
    PgSelectSingle269 --> PgClassExpression272
    PgSelectSingle269 --> PgClassExpression274
    PgSelectSingle269 --> PgClassExpression275
    Lambda277{{"Lambda[277∈27] ➊<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List276 --> Lambda277
    List295{{"List[295∈28] ➊<br />ᐸ20,293,294ᐳ"}}:::plan
    PgClassExpression293{{"PgClassExpression[293∈28] ➊<br />ᐸ__houses__.”street_id”ᐳ"}}:::plan
    PgClassExpression294{{"PgClassExpression[294∈28] ➊<br />ᐸ__houses__...operty_id”ᐳ"}}:::plan
    Constant20 & PgClassExpression293 & PgClassExpression294 --> List295
    PgClassExpression289{{"PgClassExpression[289∈28] ➊<br />ᐸ__houses__...ding_name”ᐳ"}}:::plan
    PgSelectSingle288 --> PgClassExpression289
    PgClassExpression290{{"PgClassExpression[290∈28] ➊<br />ᐸ__houses__...or_number”ᐳ"}}:::plan
    PgSelectSingle288 --> PgClassExpression290
    PgClassExpression291{{"PgClassExpression[291∈28] ➊<br />ᐸ__houses__...reet_name”ᐳ"}}:::plan
    PgSelectSingle288 --> PgClassExpression291
    PgSelectSingle288 --> PgClassExpression293
    PgSelectSingle288 --> PgClassExpression294
    Lambda296{{"Lambda[296∈28] ➊<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List295 --> Lambda296

    %% define steps

    subgraph "Buckets for queries/v4/smart_comment_relations.houses"
    Bucket0("Bucket 0 (root)<br /><br />1: <br />ᐳ: 6, 10, 11, 20, 36, 54, 107, 305, 306, 307, 308, 12, 13, 14, 15, 47, 48, 49, 89, 131, 172, 210, 251, 279, 280, 282<br />2: PgSelect[265], PgSelect[284]<br />3: PgSelectRows[268], PgSelectRows[287]<br />ᐳ: 267, 269, 286, 288"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Constant6,Access10,Access11,Object12,Connection13,Lambda14,ApplyInput15,Constant20,Constant36,Connection47,Lambda48,ApplyInput49,Constant54,Connection89,Constant107,Connection131,Connection172,Connection210,Connection251,PgSelect265,First267,PgSelectRows268,PgSelectSingle269,Lambda279,Access280,Access282,PgSelect284,First286,PgSelectRows287,PgSelectSingle288,Constant305,Constant306,Constant307,Constant308 bucket0
    Bucket1("Bucket 1 (nullableBoundary)<br />Deps: 12, 14, 15, 13, 6, 20, 36, 48, 49, 47, 54, 89, 107, 131, 172, 210, 251<br /><br />ROOT Connectionᐸ9ᐳ[13]<br />1: PgSelect[16]<br />2: PgSelectRows[17]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect16,PgSelectRows17 bucket1
    Bucket2("Bucket 2 (listItem)<br />Deps: 20, 12, 36, 48, 49, 47, 6, 54, 89, 107, 131, 172, 210, 251<br /><br />ROOT __Item{2}ᐸ17ᐳ[18]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item18,PgSelectSingle19 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 19, 20, 12, 36, 48, 49, 47, 6, 54, 89, 107, 131, 172, 210, 251<br /><br />ROOT PgSelectSingle{2}ᐸhousesᐳ[19]<br />1: <br />ᐳ: 21, 22, 25, 26, 27, 28, 23, 24<br />2: 29, 59, 143, 184<br />3: 34, 62, 146, 187<br />ᐳ: 33, 35, 61, 63, 145, 147, 186, 188"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgClassExpression21,PgClassExpression22,List23,Lambda24,PgClassExpression25,PgClassExpression26,PgClassExpression27,PgClassExpression28,PgSelect29,First33,PgSelectRows34,PgSelectSingle35,PgSelect59,First61,PgSelectRows62,PgSelectSingle63,PgSelect143,First145,PgSelectRows146,PgSelectSingle147,PgSelect184,First186,PgSelectRows187,PgSelectSingle188 bucket3
    Bucket4("Bucket 4 (nullableBoundary)<br />Deps: 35, 36, 12, 48, 49, 47, 6, 54<br /><br />ROOT PgSelectSingle{3}ᐸstreetsᐳ[35]<br />1: <br />ᐳ: 37, 40, 38, 39<br />2: PgSelect[50]<br />3: PgSelectRows[51]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgClassExpression37,List38,Lambda39,PgClassExpression40,PgSelect50,PgSelectRows51 bucket4
    Bucket5("Bucket 5 (listItem)<br />Deps: 54<br /><br />ROOT __Item{5}ᐸ51ᐳ[52]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,__Item52,PgSelectSingle53 bucket5
    Bucket6("Bucket 6 (nullableBoundary)<br />Deps: 53, 54<br /><br />ROOT PgSelectSingle{5}ᐸbuildingsᐳ[53]"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgClassExpression55,List56,Lambda57,PgClassExpression58 bucket6
    Bucket7("Bucket 7 (nullableBoundary)<br />Deps: 63, 54, 12, 36, 48, 49, 89, 6, 107, 131<br /><br />ROOT PgSelectSingle{3}ᐸbuildingsᐳ[63]<br />1: <br />ᐳ: 65, 68, 69, 70, 101, 66, 67<br />2: PgSelect[71], PgSelect[102]<br />3: PgSelectRows[76], PgSelectRows[105]<br />ᐳ: 75, 77, 104, 106"):::bucket
    classDef bucket7 stroke:#808000
    class Bucket7,PgClassExpression65,List66,Lambda67,PgClassExpression68,PgClassExpression69,PgClassExpression70,PgSelect71,First75,PgSelectRows76,PgSelectSingle77,PgClassExpression101,PgSelect102,First104,PgSelectRows105,PgSelectSingle106 bucket7
    Bucket8("Bucket 8 (nullableBoundary)<br />Deps: 77, 36, 12, 48, 49, 89, 6, 54<br /><br />ROOT PgSelectSingle{7}ᐸstreetsᐳ[77]<br />1: <br />ᐳ: 79, 82, 80, 81<br />2: PgSelect[92]<br />3: PgSelectRows[93]"):::bucket
    classDef bucket8 stroke:#dda0dd
    class Bucket8,PgClassExpression79,List80,Lambda81,PgClassExpression82,PgSelect92,PgSelectRows93 bucket8
    Bucket9("Bucket 9 (listItem)<br />Deps: 54<br /><br />ROOT __Item{9}ᐸ93ᐳ[94]"):::bucket
    classDef bucket9 stroke:#ff0000
    class Bucket9,__Item94,PgSelectSingle95 bucket9
    Bucket10("Bucket 10 (nullableBoundary)<br />Deps: 95, 54<br /><br />ROOT PgSelectSingle{9}ᐸbuildingsᐳ[95]"):::bucket
    classDef bucket10 stroke:#ffff00
    class Bucket10,PgClassExpression97,List98,Lambda99,PgClassExpression100 bucket10
    Bucket11("Bucket 11 (nullableBoundary)<br />Deps: 106, 107, 12, 36, 48, 49, 131, 6, 54<br /><br />ROOT PgSelectSingle{7}ᐸpropertiesᐳ[106]<br />1: <br />ᐳ: 108, 111, 112, 109, 110<br />2: PgSelect[113]<br />3: PgSelectRows[118]<br />ᐳ: First[117], PgSelectSingle[119]"):::bucket
    classDef bucket11 stroke:#00ffff
    class Bucket11,PgClassExpression108,List109,Lambda110,PgClassExpression111,PgClassExpression112,PgSelect113,First117,PgSelectRows118,PgSelectSingle119 bucket11
    Bucket12("Bucket 12 (nullableBoundary)<br />Deps: 119, 36, 12, 48, 49, 131, 6, 54<br /><br />ROOT PgSelectSingle{11}ᐸstreetsᐳ[119]<br />1: <br />ᐳ: 121, 124, 122, 123<br />2: PgSelect[134]<br />3: PgSelectRows[135]"):::bucket
    classDef bucket12 stroke:#4169e1
    class Bucket12,PgClassExpression121,List122,Lambda123,PgClassExpression124,PgSelect134,PgSelectRows135 bucket12
    Bucket13("Bucket 13 (listItem)<br />Deps: 54<br /><br />ROOT __Item{13}ᐸ135ᐳ[136]"):::bucket
    classDef bucket13 stroke:#3cb371
    class Bucket13,__Item136,PgSelectSingle137 bucket13
    Bucket14("Bucket 14 (nullableBoundary)<br />Deps: 137, 54<br /><br />ROOT PgSelectSingle{13}ᐸbuildingsᐳ[137]"):::bucket
    classDef bucket14 stroke:#a52a2a
    class Bucket14,PgClassExpression139,List140,Lambda141,PgClassExpression142 bucket14
    Bucket15("Bucket 15 (nullableBoundary)<br />Deps: 147, 107, 12, 36, 48, 49, 172, 6, 54<br /><br />ROOT PgSelectSingle{3}ᐸpropertiesᐳ[147]<br />1: <br />ᐳ: 149, 152, 153, 150, 151<br />2: PgSelect[154]<br />3: PgSelectRows[159]<br />ᐳ: First[158], PgSelectSingle[160]"):::bucket
    classDef bucket15 stroke:#ff00ff
    class Bucket15,PgClassExpression149,List150,Lambda151,PgClassExpression152,PgClassExpression153,PgSelect154,First158,PgSelectRows159,PgSelectSingle160 bucket15
    Bucket16("Bucket 16 (nullableBoundary)<br />Deps: 160, 36, 12, 48, 49, 172, 6, 54<br /><br />ROOT PgSelectSingle{15}ᐸstreetsᐳ[160]<br />1: <br />ᐳ: 162, 165, 163, 164<br />2: PgSelect[175]<br />3: PgSelectRows[176]"):::bucket
    classDef bucket16 stroke:#f5deb3
    class Bucket16,PgClassExpression162,List163,Lambda164,PgClassExpression165,PgSelect175,PgSelectRows176 bucket16
    Bucket17("Bucket 17 (listItem)<br />Deps: 54<br /><br />ROOT __Item{17}ᐸ176ᐳ[177]"):::bucket
    classDef bucket17 stroke:#696969
    class Bucket17,__Item177,PgSelectSingle178 bucket17
    Bucket18("Bucket 18 (nullableBoundary)<br />Deps: 178, 54<br /><br />ROOT PgSelectSingle{17}ᐸbuildingsᐳ[178]"):::bucket
    classDef bucket18 stroke:#00bfff
    class Bucket18,PgClassExpression180,List181,Lambda182,PgClassExpression183 bucket18
    Bucket19("Bucket 19 (nullableBoundary)<br />Deps: 188, 12, 36, 48, 49, 210, 6, 54, 107, 251<br /><br />ROOT PgSelectSingle{3}ᐸstreet_propertyᐳ[188]<br />1: <br />ᐳ: 189, 190, 191<br />2: PgSelect[192], PgSelect[222]<br />3: PgSelectRows[197], PgSelectRows[225]<br />ᐳ: 196, 198, 224, 226"):::bucket
    classDef bucket19 stroke:#7f007f
    class Bucket19,PgClassExpression189,PgClassExpression190,PgClassExpression191,PgSelect192,First196,PgSelectRows197,PgSelectSingle198,PgSelect222,First224,PgSelectRows225,PgSelectSingle226 bucket19
    Bucket20("Bucket 20 (nullableBoundary)<br />Deps: 198, 36, 12, 48, 49, 210, 6, 54<br /><br />ROOT PgSelectSingle{19}ᐸstreetsᐳ[198]<br />1: <br />ᐳ: 200, 203, 201, 202<br />2: PgSelect[213]<br />3: PgSelectRows[214]"):::bucket
    classDef bucket20 stroke:#ffa500
    class Bucket20,PgClassExpression200,List201,Lambda202,PgClassExpression203,PgSelect213,PgSelectRows214 bucket20
    Bucket21("Bucket 21 (listItem)<br />Deps: 54<br /><br />ROOT __Item{21}ᐸ214ᐳ[215]"):::bucket
    classDef bucket21 stroke:#0000ff
    class Bucket21,__Item215,PgSelectSingle216 bucket21
    Bucket22("Bucket 22 (nullableBoundary)<br />Deps: 216, 54<br /><br />ROOT PgSelectSingle{21}ᐸbuildingsᐳ[216]"):::bucket
    classDef bucket22 stroke:#7fff00
    class Bucket22,PgClassExpression218,List219,Lambda220,PgClassExpression221 bucket22
    Bucket23("Bucket 23 (nullableBoundary)<br />Deps: 226, 107, 12, 36, 48, 49, 251, 6, 54<br /><br />ROOT PgSelectSingle{19}ᐸpropertiesᐳ[226]<br />1: <br />ᐳ: 228, 231, 232, 229, 230<br />2: PgSelect[233]<br />3: PgSelectRows[238]<br />ᐳ: First[237], PgSelectSingle[239]"):::bucket
    classDef bucket23 stroke:#ff1493
    class Bucket23,PgClassExpression228,List229,Lambda230,PgClassExpression231,PgClassExpression232,PgSelect233,First237,PgSelectRows238,PgSelectSingle239 bucket23
    Bucket24("Bucket 24 (nullableBoundary)<br />Deps: 239, 36, 12, 48, 49, 251, 6, 54<br /><br />ROOT PgSelectSingle{23}ᐸstreetsᐳ[239]<br />1: <br />ᐳ: 241, 244, 242, 243<br />2: PgSelect[254]<br />3: PgSelectRows[255]"):::bucket
    classDef bucket24 stroke:#808000
    class Bucket24,PgClassExpression241,List242,Lambda243,PgClassExpression244,PgSelect254,PgSelectRows255 bucket24
    Bucket25("Bucket 25 (listItem)<br />Deps: 54<br /><br />ROOT __Item{25}ᐸ255ᐳ[256]"):::bucket
    classDef bucket25 stroke:#dda0dd
    class Bucket25,__Item256,PgSelectSingle257 bucket25
    Bucket26("Bucket 26 (nullableBoundary)<br />Deps: 257, 54<br /><br />ROOT PgSelectSingle{25}ᐸbuildingsᐳ[257]"):::bucket
    classDef bucket26 stroke:#ff0000
    class Bucket26,PgClassExpression259,List260,Lambda261,PgClassExpression262 bucket26
    Bucket27("Bucket 27 (nullableBoundary)<br />Deps: 269, 20<br /><br />ROOT PgSelectSingleᐸhousesᐳ[269]"):::bucket
    classDef bucket27 stroke:#ffff00
    class Bucket27,PgClassExpression270,PgClassExpression271,PgClassExpression272,PgClassExpression274,PgClassExpression275,List276,Lambda277 bucket27
    Bucket28("Bucket 28 (nullableBoundary)<br />Deps: 288, 20<br /><br />ROOT PgSelectSingleᐸhousesᐳ[288]"):::bucket
    classDef bucket28 stroke:#00ffff
    class Bucket28,PgClassExpression289,PgClassExpression290,PgClassExpression291,PgClassExpression293,PgClassExpression294,List295,Lambda296 bucket28
    Bucket0 --> Bucket1 & Bucket27 & Bucket28
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4 & Bucket7 & Bucket15 & Bucket19
    Bucket4 --> Bucket5
    Bucket5 --> Bucket6
    Bucket7 --> Bucket8 & Bucket11
    Bucket8 --> Bucket9
    Bucket9 --> Bucket10
    Bucket11 --> Bucket12
    Bucket12 --> Bucket13
    Bucket13 --> Bucket14
    Bucket15 --> Bucket16
    Bucket16 --> Bucket17
    Bucket17 --> Bucket18
    Bucket19 --> Bucket20 & Bucket23
    Bucket20 --> Bucket21
    Bucket21 --> Bucket22
    Bucket23 --> Bucket24
    Bucket24 --> Bucket25
    Bucket25 --> Bucket26
    end
