%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% define steps
    __Value0["__Value[0∈0]"]:::plan
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    __Value5["__Value[5∈0]<br />ᐸrootValueᐳ"]:::plan
    Access12{{"Access[12∈0]<br />ᐸ3.pgSettingsᐳ"}}:::plan
    Access13{{"Access[13∈0]<br />ᐸ3.withPgClientᐳ"}}:::plan
    Object14{{"Object[14∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    PgSelect11[["PgSelect[11∈0]<br />ᐸconstructorᐳ"]]:::plan
    __Item15[/"__Item[15∈1]<br />ᐸ11ᐳ"\]:::itemplan
    PgSelectSingle16{{"PgSelectSingle[16∈1]<br />ᐸconstructorᐳ"}}:::plan
    PgClassExpression17{{"PgClassExpression[17∈1]<br />ᐸ__constructor__.”name”ᐳ"}}:::plan
    PgClassExpression18{{"PgClassExpression[18∈1]<br />ᐸ__construc..._.”export”ᐳ"}}:::plan
    PgClassExpression19{{"PgClassExpression[19∈1]<br />ᐸ__constructor__.”id”ᐳ"}}:::plan
    Constant149{{"Constant[149∈0]<br />ᐸ'Copper Wire'ᐳ"}}:::plan
    PgSelect21[["PgSelect[21∈0]<br />ᐸconstructorᐳ"]]:::plan
    First25{{"First[25∈0]"}}:::plan
    PgSelectSingle26{{"PgSelectSingle[26∈0]<br />ᐸconstructorᐳ"}}:::plan
    PgClassExpression27{{"PgClassExpression[27∈2]<br />ᐸ__constructor__.”name”ᐳ"}}:::plan
    PgClassExpression28{{"PgClassExpression[28∈2]<br />ᐸ__constructor__.”id”ᐳ"}}:::plan
    Constant150{{"Constant[150∈0]<br />ᐸ2ᐳ"}}:::plan
    PgSelect30[["PgSelect[30∈0]<br />ᐸconstructorᐳ"]]:::plan
    First34{{"First[34∈0]"}}:::plan
    PgSelectSingle35{{"PgSelectSingle[35∈0]<br />ᐸconstructorᐳ"}}:::plan
    PgClassExpression36{{"PgClassExpression[36∈3]<br />ᐸ__construc..._.”export”ᐳ"}}:::plan
    PgClassExpression37{{"PgClassExpression[37∈3]<br />ᐸ__constructor__.”name”ᐳ"}}:::plan
    Constant151{{"Constant[151∈0]<br />ᐸ'Iron Mine'ᐳ"}}:::plan
    PgSelect39[["PgSelect[39∈0]<br />ᐸconstructorᐳ"]]:::plan
    First43{{"First[43∈0]"}}:::plan
    PgSelectSingle44{{"PgSelectSingle[44∈0]<br />ᐸconstructorᐳ"}}:::plan
    PgClassExpression45{{"PgClassExpression[45∈4]<br />ᐸ__construc..._.”export”ᐳ"}}:::plan
    PgClassExpression46{{"PgClassExpression[46∈4]<br />ᐸ__constructor__.”id”ᐳ"}}:::plan
    PgSelect51[["PgSelect[51∈0]<br />ᐸyieldᐳ"]]:::plan
    __Item55[/"__Item[55∈5]<br />ᐸ51ᐳ"\]:::itemplan
    PgSelectSingle56{{"PgSelectSingle[56∈5]<br />ᐸyieldᐳ"}}:::plan
    PgClassExpression57{{"PgClassExpression[57∈5]<br />ᐸ__yield__.”crop”ᐳ"}}:::plan
    PgClassExpression58{{"PgClassExpression[58∈5]<br />ᐸ__yield__.”export”ᐳ"}}:::plan
    PgClassExpression59{{"PgClassExpression[59∈5]<br />ᐸ__yield__.”id”ᐳ"}}:::plan
    Constant152{{"Constant[152∈0]<br />ᐸ'UK'ᐳ"}}:::plan
    PgSelect61[["PgSelect[61∈0]<br />ᐸyieldᐳ"]]:::plan
    First65{{"First[65∈0]"}}:::plan
    PgSelectSingle66{{"PgSelectSingle[66∈0]<br />ᐸyieldᐳ"}}:::plan
    PgClassExpression67{{"PgClassExpression[67∈6]<br />ᐸ__yield__.”crop”ᐳ"}}:::plan
    PgClassExpression68{{"PgClassExpression[68∈6]<br />ᐸ__yield__.”id”ᐳ"}}:::plan
    PgSelect70[["PgSelect[70∈0]<br />ᐸyieldᐳ"]]:::plan
    First74{{"First[74∈0]"}}:::plan
    PgSelectSingle75{{"PgSelectSingle[75∈0]<br />ᐸyieldᐳ"}}:::plan
    PgClassExpression76{{"PgClassExpression[76∈7]<br />ᐸ__yield__.”crop”ᐳ"}}:::plan
    PgClassExpression77{{"PgClassExpression[77∈7]<br />ᐸ__yield__.”export”ᐳ"}}:::plan
    PgSelect82[["PgSelect[82∈0]<br />ᐸ__proto__ᐳ"]]:::plan
    __Item86[/"__Item[86∈8]<br />ᐸ82ᐳ"\]:::itemplan
    PgSelectSingle87{{"PgSelectSingle[87∈8]<br />ᐸ__proto__ᐳ"}}:::plan
    PgClassExpression88{{"PgClassExpression[88∈8]<br />ᐸ__proto__.”id”ᐳ"}}:::plan
    PgClassExpression89{{"PgClassExpression[89∈8]<br />ᐸ__proto__.”name”ᐳ"}}:::plan
    PgClassExpression90{{"PgClassExpression[90∈8]<br />ᐸ__proto__.”brand”ᐳ"}}:::plan
    Constant154{{"Constant[154∈0]<br />ᐸ1ᐳ"}}:::plan
    PgSelect92[["PgSelect[92∈0]<br />ᐸ__proto__ᐳ"]]:::plan
    First96{{"First[96∈0]"}}:::plan
    PgSelectSingle97{{"PgSelectSingle[97∈0]<br />ᐸ__proto__ᐳ"}}:::plan
    PgClassExpression98{{"PgClassExpression[98∈9]<br />ᐸ__proto__.”brand”ᐳ"}}:::plan
    PgClassExpression99{{"PgClassExpression[99∈9]<br />ᐸ__proto__.”name”ᐳ"}}:::plan
    Constant155{{"Constant[155∈0]<br />ᐸ'VCS'ᐳ"}}:::plan
    PgSelect101[["PgSelect[101∈0]<br />ᐸ__proto__ᐳ"]]:::plan
    First105{{"First[105∈0]"}}:::plan
    PgSelectSingle106{{"PgSelectSingle[106∈0]<br />ᐸ__proto__ᐳ"}}:::plan
    PgClassExpression107{{"PgClassExpression[107∈10]<br />ᐸ__proto__.”brand”ᐳ"}}:::plan
    PgClassExpression108{{"PgClassExpression[108∈10]<br />ᐸ__proto__.”id”ᐳ"}}:::plan
    PgSelect113[["PgSelect[113∈0]<br />ᐸnullᐳ"]]:::plan
    __Item117[/"__Item[117∈11]<br />ᐸ113ᐳ"\]:::itemplan
    PgSelectSingle118{{"PgSelectSingle[118∈11]<br />ᐸnullᐳ"}}:::plan
    PgClassExpression119{{"PgClassExpression[119∈11]<br />ᐸ__null__.”break”ᐳ"}}:::plan
    PgClassExpression120{{"PgClassExpression[120∈11]<br />ᐸ__null__.”...nProperty”ᐳ"}}:::plan
    PgClassExpression121{{"PgClassExpression[121∈11]<br />ᐸ__null__.”id”ᐳ"}}:::plan
    Constant156{{"Constant[156∈0]<br />ᐸ'10 am'ᐳ"}}:::plan
    PgSelect123[["PgSelect[123∈0]<br />ᐸnullᐳ"]]:::plan
    First127{{"First[127∈0]"}}:::plan
    PgSelectSingle128{{"PgSelectSingle[128∈0]<br />ᐸnullᐳ"}}:::plan
    PgClassExpression129{{"PgClassExpression[129∈12]<br />ᐸ__null__.”...nProperty”ᐳ"}}:::plan
    PgClassExpression130{{"PgClassExpression[130∈12]<br />ᐸ__null__.”id”ᐳ"}}:::plan
    Constant157{{"Constant[157∈0]<br />ᐸ'flat'ᐳ"}}:::plan
    PgSelect132[["PgSelect[132∈0]<br />ᐸnullᐳ"]]:::plan
    First136{{"First[136∈0]"}}:::plan
    PgSelectSingle137{{"PgSelectSingle[137∈0]<br />ᐸnullᐳ"}}:::plan
    PgClassExpression138{{"PgClassExpression[138∈13]<br />ᐸ__null__.”break”ᐳ"}}:::plan
    PgClassExpression139{{"PgClassExpression[139∈13]<br />ᐸ__null__.”id”ᐳ"}}:::plan
    Constant158{{"Constant[158∈0]<br />ᐸ3ᐳ"}}:::plan
    PgSelect141[["PgSelect[141∈0]<br />ᐸnullᐳ"]]:::plan
    First145{{"First[145∈0]"}}:::plan
    PgSelectSingle146{{"PgSelectSingle[146∈0]<br />ᐸnullᐳ"}}:::plan
    PgClassExpression147{{"PgClassExpression[147∈14]<br />ᐸ__null__.”break”ᐳ"}}:::plan
    PgClassExpression148{{"PgClassExpression[148∈14]<br />ᐸ__null__.”...nProperty”ᐳ"}}:::plan

    %% plan dependencies
    __Value3 --> Access12
    __Value3 --> Access13
    Access12 & Access13 --> Object14
    Object14 --> PgSelect11
    PgSelect11 ==> __Item15
    __Item15 --> PgSelectSingle16
    PgSelectSingle16 --> PgClassExpression17
    PgSelectSingle16 --> PgClassExpression18
    PgSelectSingle16 --> PgClassExpression19
    Object14 & Constant149 --> PgSelect21
    PgSelect21 --> First25
    First25 --> PgSelectSingle26
    PgSelectSingle26 --> PgClassExpression27
    PgSelectSingle26 --> PgClassExpression28
    Object14 & Constant150 --> PgSelect30
    PgSelect30 --> First34
    First34 --> PgSelectSingle35
    PgSelectSingle35 --> PgClassExpression36
    PgSelectSingle35 --> PgClassExpression37
    Object14 & Constant151 --> PgSelect39
    PgSelect39 --> First43
    First43 --> PgSelectSingle44
    PgSelectSingle44 --> PgClassExpression45
    PgSelectSingle44 --> PgClassExpression46
    Object14 --> PgSelect51
    PgSelect51 ==> __Item55
    __Item55 --> PgSelectSingle56
    PgSelectSingle56 --> PgClassExpression57
    PgSelectSingle56 --> PgClassExpression58
    PgSelectSingle56 --> PgClassExpression59
    Object14 & Constant152 --> PgSelect61
    PgSelect61 --> First65
    First65 --> PgSelectSingle66
    PgSelectSingle66 --> PgClassExpression67
    PgSelectSingle66 --> PgClassExpression68
    Object14 & Constant150 --> PgSelect70
    PgSelect70 --> First74
    First74 --> PgSelectSingle75
    PgSelectSingle75 --> PgClassExpression76
    PgSelectSingle75 --> PgClassExpression77
    Object14 --> PgSelect82
    PgSelect82 ==> __Item86
    __Item86 --> PgSelectSingle87
    PgSelectSingle87 --> PgClassExpression88
    PgSelectSingle87 --> PgClassExpression89
    PgSelectSingle87 --> PgClassExpression90
    Object14 & Constant154 --> PgSelect92
    PgSelect92 --> First96
    First96 --> PgSelectSingle97
    PgSelectSingle97 --> PgClassExpression98
    PgSelectSingle97 --> PgClassExpression99
    Object14 & Constant155 --> PgSelect101
    PgSelect101 --> First105
    First105 --> PgSelectSingle106
    PgSelectSingle106 --> PgClassExpression107
    PgSelectSingle106 --> PgClassExpression108
    Object14 --> PgSelect113
    PgSelect113 ==> __Item117
    __Item117 --> PgSelectSingle118
    PgSelectSingle118 --> PgClassExpression119
    PgSelectSingle118 --> PgClassExpression120
    PgSelectSingle118 --> PgClassExpression121
    Object14 & Constant156 --> PgSelect123
    PgSelect123 --> First127
    First127 --> PgSelectSingle128
    PgSelectSingle128 --> PgClassExpression129
    PgSelectSingle128 --> PgClassExpression130
    Object14 & Constant157 --> PgSelect132
    PgSelect132 --> First136
    First136 --> PgSelectSingle137
    PgSelectSingle137 --> PgClassExpression138
    PgSelectSingle137 --> PgClassExpression139
    Object14 & Constant158 --> PgSelect141
    PgSelect141 --> First145
    First145 --> PgSelectSingle146
    PgSelectSingle146 --> PgClassExpression147
    PgSelectSingle146 --> PgClassExpression148

    subgraph "Buckets for queries/v4/js-reserved-table-names"
    Bucket0("Bucket 0 (root)<br />1: <br />ᐳ: 12, 13, 149, 150, 151, 152, 154, 155, 156, 157, 158, 14<br />2: 11, 21, 30, 39, 51, 61, 70, 82, 92, 101, 113, 123, 132, 141<br />ᐳ: 25, 26, 34, 35, 43, 44, 65, 66, 74, 75, 96, 97, 105, 106, 127, 128, 136, 137, 145, 146"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value0,__Value3,__Value5,PgSelect11,Access12,Access13,Object14,PgSelect21,First25,PgSelectSingle26,PgSelect30,First34,PgSelectSingle35,PgSelect39,First43,PgSelectSingle44,PgSelect51,PgSelect61,First65,PgSelectSingle66,PgSelect70,First74,PgSelectSingle75,PgSelect82,PgSelect92,First96,PgSelectSingle97,PgSelect101,First105,PgSelectSingle106,PgSelect113,PgSelect123,First127,PgSelectSingle128,PgSelect132,First136,PgSelectSingle137,PgSelect141,First145,PgSelectSingle146,Constant149,Constant150,Constant151,Constant152,Constant154,Constant155,Constant156,Constant157,Constant158 bucket0
    Bucket1("Bucket 1 (listItem)<br />ROOT __Item{1}ᐸ11ᐳ[15]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,__Item15,PgSelectSingle16,PgClassExpression17,PgClassExpression18,PgClassExpression19 bucket1
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 26<br /><br />ROOT PgSelectSingleᐸconstructorᐳ[26]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,PgClassExpression27,PgClassExpression28 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 35<br /><br />ROOT PgSelectSingleᐸconstructorᐳ[35]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgClassExpression36,PgClassExpression37 bucket3
    Bucket4("Bucket 4 (nullableBoundary)<br />Deps: 44<br /><br />ROOT PgSelectSingleᐸconstructorᐳ[44]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgClassExpression45,PgClassExpression46 bucket4
    Bucket5("Bucket 5 (listItem)<br />ROOT __Item{5}ᐸ51ᐳ[55]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,__Item55,PgSelectSingle56,PgClassExpression57,PgClassExpression58,PgClassExpression59 bucket5
    Bucket6("Bucket 6 (nullableBoundary)<br />Deps: 66<br /><br />ROOT PgSelectSingleᐸyieldᐳ[66]"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgClassExpression67,PgClassExpression68 bucket6
    Bucket7("Bucket 7 (nullableBoundary)<br />Deps: 75<br /><br />ROOT PgSelectSingleᐸyieldᐳ[75]"):::bucket
    classDef bucket7 stroke:#808000
    class Bucket7,PgClassExpression76,PgClassExpression77 bucket7
    Bucket8("Bucket 8 (listItem)<br />ROOT __Item{8}ᐸ82ᐳ[86]"):::bucket
    classDef bucket8 stroke:#dda0dd
    class Bucket8,__Item86,PgSelectSingle87,PgClassExpression88,PgClassExpression89,PgClassExpression90 bucket8
    Bucket9("Bucket 9 (nullableBoundary)<br />Deps: 97<br /><br />ROOT PgSelectSingleᐸ__proto__ᐳ[97]"):::bucket
    classDef bucket9 stroke:#ff0000
    class Bucket9,PgClassExpression98,PgClassExpression99 bucket9
    Bucket10("Bucket 10 (nullableBoundary)<br />Deps: 106<br /><br />ROOT PgSelectSingleᐸ__proto__ᐳ[106]"):::bucket
    classDef bucket10 stroke:#ffff00
    class Bucket10,PgClassExpression107,PgClassExpression108 bucket10
    Bucket11("Bucket 11 (listItem)<br />ROOT __Item{11}ᐸ113ᐳ[117]"):::bucket
    classDef bucket11 stroke:#00ffff
    class Bucket11,__Item117,PgSelectSingle118,PgClassExpression119,PgClassExpression120,PgClassExpression121 bucket11
    Bucket12("Bucket 12 (nullableBoundary)<br />Deps: 128<br /><br />ROOT PgSelectSingleᐸnullᐳ[128]"):::bucket
    classDef bucket12 stroke:#4169e1
    class Bucket12,PgClassExpression129,PgClassExpression130 bucket12
    Bucket13("Bucket 13 (nullableBoundary)<br />Deps: 137<br /><br />ROOT PgSelectSingleᐸnullᐳ[137]"):::bucket
    classDef bucket13 stroke:#3cb371
    class Bucket13,PgClassExpression138,PgClassExpression139 bucket13
    Bucket14("Bucket 14 (nullableBoundary)<br />Deps: 146<br /><br />ROOT PgSelectSingleᐸnullᐳ[146]"):::bucket
    classDef bucket14 stroke:#a52a2a
    class Bucket14,PgClassExpression147,PgClassExpression148 bucket14
    Bucket0 --> Bucket1 & Bucket2 & Bucket3 & Bucket4 & Bucket5 & Bucket6 & Bucket7 & Bucket8 & Bucket9 & Bucket10 & Bucket11 & Bucket12 & Bucket13 & Bucket14
    end
