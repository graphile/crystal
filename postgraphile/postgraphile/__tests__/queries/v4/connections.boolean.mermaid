%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    Connection69{{"Connection[69∈0] ➊<br />ᐸ67ᐳ"}}:::plan
    Constant117{{"Constant[117∈0] ➊<br />ᐸ[HIDDEN]ᐳ"}}:::plan
    Lambda70{{"Lambda[70∈0] ➊<br />ᐸparseCursorᐳ"}}:::plan
    PgValidateParsedCursor72["PgValidateParsedCursor[72∈0] ➊"]:::plan
    Constant117 & Lambda70 & PgValidateParsedCursor72 & PgValidateParsedCursor72 & PgValidateParsedCursor72 & PgValidateParsedCursor72 & PgValidateParsedCursor72 --> Connection69
    Object19{{"Object[19∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access17{{"Access[17∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access18{{"Access[18∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access17 & Access18 --> Object19
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access17
    __Value2 --> Access18
    Connection20{{"Connection[20∈0] ➊<br />ᐸ16ᐳ"}}:::plan
    Constant117 --> Connection20
    Constant150{{"Constant[150∈0] ➊<br />ᐸ'WyIzNjY0MzE3ZDgwIixmYWxzZSwyLDFd'ᐳ"}}:::plan
    Constant150 --> Lambda70
    Lambda70 --> PgValidateParsedCursor72
    Lambda122{{"Lambda[122∈0] ➊<br />ᐸcalculateLimitAndOffsetSQLᐳ"}}:::plan
    Constant151{{"Constant[151∈0] ➊<br />ᐸ[HIDDEN]ᐳ"}}:::plan
    Constant151 --> Lambda122
    Lambda130{{"Lambda[130∈0] ➊<br />ᐸcalculateLimitAndOffsetSQLᐳ"}}:::plan
    Constant148{{"Constant[148∈0] ➊<br />ᐸ[Object: null prototype] {   cursorLower: null,   cursorUppeᐳ"}}:::plan
    Constant148 --> Lambda130
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    Constant41{{"Constant[41∈0] ➊<br />ᐸfalseᐳ"}}:::plan
    PgSelect21[["PgSelect[21∈1] ➊<br />ᐸcompound_key+1ᐳ"]]:::plan
    Object19 & Connection20 & Lambda122 --> PgSelect21
    List30{{"List[30∈1] ➊<br />ᐸ27,28,29ᐳ"}}:::plan
    PgClassExpression27{{"PgClassExpression[27∈1] ➊<br />ᐸ__compound...__.”extra”ᐳ"}}:::plan
    PgClassExpression28{{"PgClassExpression[28∈1] ➊<br />ᐸ__compound...rson_id_1”ᐳ"}}:::plan
    PgClassExpression29{{"PgClassExpression[29∈1] ➊<br />ᐸ__compound...rson_id_2”ᐳ"}}:::plan
    PgClassExpression27 & PgClassExpression28 & PgClassExpression29 --> List30
    List38{{"List[38∈1] ➊<br />ᐸ35,36,37ᐳ"}}:::plan
    PgClassExpression35{{"PgClassExpression[35∈1] ➊<br />ᐸ__compound...__.”extra”ᐳ"}}:::plan
    PgClassExpression36{{"PgClassExpression[36∈1] ➊<br />ᐸ__compound...rson_id_1”ᐳ"}}:::plan
    PgClassExpression37{{"PgClassExpression[37∈1] ➊<br />ᐸ__compound...rson_id_2”ᐳ"}}:::plan
    PgClassExpression35 & PgClassExpression36 & PgClassExpression37 --> List38
    PgSelect42[["PgSelect[42∈1] ➊<br />ᐸcompound_key(aggregate)ᐳ"]]:::plan
    Object19 & Connection20 & Lambda130 --> PgSelect42
    PgPageInfo22{{"PgPageInfo[22∈1] ➊"}}:::plan
    Connection20 --> PgPageInfo22
    First24{{"First[24∈1] ➊"}}:::plan
    PgSelect21 --> First24
    PgSelectSingle25{{"PgSelectSingle[25∈1] ➊<br />ᐸcompound_keyᐳ"}}:::plan
    First24 --> PgSelectSingle25
    PgCursor26{{"PgCursor[26∈1] ➊"}}:::plan
    List30 --> PgCursor26
    PgSelectSingle25 --> PgClassExpression27
    PgSelectSingle25 --> PgClassExpression28
    PgSelectSingle25 --> PgClassExpression29
    Last32{{"Last[32∈1] ➊"}}:::plan
    PgSelect21 --> Last32
    PgSelectSingle33{{"PgSelectSingle[33∈1] ➊<br />ᐸcompound_keyᐳ"}}:::plan
    Last32 --> PgSelectSingle33
    PgCursor34{{"PgCursor[34∈1] ➊"}}:::plan
    List38 --> PgCursor34
    PgSelectSingle33 --> PgClassExpression35
    PgSelectSingle33 --> PgClassExpression36
    PgSelectSingle33 --> PgClassExpression37
    Access40{{"Access[40∈1] ➊<br />ᐸ21.hasMoreᐳ"}}:::plan
    PgSelect21 --> Access40
    First43{{"First[43∈1] ➊"}}:::plan
    PgSelect42 --> First43
    PgSelectSingle44{{"PgSelectSingle[44∈1] ➊<br />ᐸcompound_keyᐳ"}}:::plan
    First43 --> PgSelectSingle44
    PgClassExpression45{{"PgClassExpression[45∈1] ➊<br />ᐸcount(*)ᐳ"}}:::plan
    PgSelectSingle44 --> PgClassExpression45
    __Item47[/"__Item[47∈2]<br />ᐸ21ᐳ"\]:::itemplan
    PgSelect21 ==> __Item47
    PgSelectSingle48{{"PgSelectSingle[48∈2]<br />ᐸcompound_keyᐳ"}}:::plan
    __Item47 --> PgSelectSingle48
    List53{{"List[53∈3]<br />ᐸ50,51,52ᐳ"}}:::plan
    PgClassExpression50{{"PgClassExpression[50∈3]<br />ᐸ__compound...__.”extra”ᐳ"}}:::plan
    PgClassExpression51{{"PgClassExpression[51∈3]<br />ᐸ__compound...rson_id_1”ᐳ"}}:::plan
    PgClassExpression52{{"PgClassExpression[52∈3]<br />ᐸ__compound...rson_id_2”ᐳ"}}:::plan
    PgClassExpression50 & PgClassExpression51 & PgClassExpression52 --> List53
    PgCursor49{{"PgCursor[49∈3]"}}:::plan
    List53 --> PgCursor49
    PgSelectSingle48 --> PgClassExpression50
    PgSelectSingle48 --> PgClassExpression51
    PgSelectSingle48 --> PgClassExpression52
    PgSelect71[["PgSelect[71∈4] ➊<br />ᐸcompound_key+1ᐳ"]]:::plan
    Access73{{"Access[73∈4] ➊<br />ᐸ70.1ᐳ"}}:::plan
    Access74{{"Access[74∈4] ➊<br />ᐸ70.2ᐳ"}}:::plan
    Access75{{"Access[75∈4] ➊<br />ᐸ70.3ᐳ"}}:::plan
    Object19 & Connection69 & Lambda70 & Access73 & Access74 & Access75 & Lambda122 --> PgSelect71
    List85{{"List[85∈4] ➊<br />ᐸ82,83,84ᐳ"}}:::plan
    PgClassExpression82{{"PgClassExpression[82∈4] ➊<br />ᐸ__compound...__.”extra”ᐳ"}}:::plan
    PgClassExpression83{{"PgClassExpression[83∈4] ➊<br />ᐸ__compound...rson_id_1”ᐳ"}}:::plan
    PgClassExpression84{{"PgClassExpression[84∈4] ➊<br />ᐸ__compound...rson_id_2”ᐳ"}}:::plan
    PgClassExpression82 & PgClassExpression83 & PgClassExpression84 --> List85
    List94{{"List[94∈4] ➊<br />ᐸ91,92,93ᐳ"}}:::plan
    PgClassExpression91{{"PgClassExpression[91∈4] ➊<br />ᐸ__compound...__.”extra”ᐳ"}}:::plan
    PgClassExpression92{{"PgClassExpression[92∈4] ➊<br />ᐸ__compound...rson_id_1”ᐳ"}}:::plan
    PgClassExpression93{{"PgClassExpression[93∈4] ➊<br />ᐸ__compound...rson_id_2”ᐳ"}}:::plan
    PgClassExpression91 & PgClassExpression92 & PgClassExpression93 --> List94
    PgSelect99[["PgSelect[99∈4] ➊<br />ᐸcompound_key(aggregate)ᐳ"]]:::plan
    Object19 & Connection69 & Lambda130 --> PgSelect99
    Lambda70 --> Access73
    Lambda70 --> Access74
    Lambda70 --> Access75
    PgPageInfo76{{"PgPageInfo[76∈4] ➊"}}:::plan
    Connection69 --> PgPageInfo76
    First78{{"First[78∈4] ➊"}}:::plan
    PgSelect71 --> First78
    PgSelectSingle79{{"PgSelectSingle[79∈4] ➊<br />ᐸcompound_keyᐳ"}}:::plan
    First78 --> PgSelectSingle79
    PgCursor80{{"PgCursor[80∈4] ➊"}}:::plan
    List85 --> PgCursor80
    PgSelectSingle79 --> PgClassExpression82
    PgSelectSingle79 --> PgClassExpression83
    PgSelectSingle79 --> PgClassExpression84
    Last87{{"Last[87∈4] ➊"}}:::plan
    PgSelect71 --> Last87
    PgSelectSingle88{{"PgSelectSingle[88∈4] ➊<br />ᐸcompound_keyᐳ"}}:::plan
    Last87 --> PgSelectSingle88
    PgCursor89{{"PgCursor[89∈4] ➊"}}:::plan
    List94 --> PgCursor89
    PgSelectSingle88 --> PgClassExpression91
    PgSelectSingle88 --> PgClassExpression92
    PgSelectSingle88 --> PgClassExpression93
    Access96{{"Access[96∈4] ➊<br />ᐸ71.hasMoreᐳ"}}:::plan
    PgSelect71 --> Access96
    First100{{"First[100∈4] ➊"}}:::plan
    PgSelect99 --> First100
    PgSelectSingle101{{"PgSelectSingle[101∈4] ➊<br />ᐸcompound_keyᐳ"}}:::plan
    First100 --> PgSelectSingle101
    PgClassExpression102{{"PgClassExpression[102∈4] ➊<br />ᐸcount(*)ᐳ"}}:::plan
    PgSelectSingle101 --> PgClassExpression102
    __Item105[/"__Item[105∈5]<br />ᐸ71ᐳ"\]:::itemplan
    PgSelect71 ==> __Item105
    PgSelectSingle106{{"PgSelectSingle[106∈5]<br />ᐸcompound_keyᐳ"}}:::plan
    __Item105 --> PgSelectSingle106
    List111{{"List[111∈6]<br />ᐸ108,109,110ᐳ"}}:::plan
    PgClassExpression108{{"PgClassExpression[108∈6]<br />ᐸ__compound...__.”extra”ᐳ"}}:::plan
    PgClassExpression109{{"PgClassExpression[109∈6]<br />ᐸ__compound...rson_id_1”ᐳ"}}:::plan
    PgClassExpression110{{"PgClassExpression[110∈6]<br />ᐸ__compound...rson_id_2”ᐳ"}}:::plan
    PgClassExpression108 & PgClassExpression109 & PgClassExpression110 --> List111
    PgCursor107{{"PgCursor[107∈6]"}}:::plan
    List111 --> PgCursor107
    PgSelectSingle106 --> PgClassExpression108
    PgSelectSingle106 --> PgClassExpression109
    PgSelectSingle106 --> PgClassExpression110

    %% define steps

    subgraph "Buckets for queries/v4/connections.boolean"
    Bucket0("Bucket 0 (root)<br /><br />1: <br />ᐳ: 17, 18, 41, 117, 148, 150, 151, 19, 20, 70, 122, 130<br />2: PgValidateParsedCursor[72]<br />ᐳ: Connection[69]"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Access17,Access18,Object19,Connection20,Constant41,Connection69,Lambda70,PgValidateParsedCursor72,Constant117,Lambda122,Lambda130,Constant148,Constant150,Constant151 bucket0
    Bucket1("Bucket 1 (nullableBoundary)<br />Deps: 19, 20, 122, 130, 41<br /><br />ROOT Connectionᐸ16ᐳ[20]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect21,PgPageInfo22,First24,PgSelectSingle25,PgCursor26,PgClassExpression27,PgClassExpression28,PgClassExpression29,List30,Last32,PgSelectSingle33,PgCursor34,PgClassExpression35,PgClassExpression36,PgClassExpression37,List38,Access40,PgSelect42,First43,PgSelectSingle44,PgClassExpression45 bucket1
    Bucket2("Bucket 2 (listItem)<br /><br />ROOT __Item{2}ᐸ21ᐳ[47]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item47,PgSelectSingle48 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 48<br /><br />ROOT PgSelectSingle{2}ᐸcompound_keyᐳ[48]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgCursor49,PgClassExpression50,PgClassExpression51,PgClassExpression52,List53 bucket3
    Bucket4("Bucket 4 (nullableBoundary)<br />Deps: 19, 69, 70, 122, 130, 41<br /><br />ROOT Connectionᐸ67ᐳ[69]<br />1: PgSelect[99]<br />ᐳ: 73, 74, 75, 76, 100, 101, 102<br />2: PgSelect[71]<br />ᐳ: 78, 79, 82, 83, 84, 85, 87, 88, 91, 92, 93, 94, 96, 80, 89"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect71,Access73,Access74,Access75,PgPageInfo76,First78,PgSelectSingle79,PgCursor80,PgClassExpression82,PgClassExpression83,PgClassExpression84,List85,Last87,PgSelectSingle88,PgCursor89,PgClassExpression91,PgClassExpression92,PgClassExpression93,List94,Access96,PgSelect99,First100,PgSelectSingle101,PgClassExpression102 bucket4
    Bucket5("Bucket 5 (listItem)<br /><br />ROOT __Item{5}ᐸ71ᐳ[105]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,__Item105,PgSelectSingle106 bucket5
    Bucket6("Bucket 6 (nullableBoundary)<br />Deps: 106<br /><br />ROOT PgSelectSingle{5}ᐸcompound_keyᐳ[106]"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgCursor107,PgClassExpression108,PgClassExpression109,PgClassExpression110,List111 bucket6
    Bucket0 --> Bucket1 & Bucket4
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket4 --> Bucket5
    Bucket5 --> Bucket6
    end
