%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left

    subgraph "Buckets for queries/v4/types-single-node"
    Bucket0("Bucket 0 (root)"):::bucket
    Bucket1("Bucket 1 (polymorphic)<br />__typename: Lambda[8]<br />Deps: 2, 7, 8, 4"):::bucket
    Bucket2("Bucket 2 (polymorphicPartition)<br />|Query<br />Deps: 4<br />ᐳQuery"):::bucket
    Bucket3("Bucket 3 (polymorphicPartition)<br />|Input<br />Deps: 15, 183<br />ᐳInput<br /><br />1: PgSelect[12]<br />2: PgSelectRows[17]<br />ᐳ: First[16], PgSelectSingle[18]"):::bucket
    Bucket4("Bucket 4 (polymorphicPartition)<br />|Patch<br />Deps: 15, 183<br />ᐳPatch<br /><br />1: PgSelect[21]<br />2: PgSelectRows[26]<br />ᐳ: First[25], PgSelectSingle[27]"):::bucket
    Bucket5("Bucket 5 (polymorphicPartition)<br />|Reserved<br />Deps: 15, 183<br />ᐳReserved<br /><br />1: PgSelect[30]<br />2: PgSelectRows[35]<br />ᐳ: First[34], PgSelectSingle[36]"):::bucket
    Bucket6("Bucket 6 (polymorphicPartition)<br />|ReservedPatchRecord<br />Deps: 15, 183<br />ᐳReservedPatchRecord<br /><br />1: PgSelect[39]<br />2: PgSelectRows[44]<br />ᐳ: First[43], PgSelectSingle[45]"):::bucket
    Bucket7("Bucket 7 (polymorphicPartition)<br />|ReservedInputRecord<br />Deps: 15, 183<br />ᐳReservedInputRecord<br /><br />1: PgSelect[48]<br />2: PgSelectRows[53]<br />ᐳ: First[52], PgSelectSingle[54]"):::bucket
    Bucket8("Bucket 8 (polymorphicPartition)<br />|DefaultValue<br />Deps: 15, 183<br />ᐳDefaultValue<br /><br />1: PgSelect[57]<br />2: PgSelectRows[62]<br />ᐳ: First[61], PgSelectSingle[63]"):::bucket
    Bucket9("Bucket 9 (polymorphicPartition)<br />|CompoundKey<br />Deps: 15, 183, 7<br />ᐳCompoundKey<br /><br />1: Access[184]<br />2: PgSelect[67]<br />3: PgSelectRows[72]<br />ᐳ: First[71], PgSelectSingle[73]"):::bucket
    Bucket10("Bucket 10 (polymorphicPartition)<br />|Person<br />Deps: 15, 183<br />ᐳPerson<br /><br />1: PgSelect[76]<br />2: PgSelectRows[81]<br />ᐳ: First[80], PgSelectSingle[82]"):::bucket
    Bucket11("Bucket 11 (polymorphicPartition)<br />|Post<br />Deps: 15, 183<br />ᐳPost<br /><br />1: PgSelect[85]<br />2: PgSelectRows[90]<br />ᐳ: First[89], PgSelectSingle[91]"):::bucket
    Bucket12("Bucket 12 (polymorphicPartition)<br />|Type<br />Deps: 15, 183<br />ᐳType<br /><br />1: PgSelect[94]<br />2: PgSelectRows[99]<br />ᐳ: 98, 100, 182"):::bucket
    Bucket13("Bucket 13 (polymorphicPartition)<br />|PersonSecret<br />Deps: 15, 183<br />ᐳPersonSecret<br /><br />1: PgSelect[103]<br />2: PgSelectRows[108]<br />ᐳ: First[107], PgSelectSingle[109]"):::bucket
    Bucket14("Bucket 14 (polymorphicPartition)<br />|LeftArm<br />Deps: 15, 183<br />ᐳLeftArm<br /><br />1: PgSelect[112]<br />2: PgSelectRows[117]<br />ᐳ: First[116], PgSelectSingle[118]"):::bucket
    Bucket15("Bucket 15 (polymorphicPartition)<br />|MyTable<br />Deps: 15, 183<br />ᐳMyTable<br /><br />1: PgSelect[121]<br />2: PgSelectRows[126]<br />ᐳ: First[125], PgSelectSingle[127]"):::bucket
    Bucket16("Bucket 16 (polymorphicPartition)<br />|ViewTable<br />Deps: 15, 183<br />ᐳViewTable<br /><br />1: PgSelect[130]<br />2: PgSelectRows[135]<br />ᐳ: First[134], PgSelectSingle[136]"):::bucket
    Bucket17("Bucket 17 (polymorphicPartition)<br />|SimilarTable1<br />Deps: 15, 183<br />ᐳSimilarTable1<br /><br />1: PgSelect[139]<br />2: PgSelectRows[144]<br />ᐳ: First[143], PgSelectSingle[145]"):::bucket
    Bucket18("Bucket 18 (polymorphicPartition)<br />|SimilarTable2<br />Deps: 15, 183<br />ᐳSimilarTable2<br /><br />1: PgSelect[148]<br />2: PgSelectRows[153]<br />ᐳ: First[152], PgSelectSingle[154]"):::bucket
    Bucket19("Bucket 19 (polymorphicPartition)<br />|NullTestRecord<br />Deps: 15, 183<br />ᐳNullTestRecord<br /><br />1: PgSelect[157]<br />2: PgSelectRows[162]<br />ᐳ: First[161], PgSelectSingle[163]"):::bucket
    Bucket20("Bucket 20 (polymorphicPartition)<br />|Issue756<br />Deps: 15, 183<br />ᐳIssue756<br /><br />1: PgSelect[166]<br />2: PgSelectRows[171]<br />ᐳ: First[170], PgSelectSingle[172]"):::bucket
    Bucket21("Bucket 21 (polymorphicPartition)<br />|List<br />Deps: 15, 183<br />ᐳList<br /><br />1: PgSelect[175]<br />2: PgSelectRows[180]<br />ᐳ: First[179], PgSelectSingle[181]"):::bucket
    end
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2 & Bucket3 & Bucket4 & Bucket5 & Bucket6 & Bucket7 & Bucket8 & Bucket9 & Bucket10 & Bucket11 & Bucket12 & Bucket13 & Bucket14 & Bucket15 & Bucket16 & Bucket17 & Bucket18 & Bucket19 & Bucket20 & Bucket21

    %% plan dependencies
    Lambda7{{"Lambda[7∈0] ➊<br />ᐸdecodeNodeIdWithCodecsᐳ<br />Dependents: 3<br />More deps:<br />- Constantᐸ'WyJ0eXBlcyIsMTFd'ᐳ[185]"}}:::plan
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    Object15{{"Object[15∈1] ➊^<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access13{{"Access[13∈1] ➊<br />ᐸ2.pgSettingsᐳ<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList"}}:::plan
    Access14{{"Access[14∈1] ➊<br />ᐸ2.withPgClientᐳ<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList"}}:::plan
    Access13 & Access14 --> Object15
    __Value2 --> Access13
    __Value2 --> Access14
    Access183{{"Access[183∈1] ➊<br />ᐸ7.base64JSON.1ᐳ<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList<br />More deps:<br />- Lambda[7]"}}:::plan
    PgSelect12[["PgSelect[12∈3] ➊<br />ᐸinputsᐳ<br />ᐳInput"]]:::plan
    Object15 & Access183 --> PgSelect12
    First16{{"First[16∈3] ➊^"}}:::plan
    PgSelectRows17[["PgSelectRows[17∈3] ➊^"]]:::plan
    PgSelectRows17 --> First16
    PgSelect12 --> PgSelectRows17
    PgSelectSingle18{{"PgSelectSingle[18∈3] ➊^<br />ᐸinputsᐳ"}}:::plan
    First16 --> PgSelectSingle18
    PgSelect21[["PgSelect[21∈4] ➊<br />ᐸpatchsᐳ<br />ᐳPatch"]]:::plan
    Object15 & Access183 --> PgSelect21
    First25{{"First[25∈4] ➊^"}}:::plan
    PgSelectRows26[["PgSelectRows[26∈4] ➊^"]]:::plan
    PgSelectRows26 --> First25
    PgSelect21 --> PgSelectRows26
    PgSelectSingle27{{"PgSelectSingle[27∈4] ➊^<br />ᐸpatchsᐳ"}}:::plan
    First25 --> PgSelectSingle27
    PgSelect30[["PgSelect[30∈5] ➊<br />ᐸreservedᐳ<br />ᐳReserved"]]:::plan
    Object15 & Access183 --> PgSelect30
    First34{{"First[34∈5] ➊^"}}:::plan
    PgSelectRows35[["PgSelectRows[35∈5] ➊^"]]:::plan
    PgSelectRows35 --> First34
    PgSelect30 --> PgSelectRows35
    PgSelectSingle36{{"PgSelectSingle[36∈5] ➊^<br />ᐸreservedᐳ"}}:::plan
    First34 --> PgSelectSingle36
    PgSelect39[["PgSelect[39∈6] ➊<br />ᐸreservedPatchsᐳ<br />ᐳReservedPatchRecord"]]:::plan
    Object15 & Access183 --> PgSelect39
    First43{{"First[43∈6] ➊^"}}:::plan
    PgSelectRows44[["PgSelectRows[44∈6] ➊^"]]:::plan
    PgSelectRows44 --> First43
    PgSelect39 --> PgSelectRows44
    PgSelectSingle45{{"PgSelectSingle[45∈6] ➊^<br />ᐸreservedPatchsᐳ"}}:::plan
    First43 --> PgSelectSingle45
    PgSelect48[["PgSelect[48∈7] ➊<br />ᐸreserved_inputᐳ<br />ᐳReservedInputRecord"]]:::plan
    Object15 & Access183 --> PgSelect48
    First52{{"First[52∈7] ➊^"}}:::plan
    PgSelectRows53[["PgSelectRows[53∈7] ➊^"]]:::plan
    PgSelectRows53 --> First52
    PgSelect48 --> PgSelectRows53
    PgSelectSingle54{{"PgSelectSingle[54∈7] ➊^<br />ᐸreserved_inputᐳ"}}:::plan
    First52 --> PgSelectSingle54
    PgSelect57[["PgSelect[57∈8] ➊<br />ᐸdefault_valueᐳ<br />ᐳDefaultValue"]]:::plan
    Object15 & Access183 --> PgSelect57
    First61{{"First[61∈8] ➊^"}}:::plan
    PgSelectRows62[["PgSelectRows[62∈8] ➊^"]]:::plan
    PgSelectRows62 --> First61
    PgSelect57 --> PgSelectRows62
    PgSelectSingle63{{"PgSelectSingle[63∈8] ➊^<br />ᐸdefault_valueᐳ"}}:::plan
    First61 --> PgSelectSingle63
    PgSelect67[["PgSelect[67∈9] ➊^<br />ᐸcompound_keyᐳ"]]:::plan
    Access184{{"Access[184∈9] ➊<br />ᐸ7.base64JSON.2ᐳ<br />ᐳCompoundKey<br />More deps:<br />- Lambda[7]"}}:::plan
    Object15 & Access183 & Access184 --> PgSelect67
    First71{{"First[71∈9] ➊^"}}:::plan
    PgSelectRows72[["PgSelectRows[72∈9] ➊^"]]:::plan
    PgSelectRows72 --> First71
    PgSelect67 --> PgSelectRows72
    PgSelectSingle73{{"PgSelectSingle[73∈9] ➊^<br />ᐸcompound_keyᐳ"}}:::plan
    First71 --> PgSelectSingle73
    PgSelect76[["PgSelect[76∈10] ➊<br />ᐸpersonᐳ<br />ᐳPerson"]]:::plan
    Object15 & Access183 --> PgSelect76
    First80{{"First[80∈10] ➊^"}}:::plan
    PgSelectRows81[["PgSelectRows[81∈10] ➊^"]]:::plan
    PgSelectRows81 --> First80
    PgSelect76 --> PgSelectRows81
    PgSelectSingle82{{"PgSelectSingle[82∈10] ➊^<br />ᐸpersonᐳ"}}:::plan
    First80 --> PgSelectSingle82
    PgSelect85[["PgSelect[85∈11] ➊<br />ᐸpostᐳ<br />ᐳPost"]]:::plan
    Object15 & Access183 --> PgSelect85
    First89{{"First[89∈11] ➊^"}}:::plan
    PgSelectRows90[["PgSelectRows[90∈11] ➊^"]]:::plan
    PgSelectRows90 --> First89
    PgSelect85 --> PgSelectRows90
    PgSelectSingle91{{"PgSelectSingle[91∈11] ➊^<br />ᐸpostᐳ"}}:::plan
    First89 --> PgSelectSingle91
    PgSelect94[["PgSelect[94∈12] ➊<br />ᐸtypesᐳ<br />ᐳType"]]:::plan
    Object15 & Access183 --> PgSelect94
    First98{{"First[98∈12] ➊^"}}:::plan
    PgSelectRows99[["PgSelectRows[99∈12] ➊^"]]:::plan
    PgSelectRows99 --> First98
    PgSelect94 --> PgSelectRows99
    PgSelectSingle100{{"PgSelectSingle[100∈12] ➊^<br />ᐸtypesᐳ"}}:::plan
    First98 --> PgSelectSingle100
    PgClassExpression182{{"PgClassExpression[182∈12] ➊^<br />ᐸ__types__.”id”ᐳ"}}:::plan
    PgSelectSingle100 --> PgClassExpression182
    PgSelect103[["PgSelect[103∈13] ➊<br />ᐸperson_secretᐳ<br />ᐳPersonSecret"]]:::plan
    Object15 & Access183 --> PgSelect103
    First107{{"First[107∈13] ➊^"}}:::plan
    PgSelectRows108[["PgSelectRows[108∈13] ➊^"]]:::plan
    PgSelectRows108 --> First107
    PgSelect103 --> PgSelectRows108
    PgSelectSingle109{{"PgSelectSingle[109∈13] ➊^<br />ᐸperson_secretᐳ"}}:::plan
    First107 --> PgSelectSingle109
    PgSelect112[["PgSelect[112∈14] ➊<br />ᐸleft_armᐳ<br />ᐳLeftArm"]]:::plan
    Object15 & Access183 --> PgSelect112
    First116{{"First[116∈14] ➊^"}}:::plan
    PgSelectRows117[["PgSelectRows[117∈14] ➊^"]]:::plan
    PgSelectRows117 --> First116
    PgSelect112 --> PgSelectRows117
    PgSelectSingle118{{"PgSelectSingle[118∈14] ➊^<br />ᐸleft_armᐳ"}}:::plan
    First116 --> PgSelectSingle118
    PgSelect121[["PgSelect[121∈15] ➊<br />ᐸmy_tableᐳ<br />ᐳMyTable"]]:::plan
    Object15 & Access183 --> PgSelect121
    First125{{"First[125∈15] ➊^"}}:::plan
    PgSelectRows126[["PgSelectRows[126∈15] ➊^"]]:::plan
    PgSelectRows126 --> First125
    PgSelect121 --> PgSelectRows126
    PgSelectSingle127{{"PgSelectSingle[127∈15] ➊^<br />ᐸmy_tableᐳ"}}:::plan
    First125 --> PgSelectSingle127
    PgSelect130[["PgSelect[130∈16] ➊<br />ᐸview_tableᐳ<br />ᐳViewTable"]]:::plan
    Object15 & Access183 --> PgSelect130
    First134{{"First[134∈16] ➊^"}}:::plan
    PgSelectRows135[["PgSelectRows[135∈16] ➊^"]]:::plan
    PgSelectRows135 --> First134
    PgSelect130 --> PgSelectRows135
    PgSelectSingle136{{"PgSelectSingle[136∈16] ➊^<br />ᐸview_tableᐳ"}}:::plan
    First134 --> PgSelectSingle136
    PgSelect139[["PgSelect[139∈17] ➊<br />ᐸsimilar_table_1ᐳ<br />ᐳSimilarTable1"]]:::plan
    Object15 & Access183 --> PgSelect139
    First143{{"First[143∈17] ➊^"}}:::plan
    PgSelectRows144[["PgSelectRows[144∈17] ➊^"]]:::plan
    PgSelectRows144 --> First143
    PgSelect139 --> PgSelectRows144
    PgSelectSingle145{{"PgSelectSingle[145∈17] ➊^<br />ᐸsimilar_table_1ᐳ"}}:::plan
    First143 --> PgSelectSingle145
    PgSelect148[["PgSelect[148∈18] ➊<br />ᐸsimilar_table_2ᐳ<br />ᐳSimilarTable2"]]:::plan
    Object15 & Access183 --> PgSelect148
    First152{{"First[152∈18] ➊^"}}:::plan
    PgSelectRows153[["PgSelectRows[153∈18] ➊^"]]:::plan
    PgSelectRows153 --> First152
    PgSelect148 --> PgSelectRows153
    PgSelectSingle154{{"PgSelectSingle[154∈18] ➊^<br />ᐸsimilar_table_2ᐳ"}}:::plan
    First152 --> PgSelectSingle154
    PgSelect157[["PgSelect[157∈19] ➊<br />ᐸnull_test_recordᐳ<br />ᐳNullTestRecord"]]:::plan
    Object15 & Access183 --> PgSelect157
    First161{{"First[161∈19] ➊^"}}:::plan
    PgSelectRows162[["PgSelectRows[162∈19] ➊^"]]:::plan
    PgSelectRows162 --> First161
    PgSelect157 --> PgSelectRows162
    PgSelectSingle163{{"PgSelectSingle[163∈19] ➊^<br />ᐸnull_test_recordᐳ"}}:::plan
    First161 --> PgSelectSingle163
    PgSelect166[["PgSelect[166∈20] ➊<br />ᐸissue756ᐳ<br />ᐳIssue756"]]:::plan
    Object15 & Access183 --> PgSelect166
    First170{{"First[170∈20] ➊^"}}:::plan
    PgSelectRows171[["PgSelectRows[171∈20] ➊^"]]:::plan
    PgSelectRows171 --> First170
    PgSelect166 --> PgSelectRows171
    PgSelectSingle172{{"PgSelectSingle[172∈20] ➊^<br />ᐸissue756ᐳ"}}:::plan
    First170 --> PgSelectSingle172
    PgSelect175[["PgSelect[175∈21] ➊<br />ᐸlistsᐳ<br />ᐳList"]]:::plan
    Object15 & Access183 --> PgSelect175
    First179{{"First[179∈21] ➊^"}}:::plan
    PgSelectRows180[["PgSelectRows[180∈21] ➊^"]]:::plan
    PgSelectRows180 --> First179
    PgSelect175 --> PgSelectRows180
    PgSelectSingle181{{"PgSelectSingle[181∈21] ➊^<br />ᐸlistsᐳ"}}:::plan
    First179 --> PgSelectSingle181

    %% define steps
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,Lambda7 bucket0
    classDef bucket1 stroke:#00bfff
    class Bucket1,Access13,Access14,Object15,Access183 bucket1
    classDef bucket2 stroke:#7f007f
    class Bucket2 bucket2
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgSelect12,First16,PgSelectRows17,PgSelectSingle18 bucket3
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect21,First25,PgSelectRows26,PgSelectSingle27 bucket4
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgSelect30,First34,PgSelectRows35,PgSelectSingle36 bucket5
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgSelect39,First43,PgSelectRows44,PgSelectSingle45 bucket6
    classDef bucket7 stroke:#808000
    class Bucket7,PgSelect48,First52,PgSelectRows53,PgSelectSingle54 bucket7
    classDef bucket8 stroke:#dda0dd
    class Bucket8,PgSelect57,First61,PgSelectRows62,PgSelectSingle63 bucket8
    classDef bucket9 stroke:#ff0000
    class Bucket9,PgSelect67,First71,PgSelectRows72,PgSelectSingle73,Access184 bucket9
    classDef bucket10 stroke:#ffff00
    class Bucket10,PgSelect76,First80,PgSelectRows81,PgSelectSingle82 bucket10
    classDef bucket11 stroke:#00ffff
    class Bucket11,PgSelect85,First89,PgSelectRows90,PgSelectSingle91 bucket11
    classDef bucket12 stroke:#4169e1
    class Bucket12,PgSelect94,First98,PgSelectRows99,PgSelectSingle100,PgClassExpression182 bucket12
    classDef bucket13 stroke:#3cb371
    class Bucket13,PgSelect103,First107,PgSelectRows108,PgSelectSingle109 bucket13
    classDef bucket14 stroke:#a52a2a
    class Bucket14,PgSelect112,First116,PgSelectRows117,PgSelectSingle118 bucket14
    classDef bucket15 stroke:#ff00ff
    class Bucket15,PgSelect121,First125,PgSelectRows126,PgSelectSingle127 bucket15
    classDef bucket16 stroke:#f5deb3
    class Bucket16,PgSelect130,First134,PgSelectRows135,PgSelectSingle136 bucket16
    classDef bucket17 stroke:#696969
    class Bucket17,PgSelect139,First143,PgSelectRows144,PgSelectSingle145 bucket17
    classDef bucket18 stroke:#00bfff
    class Bucket18,PgSelect148,First152,PgSelectRows153,PgSelectSingle154 bucket18
    classDef bucket19 stroke:#7f007f
    class Bucket19,PgSelect157,First161,PgSelectRows162,PgSelectSingle163 bucket19
    classDef bucket20 stroke:#ffa500
    class Bucket20,PgSelect166,First170,PgSelectRows171,PgSelectSingle172 bucket20
    classDef bucket21 stroke:#0000ff
    class Bucket21,PgSelect175,First179,PgSelectRows180,PgSelectSingle181 bucket21

