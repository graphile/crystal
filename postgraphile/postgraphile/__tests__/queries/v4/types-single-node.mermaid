%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    Node7{{"Node[7∈0] ➊"}}:::plan
    Lambda8{{"Lambda[8∈0] ➊<br />ᐸdecodeNodeIdWithCodecsᐳ"}}:::plan
    Lambda8 --> Node7
    Constant114{{"Constant[114∈0] ➊<br />ᐸ'WyJ0eXBlcyIsMTFd'ᐳ"}}:::plan
    Constant114 --> Lambda8
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    PgSelect47[["PgSelect[47∈1] ➊<br />ᐸcompound_keyᐳ<br />ᐳCompoundKey"]]:::plan
    Object16{{"Object[16∈1] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList"}}:::plan
    Access112{{"Access[112∈1] ➊<br />ᐸ8.base64JSON.1ᐳ<br />ᐳInput"}}:::plan
    Access113{{"Access[113∈1] ➊<br />ᐸ8.base64JSON.2ᐳ<br />ᐳCompoundKey"}}:::plan
    Object16 -->|rejectNull| PgSelect47
    Access112 -->|rejectNull| PgSelect47
    Access113 --> PgSelect47
    PgSelect13[["PgSelect[13∈1] ➊<br />ᐸinputsᐳ<br />ᐳInput"]]:::plan
    Object16 -->|rejectNull| PgSelect13
    Access112 --> PgSelect13
    Access14{{"Access[14∈1] ➊<br />ᐸ2.pgSettingsᐳ<br />ᐳInput"}}:::plan
    Access15{{"Access[15∈1] ➊<br />ᐸ2.withPgClientᐳ<br />ᐳInput"}}:::plan
    Access14 & Access15 --> Object16
    PgSelect20[["PgSelect[20∈1] ➊<br />ᐸpatchsᐳ<br />ᐳPatch"]]:::plan
    Object16 -->|rejectNull| PgSelect20
    Access112 --> PgSelect20
    PgSelect25[["PgSelect[25∈1] ➊<br />ᐸreservedᐳ<br />ᐳReserved"]]:::plan
    Object16 -->|rejectNull| PgSelect25
    Access112 --> PgSelect25
    PgSelect30[["PgSelect[30∈1] ➊<br />ᐸreservedPatchsᐳ<br />ᐳReservedPatchRecord"]]:::plan
    Object16 -->|rejectNull| PgSelect30
    Access112 --> PgSelect30
    PgSelect35[["PgSelect[35∈1] ➊<br />ᐸreserved_inputᐳ<br />ᐳReservedInputRecord"]]:::plan
    Object16 -->|rejectNull| PgSelect35
    Access112 --> PgSelect35
    PgSelect40[["PgSelect[40∈1] ➊<br />ᐸdefault_valueᐳ<br />ᐳDefaultValue"]]:::plan
    Object16 -->|rejectNull| PgSelect40
    Access112 --> PgSelect40
    PgSelect52[["PgSelect[52∈1] ➊<br />ᐸpersonᐳ<br />ᐳPerson"]]:::plan
    Object16 -->|rejectNull| PgSelect52
    Access112 --> PgSelect52
    PgSelect57[["PgSelect[57∈1] ➊<br />ᐸpostᐳ<br />ᐳPost"]]:::plan
    Object16 -->|rejectNull| PgSelect57
    Access112 --> PgSelect57
    PgSelect62[["PgSelect[62∈1] ➊<br />ᐸtypesᐳ<br />ᐳType"]]:::plan
    Object16 -->|rejectNull| PgSelect62
    Access112 --> PgSelect62
    PgSelect68[["PgSelect[68∈1] ➊<br />ᐸperson_secretᐳ<br />ᐳPersonSecret"]]:::plan
    Object16 -->|rejectNull| PgSelect68
    Access112 --> PgSelect68
    PgSelect73[["PgSelect[73∈1] ➊<br />ᐸleft_armᐳ<br />ᐳLeftArm"]]:::plan
    Object16 -->|rejectNull| PgSelect73
    Access112 --> PgSelect73
    PgSelect78[["PgSelect[78∈1] ➊<br />ᐸmy_tableᐳ<br />ᐳMyTable"]]:::plan
    Object16 -->|rejectNull| PgSelect78
    Access112 --> PgSelect78
    PgSelect83[["PgSelect[83∈1] ➊<br />ᐸview_tableᐳ<br />ᐳViewTable"]]:::plan
    Object16 -->|rejectNull| PgSelect83
    Access112 --> PgSelect83
    PgSelect88[["PgSelect[88∈1] ➊<br />ᐸsimilar_table_1ᐳ<br />ᐳSimilarTable1"]]:::plan
    Object16 -->|rejectNull| PgSelect88
    Access112 --> PgSelect88
    PgSelect93[["PgSelect[93∈1] ➊<br />ᐸsimilar_table_2ᐳ<br />ᐳSimilarTable2"]]:::plan
    Object16 -->|rejectNull| PgSelect93
    Access112 --> PgSelect93
    PgSelect98[["PgSelect[98∈1] ➊<br />ᐸnull_test_recordᐳ<br />ᐳNullTestRecord"]]:::plan
    Object16 -->|rejectNull| PgSelect98
    Access112 --> PgSelect98
    PgSelect103[["PgSelect[103∈1] ➊<br />ᐸissue756ᐳ<br />ᐳIssue756"]]:::plan
    Object16 -->|rejectNull| PgSelect103
    Access112 --> PgSelect103
    PgSelect108[["PgSelect[108∈1] ➊<br />ᐸlistsᐳ<br />ᐳList"]]:::plan
    Object16 -->|rejectNull| PgSelect108
    Access112 --> PgSelect108
    __Value2 --> Access14
    __Value2 --> Access15
    First17{{"First[17∈1] ➊"}}:::plan
    PgSelect13 --> First17
    PgSelectSingle18{{"PgSelectSingle[18∈1] ➊<br />ᐸinputsᐳ"}}:::plan
    First17 --> PgSelectSingle18
    First22{{"First[22∈1] ➊"}}:::plan
    PgSelect20 --> First22
    PgSelectSingle23{{"PgSelectSingle[23∈1] ➊<br />ᐸpatchsᐳ"}}:::plan
    First22 --> PgSelectSingle23
    First27{{"First[27∈1] ➊"}}:::plan
    PgSelect25 --> First27
    PgSelectSingle28{{"PgSelectSingle[28∈1] ➊<br />ᐸreservedᐳ"}}:::plan
    First27 --> PgSelectSingle28
    First32{{"First[32∈1] ➊"}}:::plan
    PgSelect30 --> First32
    PgSelectSingle33{{"PgSelectSingle[33∈1] ➊<br />ᐸreservedPatchsᐳ"}}:::plan
    First32 --> PgSelectSingle33
    First37{{"First[37∈1] ➊"}}:::plan
    PgSelect35 --> First37
    PgSelectSingle38{{"PgSelectSingle[38∈1] ➊<br />ᐸreserved_inputᐳ"}}:::plan
    First37 --> PgSelectSingle38
    First42{{"First[42∈1] ➊"}}:::plan
    PgSelect40 --> First42
    PgSelectSingle43{{"PgSelectSingle[43∈1] ➊<br />ᐸdefault_valueᐳ"}}:::plan
    First42 --> PgSelectSingle43
    First49{{"First[49∈1] ➊"}}:::plan
    PgSelect47 --> First49
    PgSelectSingle50{{"PgSelectSingle[50∈1] ➊<br />ᐸcompound_keyᐳ"}}:::plan
    First49 --> PgSelectSingle50
    First54{{"First[54∈1] ➊"}}:::plan
    PgSelect52 --> First54
    PgSelectSingle55{{"PgSelectSingle[55∈1] ➊<br />ᐸpersonᐳ"}}:::plan
    First54 --> PgSelectSingle55
    First59{{"First[59∈1] ➊"}}:::plan
    PgSelect57 --> First59
    PgSelectSingle60{{"PgSelectSingle[60∈1] ➊<br />ᐸpostᐳ"}}:::plan
    First59 --> PgSelectSingle60
    First64{{"First[64∈1] ➊"}}:::plan
    PgSelect62 --> First64
    PgSelectSingle65{{"PgSelectSingle[65∈1] ➊<br />ᐸtypesᐳ"}}:::plan
    First64 --> PgSelectSingle65
    PgClassExpression66{{"PgClassExpression[66∈1] ➊<br />ᐸ__types__.”id”ᐳ"}}:::plan
    PgSelectSingle65 --> PgClassExpression66
    First70{{"First[70∈1] ➊"}}:::plan
    PgSelect68 --> First70
    PgSelectSingle71{{"PgSelectSingle[71∈1] ➊<br />ᐸperson_secretᐳ"}}:::plan
    First70 --> PgSelectSingle71
    First75{{"First[75∈1] ➊"}}:::plan
    PgSelect73 --> First75
    PgSelectSingle76{{"PgSelectSingle[76∈1] ➊<br />ᐸleft_armᐳ"}}:::plan
    First75 --> PgSelectSingle76
    First80{{"First[80∈1] ➊"}}:::plan
    PgSelect78 --> First80
    PgSelectSingle81{{"PgSelectSingle[81∈1] ➊<br />ᐸmy_tableᐳ"}}:::plan
    First80 --> PgSelectSingle81
    First85{{"First[85∈1] ➊"}}:::plan
    PgSelect83 --> First85
    PgSelectSingle86{{"PgSelectSingle[86∈1] ➊<br />ᐸview_tableᐳ"}}:::plan
    First85 --> PgSelectSingle86
    First90{{"First[90∈1] ➊"}}:::plan
    PgSelect88 --> First90
    PgSelectSingle91{{"PgSelectSingle[91∈1] ➊<br />ᐸsimilar_table_1ᐳ"}}:::plan
    First90 --> PgSelectSingle91
    First95{{"First[95∈1] ➊"}}:::plan
    PgSelect93 --> First95
    PgSelectSingle96{{"PgSelectSingle[96∈1] ➊<br />ᐸsimilar_table_2ᐳ"}}:::plan
    First95 --> PgSelectSingle96
    First100{{"First[100∈1] ➊"}}:::plan
    PgSelect98 --> First100
    PgSelectSingle101{{"PgSelectSingle[101∈1] ➊<br />ᐸnull_test_recordᐳ"}}:::plan
    First100 --> PgSelectSingle101
    First105{{"First[105∈1] ➊"}}:::plan
    PgSelect103 --> First105
    PgSelectSingle106{{"PgSelectSingle[106∈1] ➊<br />ᐸissue756ᐳ"}}:::plan
    First105 --> PgSelectSingle106
    First110{{"First[110∈1] ➊"}}:::plan
    PgSelect108 --> First110
    PgSelectSingle111{{"PgSelectSingle[111∈1] ➊<br />ᐸlistsᐳ"}}:::plan
    First110 --> PgSelectSingle111
    Lambda8 --> Access112
    Lambda8 --> Access113

    %% define steps

    subgraph "Buckets for queries/v4/types-single-node"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Node7,Lambda8,Constant114 bucket0
    Bucket1("Bucket 1 (polymorphic)<br />Query,Input,Patch,Reserved,ReservedPatchRecord,ReservedInputRecord,DefaultValue,CompoundKey,Person,Post,Type,PersonSecret,LeftArm,MyTable,ViewTable,SimilarTable1,SimilarTable2,NullTestRecord,Issue756,List<br />Deps: 2, 8, 7, 4<br />ᐳQuery<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList<br /><br />1: <br />ᐳ: 14, 15, 112, 113, 16<br />2: 13, 20, 25, 30, 35, 40, 47, 52, 57, 62, 68, 73, 78, 83, 88, 93, 98, 103, 108<br />ᐳ: 17, 18, 22, 23, 27, 28, 32, 33, 37, 38, 42, 43, 49, 50, 54, 55, 59, 60, 64, 65, 66, 70, 71, 75, 76, 80, 81, 85, 86, 90, 91, 95, 96, 100, 101, 105, 106, 110, 111"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect13,Access14,Access15,Object16,First17,PgSelectSingle18,PgSelect20,First22,PgSelectSingle23,PgSelect25,First27,PgSelectSingle28,PgSelect30,First32,PgSelectSingle33,PgSelect35,First37,PgSelectSingle38,PgSelect40,First42,PgSelectSingle43,PgSelect47,First49,PgSelectSingle50,PgSelect52,First54,PgSelectSingle55,PgSelect57,First59,PgSelectSingle60,PgSelect62,First64,PgSelectSingle65,PgClassExpression66,PgSelect68,First70,PgSelectSingle71,PgSelect73,First75,PgSelectSingle76,PgSelect78,First80,PgSelectSingle81,PgSelect83,First85,PgSelectSingle86,PgSelect88,First90,PgSelectSingle91,PgSelect93,First95,PgSelectSingle96,PgSelect98,First100,PgSelectSingle101,PgSelect103,First105,PgSelectSingle106,PgSelect108,First110,PgSelectSingle111,Access112,Access113 bucket1
    Bucket0 --> Bucket1
    end
