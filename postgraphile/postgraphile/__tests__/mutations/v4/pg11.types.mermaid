%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left

    subgraph "Buckets for mutations/v4/pg11.types"
    Bucket0("Bucket 0 (root)"):::bucket
    Bucket1("Bucket 1 (mutationField)<br />Deps: 18, 79, 19<br /><br />1: PgUpdateSingle[15]<br />2: <br />ᐳ: Object[20]"):::bucket
    Bucket2("Bucket 2 (mutationField)<br />Deps: 33, 2<br /><br />1: Access[30]<br />2: Access[31]<br />3: Object[32]<br />4: PgInsertSingle[29]<br />5: <br />ᐳ: Object[34]"):::bucket
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 20, 15, 18<br /><br />ROOT Object{1}ᐸ{result}ᐳ[20]"):::bucket
    Bucket4("Bucket 4 (nullableBoundary)<br />Deps: 34, 29, 32<br /><br />ROOT Object{2}ᐸ{result}ᐳ[34]"):::bucket
    Bucket5("Bucket 5 (nullableBoundary)<br />Deps: 15, 18<br /><br />ROOT PgUpdateSingle{1}ᐸtypes(id;)ᐳ[15]<br />1: <br />ᐳ: 36, 35, 39, 41, 43, 45, 50<br />2: PgSelect[46]<br />3: PgSelectRows[52]<br />ᐳ: First[51], PgSelectSingle[53]"):::bucket
    Bucket6("Bucket 6 (nullableBoundary)<br />Deps: 29, 32<br /><br />ROOT PgInsertSingle{2}ᐸtypes()ᐳ[29]<br />1: <br />ᐳ: 38, 37, 40, 42, 44, 54, 59<br />2: PgSelect[55]<br />3: PgSelectRows[61]<br />ᐳ: First[60], PgSelectSingle[62]"):::bucket
    Bucket7("Bucket 7 (nullableBoundary)<br />Deps: 53<br /><br />ROOT PgSelectSingle{5}ᐸfrmcdc_domainConstrainedCompoundTypeᐳ[53]"):::bucket
    Bucket8("Bucket 8 (nullableBoundary)<br />Deps: 62<br /><br />ROOT PgSelectSingle{6}ᐸfrmcdc_domainConstrainedCompoundTypeᐳ[62]"):::bucket
    Bucket9("Bucket 9 (listItem)<br /><br />ROOT __Item{9}ᐸ43ᐳ[63]"):::bucket
    Bucket10("Bucket 10 (listItem)<br /><br />ROOT __Item{10}ᐸ44ᐳ[64]"):::bucket
    end
    Bucket0 --> Bucket1 & Bucket2
    Bucket1 --> Bucket3
    Bucket2 --> Bucket4
    Bucket3 --> Bucket5
    Bucket4 --> Bucket6
    Bucket5 --> Bucket7 & Bucket9
    Bucket6 --> Bucket8 & Bucket10

    %% plan dependencies
    __InputObject9{{"__InputObject[9∈0] ➊"}}:::plan
    Constant80{{"Constant[80∈0] ➊<br />ᐸ'postgraphile_test_authenticator'ᐳ"}}:::plan
    Constant81{{"Constant[81∈0] ➊<br />ᐸ'pg11'ᐳ"}}:::plan
    Constant12{{"Constant[12∈0] ➊<br />ᐸ[ '2098288669218571759', '2098288669218571760', '20982886692ᐳ"}}:::plan
    __InputObject13{{"__InputObject[13∈0] ➊"}}:::plan
    Constant80 & Constant81 & Constant12 & __InputObject13 --> __InputObject9
    __InputObject23{{"__InputObject[23∈0] ➊"}}:::plan
    Constant83{{"Constant[83∈0] ➊<br />ᐸ'postgraphile_test_visitor'ᐳ"}}:::plan
    Constant84{{"Constant[84∈0] ➊<br />ᐸ'c'ᐳ"}}:::plan
    Constant26{{"Constant[26∈0] ➊<br />ᐸ[ '2098288669218571759', '2098288669218571760', '20982886692ᐳ"}}:::plan
    __InputObject27{{"__InputObject[27∈0] ➊"}}:::plan
    Constant83 & Constant84 & Constant26 & __InputObject27 --> __InputObject23
    __InputObject6{{"__InputObject[6∈0] ➊"}}:::plan
    Constant79{{"Constant[79∈0] ➊<br />ᐸ12ᐳ"}}:::plan
    Constant79 & __InputObject9 --> __InputObject6
    Constant82{{"Constant[82∈0] ➊<br />ᐸ1ᐳ"}}:::plan
    Constant82 --> __InputObject13
    Object18{{"Object[18∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access16{{"Access[16∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access17{{"Access[17∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access16 & Access17 --> Object18
    __InputObject21{{"__InputObject[21∈0] ➊"}}:::plan
    __InputObject23 --> __InputObject21
    Constant82 --> __InputObject27
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access16
    __Value2 --> Access17
    ApplyInput19{{"ApplyInput[19∈0] ➊"}}:::plan
    __InputObject6 --> ApplyInput19
    ApplyInput33{{"ApplyInput[33∈0] ➊"}}:::plan
    __InputObject21 --> ApplyInput33
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    PgUpdateSingle15[["PgUpdateSingle[15∈1] ➊<br />ᐸtypes(id;)ᐳ"]]:::sideeffectplan
    Object18 & Constant79 & ApplyInput19 --> PgUpdateSingle15
    Object20{{"Object[20∈1] ➊<br />ᐸ{result}ᐳ"}}:::plan
    PgUpdateSingle15 --> Object20
    PgInsertSingle29[["PgInsertSingle[29∈2] ➊<br />ᐸtypes()ᐳ"]]:::sideeffectplan
    Object32{{"Object[32∈2] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Object32 & ApplyInput33 --> PgInsertSingle29
    Access30{{"Access[30∈2] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access31{{"Access[31∈2] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access30 & Access31 --> Object32
    __Value2 --> Access30
    __Value2 --> Access31
    Object34{{"Object[34∈2] ➊<br />ᐸ{result}ᐳ"}}:::plan
    PgInsertSingle29 --> Object34
    PgSelect46[["PgSelect[46∈5] ➊<br />ᐸfrmcdc_domainConstrainedCompoundTypeᐳ"]]:::plan
    PgFromExpression50{{"PgFromExpression[50∈5] ➊"}}:::plan
    Object18 & PgFromExpression50 --> PgSelect46
    PgClassExpression35{{"PgClassExpression[35∈5] ➊<br />ᐸ__types__.”id”ᐳ"}}:::plan
    Access36{{"Access[36∈5] ➊<br />ᐸ15.tᐳ"}}:::plan
    Access36 --> PgClassExpression35
    PgUpdateSingle15 --> Access36
    PgClassExpression39{{"PgClassExpression[39∈5] ➊<br />ᐸ__types__.”regrole”ᐳ"}}:::plan
    Access36 --> PgClassExpression39
    PgClassExpression41{{"PgClassExpression[41∈5] ➊<br />ᐸ__types__....namespace”ᐳ"}}:::plan
    Access36 --> PgClassExpression41
    PgClassExpression43{{"PgClassExpression[43∈5] ➊<br />ᐸ__types__....ay_domain”ᐳ"}}:::plan
    Access36 --> PgClassExpression43
    PgClassExpression45{{"PgClassExpression[45∈5] ➊<br />ᐸ__types__....ound_type”ᐳ"}}:::plan
    Access36 --> PgClassExpression45
    PgClassExpression45 --> PgFromExpression50
    First51{{"First[51∈5] ➊"}}:::plan
    PgSelectRows52[["PgSelectRows[52∈5] ➊"]]:::plan
    PgSelectRows52 --> First51
    PgSelect46 --> PgSelectRows52
    PgSelectSingle53{{"PgSelectSingle[53∈5] ➊<br />ᐸfrmcdc_domainConstrainedCompoundTypeᐳ"}}:::plan
    First51 --> PgSelectSingle53
    PgSelect55[["PgSelect[55∈6] ➊<br />ᐸfrmcdc_domainConstrainedCompoundTypeᐳ"]]:::plan
    PgFromExpression59{{"PgFromExpression[59∈6] ➊"}}:::plan
    Object32 & PgFromExpression59 --> PgSelect55
    PgClassExpression37{{"PgClassExpression[37∈6] ➊<br />ᐸ__types__.”id”ᐳ"}}:::plan
    Access38{{"Access[38∈6] ➊<br />ᐸ29.tᐳ"}}:::plan
    Access38 --> PgClassExpression37
    PgInsertSingle29 --> Access38
    PgClassExpression40{{"PgClassExpression[40∈6] ➊<br />ᐸ__types__.”regrole”ᐳ"}}:::plan
    Access38 --> PgClassExpression40
    PgClassExpression42{{"PgClassExpression[42∈6] ➊<br />ᐸ__types__....namespace”ᐳ"}}:::plan
    Access38 --> PgClassExpression42
    PgClassExpression44{{"PgClassExpression[44∈6] ➊<br />ᐸ__types__....ay_domain”ᐳ"}}:::plan
    Access38 --> PgClassExpression44
    PgClassExpression54{{"PgClassExpression[54∈6] ➊<br />ᐸ__types__....ound_type”ᐳ"}}:::plan
    Access38 --> PgClassExpression54
    PgClassExpression54 --> PgFromExpression59
    First60{{"First[60∈6] ➊"}}:::plan
    PgSelectRows61[["PgSelectRows[61∈6] ➊"]]:::plan
    PgSelectRows61 --> First60
    PgSelect55 --> PgSelectRows61
    PgSelectSingle62{{"PgSelectSingle[62∈6] ➊<br />ᐸfrmcdc_domainConstrainedCompoundTypeᐳ"}}:::plan
    First60 --> PgSelectSingle62
    PgClassExpression65{{"PgClassExpression[65∈7] ➊<br />ᐸ__frmcdc_d...type__.”a”ᐳ"}}:::plan
    PgSelectSingle53 --> PgClassExpression65
    PgClassExpression67{{"PgClassExpression[67∈7] ➊<br />ᐸ__frmcdc_d...type__.”b”ᐳ"}}:::plan
    PgSelectSingle53 --> PgClassExpression67
    PgClassExpression69{{"PgClassExpression[69∈7] ➊<br />ᐸ__frmcdc_d...type__.”c”ᐳ"}}:::plan
    PgSelectSingle53 --> PgClassExpression69
    PgClassExpression71{{"PgClassExpression[71∈7] ➊<br />ᐸ__frmcdc_d...type__.”d”ᐳ"}}:::plan
    PgSelectSingle53 --> PgClassExpression71
    PgClassExpression73{{"PgClassExpression[73∈7] ➊<br />ᐸ__frmcdc_d...type__.”e”ᐳ"}}:::plan
    PgSelectSingle53 --> PgClassExpression73
    PgClassExpression75{{"PgClassExpression[75∈7] ➊<br />ᐸ__frmcdc_d...type__.”f”ᐳ"}}:::plan
    PgSelectSingle53 --> PgClassExpression75
    PgClassExpression77{{"PgClassExpression[77∈7] ➊<br />ᐸ__frmcdc_d....”foo_bar”ᐳ"}}:::plan
    PgSelectSingle53 --> PgClassExpression77
    PgClassExpression66{{"PgClassExpression[66∈8] ➊<br />ᐸ__frmcdc_d...type__.”a”ᐳ"}}:::plan
    PgSelectSingle62 --> PgClassExpression66
    PgClassExpression68{{"PgClassExpression[68∈8] ➊<br />ᐸ__frmcdc_d...type__.”b”ᐳ"}}:::plan
    PgSelectSingle62 --> PgClassExpression68
    PgClassExpression70{{"PgClassExpression[70∈8] ➊<br />ᐸ__frmcdc_d...type__.”c”ᐳ"}}:::plan
    PgSelectSingle62 --> PgClassExpression70
    PgClassExpression72{{"PgClassExpression[72∈8] ➊<br />ᐸ__frmcdc_d...type__.”d”ᐳ"}}:::plan
    PgSelectSingle62 --> PgClassExpression72
    PgClassExpression74{{"PgClassExpression[74∈8] ➊<br />ᐸ__frmcdc_d...type__.”e”ᐳ"}}:::plan
    PgSelectSingle62 --> PgClassExpression74
    PgClassExpression76{{"PgClassExpression[76∈8] ➊<br />ᐸ__frmcdc_d...type__.”f”ᐳ"}}:::plan
    PgSelectSingle62 --> PgClassExpression76
    PgClassExpression78{{"PgClassExpression[78∈8] ➊<br />ᐸ__frmcdc_d....”foo_bar”ᐳ"}}:::plan
    PgSelectSingle62 --> PgClassExpression78
    __Item63[/"__Item[63∈9]<br />ᐸ43ᐳ"\]:::itemplan
    PgClassExpression43 ==> __Item63
    __Item64[/"__Item[64∈10]<br />ᐸ44ᐳ"\]:::itemplan
    PgClassExpression44 ==> __Item64

    %% define steps
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,__InputObject6,__InputObject9,Constant12,__InputObject13,Access16,Access17,Object18,ApplyInput19,__InputObject21,__InputObject23,Constant26,__InputObject27,ApplyInput33,Constant79,Constant80,Constant81,Constant82,Constant83,Constant84 bucket0
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgUpdateSingle15,Object20 bucket1
    classDef bucket2 stroke:#7f007f
    class Bucket2,PgInsertSingle29,Access30,Access31,Object32,Object34 bucket2
    classDef bucket3 stroke:#ffa500
    class Bucket3 bucket3
    classDef bucket4 stroke:#0000ff
    class Bucket4 bucket4
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgClassExpression35,Access36,PgClassExpression39,PgClassExpression41,PgClassExpression43,PgClassExpression45,PgSelect46,PgFromExpression50,First51,PgSelectRows52,PgSelectSingle53 bucket5
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgClassExpression37,Access38,PgClassExpression40,PgClassExpression42,PgClassExpression44,PgClassExpression54,PgSelect55,PgFromExpression59,First60,PgSelectRows61,PgSelectSingle62 bucket6
    classDef bucket7 stroke:#808000
    class Bucket7,PgClassExpression65,PgClassExpression67,PgClassExpression69,PgClassExpression71,PgClassExpression73,PgClassExpression75,PgClassExpression77 bucket7
    classDef bucket8 stroke:#dda0dd
    class Bucket8,PgClassExpression66,PgClassExpression68,PgClassExpression70,PgClassExpression72,PgClassExpression74,PgClassExpression76,PgClassExpression78 bucket8
    classDef bucket9 stroke:#ff0000
    class Bucket9,__Item63 bucket9
    classDef bucket10 stroke:#ffff00
    class Bucket10,__Item64 bucket10

