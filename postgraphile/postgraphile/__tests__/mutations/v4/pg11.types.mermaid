%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    Object29{{"Object[29∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access27{{"Access[27∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access28{{"Access[28∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access27 & Access28 --> Object29
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access27
    __Value2 --> Access28
    Lambda104{{"Lambda[104∈0] ➊<br />ᐸcalculateLimitAndOffsetSQLᐳ"}}:::plan
    Constant126{{"Constant[126∈0] ➊<br />ᐸ[Object: null prototype] {   cursorLower: null,   cursorUppeᐳ"}}:::plan
    Constant126 --> Lambda104
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    Constant113{{"Constant[113∈0] ➊<br />ᐸ12ᐳ"}}:::plan
    Constant114{{"Constant[114∈0] ➊<br />ᐸ'postgraphile_test_authenticator'ᐳ"}}:::plan
    Constant115{{"Constant[115∈0] ➊<br />ᐸ'pg11'ᐳ"}}:::plan
    Constant120{{"Constant[120∈0] ➊<br />ᐸ'postgraphile_test_visitor'ᐳ"}}:::plan
    Constant121{{"Constant[121∈0] ➊<br />ᐸ'c'ᐳ"}}:::plan
    Constant127{{"Constant[127∈0] ➊<br />ᐸ[ '2098288669218571759', '2098288669218571760', '20982886692ᐳ"}}:::plan
    Constant128{{"Constant[128∈0] ➊<br />ᐸ[Object: null prototype] { a: 1 }ᐳ"}}:::plan
    PgUpdateSingle26[["PgUpdateSingle[26∈1] ➊<br />ᐸtypes(id;regrole,regnamespace,bigint_domain_array_domain,domain_constrained_compound_type)ᐳ"]]:::sideeffectplan
    Object29 & Constant113 & Constant114 & Constant115 & Constant127 & Constant128 --> PgUpdateSingle26
    Object30{{"Object[30∈1] ➊<br />ᐸ{result}ᐳ"}}:::plan
    PgUpdateSingle26 --> Object30
    PgSelect39[["PgSelect[39∈3] ➊<br />ᐸfrmcdc_domainConstrainedCompoundTypeᐳ"]]:::plan
    PgClassExpression38{{"PgClassExpression[38∈3] ➊<br />ᐸ__types__....ound_type”ᐳ"}}:::plan
    Object29 & PgClassExpression38 & Lambda104 --> PgSelect39
    PgClassExpression33{{"PgClassExpression[33∈3] ➊<br />ᐸ__types__.”id”ᐳ"}}:::plan
    PgUpdateSingle26 --> PgClassExpression33
    PgClassExpression34{{"PgClassExpression[34∈3] ➊<br />ᐸ__types__.”regrole”ᐳ"}}:::plan
    PgUpdateSingle26 --> PgClassExpression34
    PgClassExpression35{{"PgClassExpression[35∈3] ➊<br />ᐸ__types__....namespace”ᐳ"}}:::plan
    PgUpdateSingle26 --> PgClassExpression35
    PgClassExpression36{{"PgClassExpression[36∈3] ➊<br />ᐸ__types__....ay_domain”ᐳ"}}:::plan
    PgUpdateSingle26 --> PgClassExpression36
    PgUpdateSingle26 --> PgClassExpression38
    First43{{"First[43∈3] ➊"}}:::plan
    PgSelect39 --> First43
    PgSelectSingle44{{"PgSelectSingle[44∈3] ➊<br />ᐸfrmcdc_domainConstrainedCompoundTypeᐳ"}}:::plan
    First43 --> PgSelectSingle44
    __Item37[/"__Item[37∈4]<br />ᐸ36ᐳ"\]:::itemplan
    PgClassExpression36 ==> __Item37
    PgClassExpression45{{"PgClassExpression[45∈5] ➊<br />ᐸ__frmcdc_d...type__.”a”ᐳ"}}:::plan
    PgSelectSingle44 --> PgClassExpression45
    PgClassExpression46{{"PgClassExpression[46∈5] ➊<br />ᐸ__frmcdc_d...type__.”b”ᐳ"}}:::plan
    PgSelectSingle44 --> PgClassExpression46
    PgClassExpression47{{"PgClassExpression[47∈5] ➊<br />ᐸ__frmcdc_d...type__.”c”ᐳ"}}:::plan
    PgSelectSingle44 --> PgClassExpression47
    PgClassExpression48{{"PgClassExpression[48∈5] ➊<br />ᐸ__frmcdc_d...type__.”d”ᐳ"}}:::plan
    PgSelectSingle44 --> PgClassExpression48
    PgClassExpression49{{"PgClassExpression[49∈5] ➊<br />ᐸ__frmcdc_d...type__.”e”ᐳ"}}:::plan
    PgSelectSingle44 --> PgClassExpression49
    PgClassExpression50{{"PgClassExpression[50∈5] ➊<br />ᐸ__frmcdc_d...type__.”f”ᐳ"}}:::plan
    PgSelectSingle44 --> PgClassExpression50
    PgClassExpression51{{"PgClassExpression[51∈5] ➊<br />ᐸ__frmcdc_d....”foo_bar”ᐳ"}}:::plan
    PgSelectSingle44 --> PgClassExpression51
    PgInsertSingle71[["PgInsertSingle[71∈6] ➊<br />ᐸtypes(regrole,regnamespace,bigint_domain_array_domain,domain_constrained_compound_type)ᐳ"]]:::sideeffectplan
    Object74{{"Object[74∈6] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Constant129{{"Constant[129∈6] ➊<br />ᐸ[ '2098288669218571759', '2098288669218571760', '20982886692ᐳ"}}:::plan
    Constant130{{"Constant[130∈6] ➊<br />ᐸ[Object: null prototype] { a: 1 }ᐳ"}}:::plan
    Object74 & Constant120 & Constant121 & Constant129 & Constant130 --> PgInsertSingle71
    Access72{{"Access[72∈6] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access73{{"Access[73∈6] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access72 & Access73 --> Object74
    __Value2 --> Access72
    __Value2 --> Access73
    Object75{{"Object[75∈6] ➊<br />ᐸ{result}ᐳ"}}:::plan
    PgInsertSingle71 --> Object75
    PgSelect84[["PgSelect[84∈8] ➊<br />ᐸfrmcdc_domainConstrainedCompoundTypeᐳ"]]:::plan
    PgClassExpression83{{"PgClassExpression[83∈8] ➊<br />ᐸ__types__....ound_type”ᐳ"}}:::plan
    Object74 & PgClassExpression83 & Lambda104 --> PgSelect84
    PgClassExpression78{{"PgClassExpression[78∈8] ➊<br />ᐸ__types__.”id”ᐳ"}}:::plan
    PgInsertSingle71 --> PgClassExpression78
    PgClassExpression79{{"PgClassExpression[79∈8] ➊<br />ᐸ__types__.”regrole”ᐳ"}}:::plan
    PgInsertSingle71 --> PgClassExpression79
    PgClassExpression80{{"PgClassExpression[80∈8] ➊<br />ᐸ__types__....namespace”ᐳ"}}:::plan
    PgInsertSingle71 --> PgClassExpression80
    PgClassExpression81{{"PgClassExpression[81∈8] ➊<br />ᐸ__types__....ay_domain”ᐳ"}}:::plan
    PgInsertSingle71 --> PgClassExpression81
    PgInsertSingle71 --> PgClassExpression83
    First88{{"First[88∈8] ➊"}}:::plan
    PgSelect84 --> First88
    PgSelectSingle89{{"PgSelectSingle[89∈8] ➊<br />ᐸfrmcdc_domainConstrainedCompoundTypeᐳ"}}:::plan
    First88 --> PgSelectSingle89
    __Item82[/"__Item[82∈9]<br />ᐸ81ᐳ"\]:::itemplan
    PgClassExpression81 ==> __Item82
    PgClassExpression90{{"PgClassExpression[90∈10] ➊<br />ᐸ__frmcdc_d...type__.”a”ᐳ"}}:::plan
    PgSelectSingle89 --> PgClassExpression90
    PgClassExpression91{{"PgClassExpression[91∈10] ➊<br />ᐸ__frmcdc_d...type__.”b”ᐳ"}}:::plan
    PgSelectSingle89 --> PgClassExpression91
    PgClassExpression92{{"PgClassExpression[92∈10] ➊<br />ᐸ__frmcdc_d...type__.”c”ᐳ"}}:::plan
    PgSelectSingle89 --> PgClassExpression92
    PgClassExpression93{{"PgClassExpression[93∈10] ➊<br />ᐸ__frmcdc_d...type__.”d”ᐳ"}}:::plan
    PgSelectSingle89 --> PgClassExpression93
    PgClassExpression94{{"PgClassExpression[94∈10] ➊<br />ᐸ__frmcdc_d...type__.”e”ᐳ"}}:::plan
    PgSelectSingle89 --> PgClassExpression94
    PgClassExpression95{{"PgClassExpression[95∈10] ➊<br />ᐸ__frmcdc_d...type__.”f”ᐳ"}}:::plan
    PgSelectSingle89 --> PgClassExpression95
    PgClassExpression96{{"PgClassExpression[96∈10] ➊<br />ᐸ__frmcdc_d....”foo_bar”ᐳ"}}:::plan
    PgSelectSingle89 --> PgClassExpression96

    %% define steps

    subgraph "Buckets for mutations/v4/pg11.types"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Access27,Access28,Object29,Lambda104,Constant113,Constant114,Constant115,Constant120,Constant121,Constant126,Constant127,Constant128 bucket0
    Bucket1("Bucket 1 (mutationField)<br />Deps: 29, 113, 114, 115, 127, 128, 104<br /><br />1: PgUpdateSingle[26]<br />2: <br />ᐳ: Object[30]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgUpdateSingle26,Object30 bucket1
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 30, 26, 29, 104<br /><br />ROOT Object{1}ᐸ{result}ᐳ[30]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 26, 29, 104<br /><br />ROOT PgUpdateSingle{1}ᐸtypes(id;regrole,regnamespace,bigint_domain_array_domain,domain_constrained_compound_type)ᐳ[26]<br />1: <br />ᐳ: 33, 34, 35, 36, 38<br />2: PgSelect[39]<br />ᐳ: First[43], PgSelectSingle[44]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgClassExpression33,PgClassExpression34,PgClassExpression35,PgClassExpression36,PgClassExpression38,PgSelect39,First43,PgSelectSingle44 bucket3
    Bucket4("Bucket 4 (listItem)<br /><br />ROOT __Item{4}ᐸ36ᐳ[37]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,__Item37 bucket4
    Bucket5("Bucket 5 (nullableBoundary)<br />Deps: 44<br /><br />ROOT PgSelectSingle{3}ᐸfrmcdc_domainConstrainedCompoundTypeᐳ[44]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgClassExpression45,PgClassExpression46,PgClassExpression47,PgClassExpression48,PgClassExpression49,PgClassExpression50,PgClassExpression51 bucket5
    Bucket6("Bucket 6 (mutationField)<br />Deps: 120, 121, 2, 104<br /><br />1: Access[72]<br />2: Access[73]<br />3: Object[74]<br />4: Constant[129]<br />5: Constant[130]<br />6: PgInsertSingle[71]<br />7: <br />ᐳ: Object[75]"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgInsertSingle71,Access72,Access73,Object74,Object75,Constant129,Constant130 bucket6
    Bucket7("Bucket 7 (nullableBoundary)<br />Deps: 75, 71, 74, 104<br /><br />ROOT Object{6}ᐸ{result}ᐳ[75]"):::bucket
    classDef bucket7 stroke:#808000
    class Bucket7 bucket7
    Bucket8("Bucket 8 (nullableBoundary)<br />Deps: 71, 74, 104<br /><br />ROOT PgInsertSingle{6}ᐸtypes(regrole,regnamespace,bigint_domain_array_domain,domain_constrained_compound_type)ᐳ[71]<br />1: <br />ᐳ: 78, 79, 80, 81, 83<br />2: PgSelect[84]<br />ᐳ: First[88], PgSelectSingle[89]"):::bucket
    classDef bucket8 stroke:#dda0dd
    class Bucket8,PgClassExpression78,PgClassExpression79,PgClassExpression80,PgClassExpression81,PgClassExpression83,PgSelect84,First88,PgSelectSingle89 bucket8
    Bucket9("Bucket 9 (listItem)<br /><br />ROOT __Item{9}ᐸ81ᐳ[82]"):::bucket
    classDef bucket9 stroke:#ff0000
    class Bucket9,__Item82 bucket9
    Bucket10("Bucket 10 (nullableBoundary)<br />Deps: 89<br /><br />ROOT PgSelectSingle{8}ᐸfrmcdc_domainConstrainedCompoundTypeᐳ[89]"):::bucket
    classDef bucket10 stroke:#ffff00
    class Bucket10,PgClassExpression90,PgClassExpression91,PgClassExpression92,PgClassExpression93,PgClassExpression94,PgClassExpression95,PgClassExpression96 bucket10
    Bucket0 --> Bucket1 & Bucket6
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4 & Bucket5
    Bucket6 --> Bucket7
    Bucket7 --> Bucket8
    Bucket8 --> Bucket9 & Bucket10
    end
