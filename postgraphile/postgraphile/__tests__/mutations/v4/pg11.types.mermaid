%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    __InputObject9{{"__InputObject[9∈0] ➊"}}:::plan
    Constant78{{"Constant[78∈0] ➊<br />ᐸ'postgraphile_test_authenticator'ᐳ"}}:::plan
    Constant79{{"Constant[79∈0] ➊<br />ᐸ'pg11'ᐳ"}}:::plan
    Constant12{{"Constant[12∈0] ➊<br />ᐸ[ '2098288669218571759', '2098288669218571760', '20982886692ᐳ"}}:::plan
    __InputObject13{{"__InputObject[13∈0] ➊"}}:::plan
    Constant78 & Constant79 & Constant12 & __InputObject13 --> __InputObject9
    __InputObject44{{"__InputObject[44∈0] ➊"}}:::plan
    Constant81{{"Constant[81∈0] ➊<br />ᐸ'postgraphile_test_visitor'ᐳ"}}:::plan
    Constant82{{"Constant[82∈0] ➊<br />ᐸ'c'ᐳ"}}:::plan
    Constant47{{"Constant[47∈0] ➊<br />ᐸ[ '2098288669218571759', '2098288669218571760', '20982886692ᐳ"}}:::plan
    __InputObject48{{"__InputObject[48∈0] ➊"}}:::plan
    Constant81 & Constant82 & Constant47 & __InputObject48 --> __InputObject44
    __InputObject6{{"__InputObject[6∈0] ➊"}}:::plan
    Constant77{{"Constant[77∈0] ➊<br />ᐸ12ᐳ"}}:::plan
    Constant77 & __InputObject9 --> __InputObject6
    Constant80{{"Constant[80∈0] ➊<br />ᐸ1ᐳ"}}:::plan
    Constant80 --> __InputObject13
    Object18{{"Object[18∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access16{{"Access[16∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access17{{"Access[17∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access16 & Access17 --> Object18
    __InputObject42{{"__InputObject[42∈0] ➊"}}:::plan
    __InputObject44 --> __InputObject42
    Constant80 --> __InputObject48
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access16
    __Value2 --> Access17
    ApplyInput19{{"ApplyInput[19∈0] ➊"}}:::plan
    __InputObject6 --> ApplyInput19
    ApplyInput54{{"ApplyInput[54∈0] ➊"}}:::plan
    __InputObject42 --> ApplyInput54
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    PgUpdateSingle15[["PgUpdateSingle[15∈1] ➊<br />ᐸtypes(id;)ᐳ"]]:::sideeffectplan
    Object18 & Constant77 & ApplyInput19 --> PgUpdateSingle15
    Object20{{"Object[20∈1] ➊<br />ᐸ{result}ᐳ"}}:::plan
    PgUpdateSingle15 --> Object20
    PgSelect28[["PgSelect[28∈3] ➊<br />ᐸfrmcdc_domainConstrainedCompoundTypeᐳ"]]:::plan
    PgClassExpression27{{"PgClassExpression[27∈3] ➊<br />ᐸ__types__....ound_type”ᐳ"}}:::plan
    Object18 & PgClassExpression27 --> PgSelect28
    PgClassExpression21{{"PgClassExpression[21∈3] ➊<br />ᐸ__types__.”id”ᐳ"}}:::plan
    Access22{{"Access[22∈3] ➊<br />ᐸ15.tᐳ"}}:::plan
    Access22 --> PgClassExpression21
    PgUpdateSingle15 --> Access22
    PgClassExpression23{{"PgClassExpression[23∈3] ➊<br />ᐸ__types__.”regrole”ᐳ"}}:::plan
    Access22 --> PgClassExpression23
    PgClassExpression24{{"PgClassExpression[24∈3] ➊<br />ᐸ__types__....namespace”ᐳ"}}:::plan
    Access22 --> PgClassExpression24
    PgClassExpression25{{"PgClassExpression[25∈3] ➊<br />ᐸ__types__....ay_domain”ᐳ"}}:::plan
    Access22 --> PgClassExpression25
    Access22 --> PgClassExpression27
    First32{{"First[32∈3] ➊"}}:::plan
    PgSelectRows33[["PgSelectRows[33∈3] ➊"]]:::plan
    PgSelectRows33 --> First32
    PgSelect28 --> PgSelectRows33
    PgSelectSingle34{{"PgSelectSingle[34∈3] ➊<br />ᐸfrmcdc_domainConstrainedCompoundTypeᐳ"}}:::plan
    First32 --> PgSelectSingle34
    __Item26[/"__Item[26∈4]<br />ᐸ25ᐳ"\]:::itemplan
    PgClassExpression25 ==> __Item26
    PgClassExpression35{{"PgClassExpression[35∈5] ➊<br />ᐸ__frmcdc_d...type__.”a”ᐳ"}}:::plan
    PgSelectSingle34 --> PgClassExpression35
    PgClassExpression36{{"PgClassExpression[36∈5] ➊<br />ᐸ__frmcdc_d...type__.”b”ᐳ"}}:::plan
    PgSelectSingle34 --> PgClassExpression36
    PgClassExpression37{{"PgClassExpression[37∈5] ➊<br />ᐸ__frmcdc_d...type__.”c”ᐳ"}}:::plan
    PgSelectSingle34 --> PgClassExpression37
    PgClassExpression38{{"PgClassExpression[38∈5] ➊<br />ᐸ__frmcdc_d...type__.”d”ᐳ"}}:::plan
    PgSelectSingle34 --> PgClassExpression38
    PgClassExpression39{{"PgClassExpression[39∈5] ➊<br />ᐸ__frmcdc_d...type__.”e”ᐳ"}}:::plan
    PgSelectSingle34 --> PgClassExpression39
    PgClassExpression40{{"PgClassExpression[40∈5] ➊<br />ᐸ__frmcdc_d...type__.”f”ᐳ"}}:::plan
    PgSelectSingle34 --> PgClassExpression40
    PgClassExpression41{{"PgClassExpression[41∈5] ➊<br />ᐸ__frmcdc_d....”foo_bar”ᐳ"}}:::plan
    PgSelectSingle34 --> PgClassExpression41
    PgInsertSingle50[["PgInsertSingle[50∈6] ➊<br />ᐸtypes()ᐳ"]]:::sideeffectplan
    Object53{{"Object[53∈6] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Object53 & ApplyInput54 --> PgInsertSingle50
    Access51{{"Access[51∈6] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access52{{"Access[52∈6] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access51 & Access52 --> Object53
    __Value2 --> Access51
    __Value2 --> Access52
    Object55{{"Object[55∈6] ➊<br />ᐸ{result}ᐳ"}}:::plan
    PgInsertSingle50 --> Object55
    PgSelect63[["PgSelect[63∈8] ➊<br />ᐸfrmcdc_domainConstrainedCompoundTypeᐳ"]]:::plan
    PgClassExpression62{{"PgClassExpression[62∈8] ➊<br />ᐸ__types__....ound_type”ᐳ"}}:::plan
    Object53 & PgClassExpression62 --> PgSelect63
    PgClassExpression56{{"PgClassExpression[56∈8] ➊<br />ᐸ__types__.”id”ᐳ"}}:::plan
    Access57{{"Access[57∈8] ➊<br />ᐸ50.tᐳ"}}:::plan
    Access57 --> PgClassExpression56
    PgInsertSingle50 --> Access57
    PgClassExpression58{{"PgClassExpression[58∈8] ➊<br />ᐸ__types__.”regrole”ᐳ"}}:::plan
    Access57 --> PgClassExpression58
    PgClassExpression59{{"PgClassExpression[59∈8] ➊<br />ᐸ__types__....namespace”ᐳ"}}:::plan
    Access57 --> PgClassExpression59
    PgClassExpression60{{"PgClassExpression[60∈8] ➊<br />ᐸ__types__....ay_domain”ᐳ"}}:::plan
    Access57 --> PgClassExpression60
    Access57 --> PgClassExpression62
    First67{{"First[67∈8] ➊"}}:::plan
    PgSelectRows68[["PgSelectRows[68∈8] ➊"]]:::plan
    PgSelectRows68 --> First67
    PgSelect63 --> PgSelectRows68
    PgSelectSingle69{{"PgSelectSingle[69∈8] ➊<br />ᐸfrmcdc_domainConstrainedCompoundTypeᐳ"}}:::plan
    First67 --> PgSelectSingle69
    __Item61[/"__Item[61∈9]<br />ᐸ60ᐳ"\]:::itemplan
    PgClassExpression60 ==> __Item61
    PgClassExpression70{{"PgClassExpression[70∈10] ➊<br />ᐸ__frmcdc_d...type__.”a”ᐳ"}}:::plan
    PgSelectSingle69 --> PgClassExpression70
    PgClassExpression71{{"PgClassExpression[71∈10] ➊<br />ᐸ__frmcdc_d...type__.”b”ᐳ"}}:::plan
    PgSelectSingle69 --> PgClassExpression71
    PgClassExpression72{{"PgClassExpression[72∈10] ➊<br />ᐸ__frmcdc_d...type__.”c”ᐳ"}}:::plan
    PgSelectSingle69 --> PgClassExpression72
    PgClassExpression73{{"PgClassExpression[73∈10] ➊<br />ᐸ__frmcdc_d...type__.”d”ᐳ"}}:::plan
    PgSelectSingle69 --> PgClassExpression73
    PgClassExpression74{{"PgClassExpression[74∈10] ➊<br />ᐸ__frmcdc_d...type__.”e”ᐳ"}}:::plan
    PgSelectSingle69 --> PgClassExpression74
    PgClassExpression75{{"PgClassExpression[75∈10] ➊<br />ᐸ__frmcdc_d...type__.”f”ᐳ"}}:::plan
    PgSelectSingle69 --> PgClassExpression75
    PgClassExpression76{{"PgClassExpression[76∈10] ➊<br />ᐸ__frmcdc_d....”foo_bar”ᐳ"}}:::plan
    PgSelectSingle69 --> PgClassExpression76

    %% define steps

    subgraph "Buckets for mutations/v4/pg11.types"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,__InputObject6,__InputObject9,Constant12,__InputObject13,Access16,Access17,Object18,ApplyInput19,__InputObject42,__InputObject44,Constant47,__InputObject48,ApplyInput54,Constant77,Constant78,Constant79,Constant80,Constant81,Constant82 bucket0
    Bucket1("Bucket 1 (mutationField)<br />Deps: 18, 77, 19<br /><br />1: PgUpdateSingle[15]<br />2: <br />ᐳ: Object[20]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgUpdateSingle15,Object20 bucket1
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 20, 15, 18<br /><br />ROOT Object{1}ᐸ{result}ᐳ[20]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 15, 18<br /><br />ROOT PgUpdateSingle{1}ᐸtypes(id;)ᐳ[15]<br />1: <br />ᐳ: 22, 21, 23, 24, 25, 27<br />2: PgSelect[28]<br />3: PgSelectRows[33]<br />ᐳ: First[32], PgSelectSingle[34]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgClassExpression21,Access22,PgClassExpression23,PgClassExpression24,PgClassExpression25,PgClassExpression27,PgSelect28,First32,PgSelectRows33,PgSelectSingle34 bucket3
    Bucket4("Bucket 4 (listItem)<br /><br />ROOT __Item{4}ᐸ25ᐳ[26]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,__Item26 bucket4
    Bucket5("Bucket 5 (nullableBoundary)<br />Deps: 34<br /><br />ROOT PgSelectSingle{3}ᐸfrmcdc_domainConstrainedCompoundTypeᐳ[34]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgClassExpression35,PgClassExpression36,PgClassExpression37,PgClassExpression38,PgClassExpression39,PgClassExpression40,PgClassExpression41 bucket5
    Bucket6("Bucket 6 (mutationField)<br />Deps: 54, 2<br /><br />1: Access[51]<br />2: Access[52]<br />3: Object[53]<br />4: PgInsertSingle[50]<br />5: <br />ᐳ: Object[55]"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgInsertSingle50,Access51,Access52,Object53,Object55 bucket6
    Bucket7("Bucket 7 (nullableBoundary)<br />Deps: 55, 50, 53<br /><br />ROOT Object{6}ᐸ{result}ᐳ[55]"):::bucket
    classDef bucket7 stroke:#808000
    class Bucket7 bucket7
    Bucket8("Bucket 8 (nullableBoundary)<br />Deps: 50, 53<br /><br />ROOT PgInsertSingle{6}ᐸtypes()ᐳ[50]<br />1: <br />ᐳ: 57, 56, 58, 59, 60, 62<br />2: PgSelect[63]<br />3: PgSelectRows[68]<br />ᐳ: First[67], PgSelectSingle[69]"):::bucket
    classDef bucket8 stroke:#dda0dd
    class Bucket8,PgClassExpression56,Access57,PgClassExpression58,PgClassExpression59,PgClassExpression60,PgClassExpression62,PgSelect63,First67,PgSelectRows68,PgSelectSingle69 bucket8
    Bucket9("Bucket 9 (listItem)<br /><br />ROOT __Item{9}ᐸ60ᐳ[61]"):::bucket
    classDef bucket9 stroke:#ff0000
    class Bucket9,__Item61 bucket9
    Bucket10("Bucket 10 (nullableBoundary)<br />Deps: 69<br /><br />ROOT PgSelectSingle{8}ᐸfrmcdc_domainConstrainedCompoundTypeᐳ[69]"):::bucket
    classDef bucket10 stroke:#ffff00
    class Bucket10,PgClassExpression70,PgClassExpression71,PgClassExpression72,PgClassExpression73,PgClassExpression74,PgClassExpression75,PgClassExpression76 bucket10
    Bucket0 --> Bucket1 & Bucket6
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4 & Bucket5
    Bucket6 --> Bucket7
    Bucket7 --> Bucket8
    Bucket8 --> Bucket9 & Bucket10
    end
