%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left

    subgraph "Buckets for mutations/v4/polymorphic.relay.custom_delete"
    Bucket0("Bucket 0 (root)<br /><br />1: <br />ᐳ: 7, 36, 37, 113, 117, 121, 125, 129, 139, 140, 6, 9, 38, 54, 138, 14<br />2: 13, 17, 21, 25, 29<br />ᐳ: 15, 19, 23, 27, 31, 32, 33, 34<br />3: PgSelect[35]<br />4: PgSelectRows[40]<br />ᐳ: 39, 41, 42, 48"):::bucket
    Bucket1("Bucket 1 (mutationField)<br />Deps: 38, 48, 54, 140, 2, 4, 113, 117, 121, 125, 129<br /><br />1: PgSelect[44]<br />2: PgSelectRows[50]<br />ᐳ: 49, 51, 52, 53"):::bucket
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 140, 44, 2, 53, 4, 113, 117, 121, 125, 129, 52<br /><br />ROOT Object{1}ᐸ{result}ᐳ[53]<br />1: <br />ᐳ: Access[58], Access[59], Object[60]<br />2: PgSelect[57]<br />3: Connection[61]<br />4: ConnectionItems[63]"):::bucket
    Bucket3("Bucket 3 (nullableBoundary)<br />Parent side effect step: 44<br />Deps: 4, 61, 44, 63, 60, 113, 117, 121, 125, 129<br /><br />ROOT __ValueᐸrootValueᐳ[4]"):::bucket
    Bucket4("Bucket 4 (nullableBoundary)<br />Deps: 61, 44, 63, 60, 113, 117, 121, 125, 129<br /><br />ROOT Connection{2}ᐸ57ᐳ[61]"):::bucket
    Bucket6("Bucket 6 (listItem)<br />Deps: 44, 60, 113, 117, 121, 125, 129<br /><br />ROOT __Item{6}ᐸ63ᐳ[66]"):::bucket
    Bucket7("Bucket 7 (polymorphic)<br />__typename: Lambda[72]<br />Deps: 72, 60, 68, 44, 113, 117, 121, 125, 129, 133"):::bucket
    Bucket8("Bucket 8 (polymorphicPartition)<br />|RelationalTopic<br />Parent side effect step: 44<br />Deps: 60, 68, 44, 113, 133<br />ᐳRelationalTopic<br /><br />1: PgSelect[74]<br />2: PgSelectRows[79]<br />ᐳ: 78, 80, 114, 115, 116"):::bucket
    Bucket9("Bucket 9 (polymorphicPartition)<br />|RelationalPost<br />Parent side effect step: 44<br />Deps: 60, 68, 44, 117, 133<br />ᐳRelationalPost<br /><br />1: PgSelect[82]<br />2: PgSelectRows[87]<br />ᐳ: 86, 88, 118, 119, 120"):::bucket
    Bucket10("Bucket 10 (polymorphicPartition)<br />|RelationalDivider<br />Parent side effect step: 44<br />Deps: 60, 68, 44, 121, 133<br />ᐳRelationalDivider<br /><br />1: PgSelect[90]<br />2: PgSelectRows[95]<br />ᐳ: 94, 96, 122, 123, 124"):::bucket
    Bucket11("Bucket 11 (polymorphicPartition)<br />|RelationalChecklist<br />Parent side effect step: 44<br />Deps: 60, 68, 44, 125, 133<br />ᐳRelationalChecklist<br /><br />1: PgSelect[98]<br />2: PgSelectRows[103]<br />ᐳ: 102, 104, 126, 127, 128"):::bucket
    Bucket12("Bucket 12 (polymorphicPartition)<br />|RelationalChecklistItem<br />Parent side effect step: 44<br />Deps: 60, 68, 44, 129, 133<br />ᐳRelationalChecklistItem<br /><br />1: PgSelect[106]<br />2: PgSelectRows[111]<br />ᐳ: 110, 112, 130, 131, 132"):::bucket
    end
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4
    Bucket4 --> Bucket6
    Bucket6 --> Bucket7
    Bucket7 --> Bucket8 & Bucket9 & Bucket10 & Bucket11 & Bucket12

    %% plan dependencies
    List32{{"List[32∈0] ➊<br />ᐸ15,19,23,27,31ᐳ"}}:::plan
    Object15{{"Object[15∈0] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object19{{"Object[19∈0] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object23{{"Object[23∈0] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object27{{"Object[27∈0] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object31{{"Object[31∈0] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object15 & Object19 & Object23 & Object27 & Object31 --> List32
    __InputObject6{{"__InputObject[6∈0] ➊<br />More deps:<br />- Constantᐸundefinedᐳ[7]<br />- Constantᐸ'WyJyZWxhdGlvbmFsX3RvcGljcyIsMV0='ᐳ[139]"}}:::plan
    Lambda13[["Lambda[13∈0] ➊"]]:::unbatchedplan
    List14{{"List[14∈0] ➊<br />ᐸ138ᐳ"}}:::plan
    Lambda13 & List14 --> Object15
    Lambda17[["Lambda[17∈0] ➊"]]:::unbatchedplan
    Lambda17 & List14 --> Object19
    Lambda21[["Lambda[21∈0] ➊"]]:::unbatchedplan
    Lambda21 & List14 --> Object23
    Lambda25[["Lambda[25∈0] ➊"]]:::unbatchedplan
    Lambda25 & List14 --> Object27
    Lambda29[["Lambda[29∈0] ➊"]]:::unbatchedplan
    Lambda29 & List14 --> Object31
    PgSelect35[["PgSelect[35∈0] ➊<br />ᐸrelational_itemsᐳ<br />More deps:<br />- Object[38]"]]:::plan
    Access34{{"Access[34∈0] ➊<br />ᐸ33.0ᐳ"}}:::plan
    Access34 --> PgSelect35
    Object38{{"Object[38∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ<br />Dependents: 2"}}:::plan
    Access36{{"Access[36∈0] ➊<br />ᐸ2.pgSettingsᐳ<br />More deps:<br />- __Value[2]"}}:::plan
    Access37{{"Access[37∈0] ➊<br />ᐸ2.withPgClientᐳ<br />More deps:<br />- __Value[2]"}}:::plan
    Access36 & Access37 --> Object38
    Lambda9{{"Lambda[9∈0] ➊<br />ᐸdecodeNodeIdWithCodecsᐳ<br />More deps:<br />- Constantᐸ'WyJyZWxhdGlvbmFsX3RvcGljcyIsMV0='ᐳ[139]"}}:::plan
    Lambda9 --> Lambda13
    Access138{{"Access[138∈0] ➊<br />ᐸ9.base64JSON.1ᐳ"}}:::plan
    Access138 -->|rejectNull| List14
    Lambda9 --> Lambda17
    Lambda9 --> Lambda21
    Lambda9 --> Lambda25
    Lambda9 --> Lambda29
    Lambda33{{"Lambda[33∈0] ➊"}}:::plan
    List32 --> Lambda33
    Lambda33 --> Access34
    First39{{"First[39∈0] ➊"}}:::plan
    PgSelectRows40[["PgSelectRows[40∈0] ➊"]]:::plan
    PgSelectRows40 --> First39
    PgSelect35 --> PgSelectRows40
    PgSelectSingle41{{"PgSelectSingle[41∈0] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    First39 --> PgSelectSingle41
    PgClassExpression42{{"PgClassExpression[42∈0] ➊<br />ᐸ__relational_items__ᐳ"}}:::plan
    PgSelectSingle41 --> PgClassExpression42
    PgFromExpression48{{"PgFromExpression[48∈0] ➊"}}:::plan
    PgClassExpression42 -->|trapInhibited| PgFromExpression48
    ApplyInput54{{"ApplyInput[54∈0] ➊"}}:::plan
    __InputObject6 --> ApplyInput54
    Lambda9 --> Access138
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ<br />Dependents: 4"]:::plan
    PgSelect44[["PgSelect[44∈1] ➊<br />ᐸcustom_delete_relational_item(mutation)ᐳ<br />More deps:<br />- Object[38]"]]:::sideeffectplan
    PgFromExpression48 & ApplyInput54 --> PgSelect44
    First49{{"First[49∈1] ➊"}}:::plan
    PgSelectRows50[["PgSelectRows[50∈1] ➊"]]:::plan
    PgSelectRows50 --> First49
    PgSelect44 --> PgSelectRows50
    PgSelectSingle51{{"PgSelectSingle[51∈1] ➊<br />ᐸcustom_delete_relational_itemᐳ"}}:::plan
    First49 --> PgSelectSingle51
    PgClassExpression52{{"PgClassExpression[52∈1] ➊<br />ᐸ__custom_d...l_item__.vᐳ"}}:::plan
    PgSelectSingle51 --> PgClassExpression52
    Object53{{"Object[53∈1] ➊<br />ᐸ{result}ᐳ"}}:::plan
    PgClassExpression52 --> Object53
    PgSelect57[["PgSelect[57∈2] ➊<br />ᐸrelational_itemsᐳ<br />More deps:<br />- Constantᐸ1ᐳ[140]"]]:::plan
    Object60{{"Object[60∈2] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Object60 --> PgSelect57
    Access58{{"Access[58∈2] ➊<br />ᐸ2.pgSettingsᐳ<br />More deps:<br />- __Value[2]"}}:::plan
    Access59{{"Access[59∈2] ➊<br />ᐸ2.withPgClientᐳ<br />More deps:<br />- __Value[2]"}}:::plan
    Access58 & Access59 --> Object60
    Connection61[["Connection[61∈2] ➊<br />ᐸ57ᐳ<br />More deps:<br />- Constantᐸ1ᐳ[140]"]]:::plan
    PgSelect57 --> Connection61
    ConnectionItems63[["ConnectionItems[63∈2] ➊"]]:::plan
    Connection61 --> ConnectionItems63
    __Item66[/"__Item[66∈6]<br />ᐸ63ᐳ"\]:::itemplan
    ConnectionItems63 ==> __Item66
    PgSelectSingle67{{"PgSelectSingle[67∈6]<br />ᐸrelational_itemsᐳ"}}:::plan
    __Item66 --> PgSelectSingle67
    PgClassExpression68{{"PgClassExpression[68∈6]<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle67 --> PgClassExpression68
    PgClassExpression71{{"PgClassExpression[71∈6]<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle67 --> PgClassExpression71
    Lambda72{{"Lambda[72∈6]<br />ᐸRelationalItem_typeNameFromTypeᐳ"}}:::plan
    PgClassExpression71 --> Lambda72
    PgClassExpression133{{"PgClassExpression[133∈6]<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle67 --> PgClassExpression133
    PgSelect74[["PgSelect[74∈8]<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object60 & PgClassExpression68 --> PgSelect74
    List115{{"List[115∈8]^<br />ᐸ113,114ᐳ<br />More deps:<br />- Constantᐸ'relational_topics'ᐳ[113]"}}:::plan
    PgClassExpression114{{"PgClassExpression[114∈8]^<br />ᐸ__relation...c_item_id”ᐳ"}}:::plan
    PgClassExpression114 --> List115
    First78{{"First[78∈8]^"}}:::plan
    PgSelectRows79[["PgSelectRows[79∈8]^"]]:::plan
    PgSelectRows79 --> First78
    PgSelect74 --> PgSelectRows79
    PgSelectSingle80{{"PgSelectSingle[80∈8]^<br />ᐸrelational_topicsᐳ"}}:::plan
    First78 --> PgSelectSingle80
    PgSelectSingle80 --> PgClassExpression114
    Lambda116{{"Lambda[116∈8]^<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List115 --> Lambda116
    PgSelect82[["PgSelect[82∈9]<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object60 & PgClassExpression68 --> PgSelect82
    List119{{"List[119∈9]^<br />ᐸ117,118ᐳ<br />More deps:<br />- Constantᐸ'relational_posts'ᐳ[117]"}}:::plan
    PgClassExpression118{{"PgClassExpression[118∈9]^<br />ᐸ__relation...t_item_id”ᐳ"}}:::plan
    PgClassExpression118 --> List119
    First86{{"First[86∈9]^"}}:::plan
    PgSelectRows87[["PgSelectRows[87∈9]^"]]:::plan
    PgSelectRows87 --> First86
    PgSelect82 --> PgSelectRows87
    PgSelectSingle88{{"PgSelectSingle[88∈9]^<br />ᐸrelational_postsᐳ"}}:::plan
    First86 --> PgSelectSingle88
    PgSelectSingle88 --> PgClassExpression118
    Lambda120{{"Lambda[120∈9]^<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List119 --> Lambda120
    PgSelect90[["PgSelect[90∈10]<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object60 & PgClassExpression68 --> PgSelect90
    List123{{"List[123∈10]^<br />ᐸ121,122ᐳ<br />More deps:<br />- Constantᐸ'relational_dividers'ᐳ[121]"}}:::plan
    PgClassExpression122{{"PgClassExpression[122∈10]^<br />ᐸ__relation...r_item_id”ᐳ"}}:::plan
    PgClassExpression122 --> List123
    First94{{"First[94∈10]^"}}:::plan
    PgSelectRows95[["PgSelectRows[95∈10]^"]]:::plan
    PgSelectRows95 --> First94
    PgSelect90 --> PgSelectRows95
    PgSelectSingle96{{"PgSelectSingle[96∈10]^<br />ᐸrelational_dividersᐳ"}}:::plan
    First94 --> PgSelectSingle96
    PgSelectSingle96 --> PgClassExpression122
    Lambda124{{"Lambda[124∈10]^<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List123 --> Lambda124
    PgSelect98[["PgSelect[98∈11]<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object60 & PgClassExpression68 --> PgSelect98
    List127{{"List[127∈11]^<br />ᐸ125,126ᐳ<br />More deps:<br />- Constantᐸ'relational_checklists'ᐳ[125]"}}:::plan
    PgClassExpression126{{"PgClassExpression[126∈11]^<br />ᐸ__relation...t_item_id”ᐳ"}}:::plan
    PgClassExpression126 --> List127
    First102{{"First[102∈11]^"}}:::plan
    PgSelectRows103[["PgSelectRows[103∈11]^"]]:::plan
    PgSelectRows103 --> First102
    PgSelect98 --> PgSelectRows103
    PgSelectSingle104{{"PgSelectSingle[104∈11]^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First102 --> PgSelectSingle104
    PgSelectSingle104 --> PgClassExpression126
    Lambda128{{"Lambda[128∈11]^<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List127 --> Lambda128
    PgSelect106[["PgSelect[106∈12]<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object60 & PgClassExpression68 --> PgSelect106
    List131{{"List[131∈12]^<br />ᐸ129,130ᐳ<br />More deps:<br />- Constantᐸ'relational_checklist_items'ᐳ[129]"}}:::plan
    PgClassExpression130{{"PgClassExpression[130∈12]^<br />ᐸ__relation...m_item_id”ᐳ"}}:::plan
    PgClassExpression130 --> List131
    First110{{"First[110∈12]^"}}:::plan
    PgSelectRows111[["PgSelectRows[111∈12]^"]]:::plan
    PgSelectRows111 --> First110
    PgSelect106 --> PgSelectRows111
    PgSelectSingle112{{"PgSelectSingle[112∈12]^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First110 --> PgSelectSingle112
    PgSelectSingle112 --> PgClassExpression130
    Lambda132{{"Lambda[132∈12]^<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List131 --> Lambda132

    %% define steps
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__InputObject6,Lambda9,Lambda13,List14,Object15,Lambda17,Object19,Lambda21,Object23,Lambda25,Object27,Lambda29,Object31,List32,Lambda33,Access34,PgSelect35,Access36,Access37,Object38,First39,PgSelectRows40,PgSelectSingle41,PgClassExpression42,PgFromExpression48,ApplyInput54,Access138 bucket0
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect44,First49,PgSelectRows50,PgSelectSingle51,PgClassExpression52,Object53 bucket1
    classDef bucket2 stroke:#7f007f
    class Bucket2,PgSelect57,Access58,Access59,Object60,Connection61,ConnectionItems63 bucket2
    classDef bucket3 stroke:#ffa500
    class Bucket3 bucket3
    classDef bucket4 stroke:#0000ff
    class Bucket4 bucket4
    classDef bucket6 stroke:#ff1493
    class Bucket6,__Item66,PgSelectSingle67,PgClassExpression68,PgClassExpression71,Lambda72,PgClassExpression133 bucket6
    classDef bucket7 stroke:#808000
    class Bucket7 bucket7
    classDef bucket8 stroke:#dda0dd
    class Bucket8,PgSelect74,First78,PgSelectRows79,PgSelectSingle80,PgClassExpression114,List115,Lambda116 bucket8
    classDef bucket9 stroke:#ff0000
    class Bucket9,PgSelect82,First86,PgSelectRows87,PgSelectSingle88,PgClassExpression118,List119,Lambda120 bucket9
    classDef bucket10 stroke:#ffff00
    class Bucket10,PgSelect90,First94,PgSelectRows95,PgSelectSingle96,PgClassExpression122,List123,Lambda124 bucket10
    classDef bucket11 stroke:#00ffff
    class Bucket11,PgSelect98,First102,PgSelectRows103,PgSelectSingle104,PgClassExpression126,List127,Lambda128 bucket11
    classDef bucket12 stroke:#4169e1
    class Bucket12,PgSelect106,First110,PgSelectRows111,PgSelectSingle112,PgClassExpression130,List131,Lambda132 bucket12

    %% implicit side effects
    PgSelect44 -.-o Access58
    PgSelect44 -.-o Access59

