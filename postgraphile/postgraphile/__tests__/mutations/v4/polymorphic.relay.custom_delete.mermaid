%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    __InputObject6{{"__InputObject[6∈0] ➊"}}:::plan
    Constant7{{"Constant[7∈0] ➊<br />ᐸundefinedᐳ"}}:::plan
    Constant118{{"Constant[118∈0] ➊<br />ᐸ'WyJyZWxhdGlvbmFsX3RvcGljcyIsMV0='ᐳ"}}:::plan
    Constant7 & Constant118 --> __InputObject6
    Object38{{"Object[38∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access36{{"Access[36∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access37{{"Access[37∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access36 & Access37 --> Object38
    Lambda9{{"Lambda[9∈0] ➊<br />ᐸdecodeNodeIdWithCodecsᐳ"}}:::plan
    Constant118 --> Lambda9
    List14{{"List[14∈0] ➊<br />ᐸ117ᐳ"}}:::plan
    Access117{{"Access[117∈0] ➊<br />ᐸ9.base64JSON.1ᐳ"}}:::plan
    Access117 --> List14
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access36
    __Value2 --> Access37
    ApplyInput52{{"ApplyInput[52∈0] ➊"}}:::plan
    __InputObject6 --> ApplyInput52
    ApplyInput63{{"ApplyInput[63∈0] ➊"}}:::plan
    Constant7 --> ApplyInput63
    Lambda9 --> Access117
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    Constant76{{"Constant[76∈0] ➊<br />ᐸ'relational_topics'ᐳ"}}:::plan
    Constant86{{"Constant[86∈0] ➊<br />ᐸ'relational_posts'ᐳ"}}:::plan
    Constant95{{"Constant[95∈0] ➊<br />ᐸ'relational_dividers'ᐳ"}}:::plan
    Constant104{{"Constant[104∈0] ➊<br />ᐸ'relational_checklists'ᐳ"}}:::plan
    Constant113{{"Constant[113∈0] ➊<br />ᐸ'relational_checklist_items'ᐳ"}}:::plan
    Constant119{{"Constant[119∈0] ➊<br />ᐸ1ᐳ"}}:::plan
    Constant122{{"Constant[122∈0] ➊<br />ᐸ[ 'PRIMARY_KEY_ASC' ]ᐳ"}}:::plan
    List32{{"List[32∈1] ➊<br />ᐸ15,19,23,27,31ᐳ"}}:::plan
    Object15{{"Object[15∈1] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object19{{"Object[19∈1] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object23{{"Object[23∈1] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object27{{"Object[27∈1] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object31{{"Object[31∈1] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object15 & Object19 & Object23 & Object27 & Object31 --> List32
    PgSelect43[["PgSelect[43∈1] ➊<br />ᐸcustom_delete_relational_item(mutation)ᐳ"]]:::sideeffectplan
    PgClassExpression42{{"PgClassExpression[42∈1] ➊<br />ᐸ__relational_items__ᐳ"}}:::plan
    Object38 & PgClassExpression42 & ApplyInput52 --> PgSelect43
    Lambda13[["Lambda[13∈1] ➊"]]:::unbatchedplan
    Lambda13 & List14 --> Object15
    Lambda17[["Lambda[17∈1] ➊"]]:::unbatchedplan
    Lambda17 & List14 --> Object19
    Lambda21[["Lambda[21∈1] ➊"]]:::unbatchedplan
    Lambda21 & List14 --> Object23
    Lambda25[["Lambda[25∈1] ➊"]]:::unbatchedplan
    Lambda25 & List14 --> Object27
    Lambda29[["Lambda[29∈1] ➊"]]:::unbatchedplan
    Lambda29 & List14 --> Object31
    PgSelect35[["PgSelect[35∈1] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Access34{{"Access[34∈1] ➊<br />ᐸ33.0ᐳ"}}:::plan
    Object38 & Access34 --> PgSelect35
    Lambda9 --> Lambda13
    Lambda9 --> Lambda17
    Lambda9 --> Lambda21
    Lambda9 --> Lambda25
    Lambda9 --> Lambda29
    Lambda33{{"Lambda[33∈1] ➊"}}:::plan
    List32 --> Lambda33
    Lambda33 --> Access34
    First39{{"First[39∈1] ➊"}}:::plan
    PgSelectRows40[["PgSelectRows[40∈1] ➊"]]:::plan
    PgSelectRows40 --> First39
    PgSelect35 --> PgSelectRows40
    PgSelectSingle41{{"PgSelectSingle[41∈1] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    First39 --> PgSelectSingle41
    PgSelectSingle41 --> PgClassExpression42
    First47{{"First[47∈1] ➊"}}:::plan
    PgSelectRows48[["PgSelectRows[48∈1] ➊"]]:::plan
    PgSelectRows48 --> First47
    PgSelect43 --> PgSelectRows48
    PgSelectSingle49{{"PgSelectSingle[49∈1] ➊<br />ᐸcustom_delete_relational_itemᐳ"}}:::plan
    First47 --> PgSelectSingle49
    PgClassExpression50{{"PgClassExpression[50∈1] ➊<br />ᐸ__custom_d...l_item__.vᐳ"}}:::plan
    PgSelectSingle49 --> PgClassExpression50
    Object51{{"Object[51∈1] ➊<br />ᐸ{result}ᐳ"}}:::plan
    PgClassExpression50 --> Object51
    Connection61{{"Connection[61∈2] ➊<br />ᐸ57ᐳ"}}:::plan
    Constant119 & Constant7 & Constant7 --> Connection61
    Lambda62{{"Lambda[62∈2] ➊<br />ᐸextractList_grafast_applyᐳ"}}:::plan
    Constant122 --> Lambda62
    PgSelect64[["PgSelect[64∈4] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object38 & Lambda62 & ApplyInput63 & Connection61 & Constant119 & Constant7 & Constant7 --> PgSelect64
    PgSelectRows65[["PgSelectRows[65∈4] ➊"]]:::plan
    PgSelect64 --> PgSelectRows65
    __Item66[/"__Item[66∈5]<br />ᐸ65ᐳ"\]:::itemplan
    PgSelectRows65 ==> __Item66
    PgSelectSingle67{{"PgSelectSingle[67∈5]<br />ᐸrelational_itemsᐳ"}}:::plan
    __Item66 --> PgSelectSingle67
    PgClassExpression68{{"PgClassExpression[68∈5]<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle67 --> PgClassExpression68
    PgClassExpression80{{"PgClassExpression[80∈5]<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle67 --> PgClassExpression80
    PgSelect69[["PgSelect[69∈6]<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object38 & PgClassExpression68 --> PgSelect69
    List78{{"List[78∈6]<br />ᐸ76,77ᐳ<br />ᐳRelationalTopic"}}:::plan
    PgClassExpression77{{"PgClassExpression[77∈6]<br />ᐸ__relation...c_item_id”ᐳ"}}:::plan
    Constant76 & PgClassExpression77 --> List78
    PgSelect81[["PgSelect[81∈6]<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object38 & PgClassExpression68 --> PgSelect81
    List88{{"List[88∈6]<br />ᐸ86,87ᐳ<br />ᐳRelationalPost"}}:::plan
    PgClassExpression87{{"PgClassExpression[87∈6]<br />ᐸ__relation...t_item_id”ᐳ"}}:::plan
    Constant86 & PgClassExpression87 --> List88
    PgSelect90[["PgSelect[90∈6]<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object38 & PgClassExpression68 --> PgSelect90
    List97{{"List[97∈6]<br />ᐸ95,96ᐳ<br />ᐳRelationalDivider"}}:::plan
    PgClassExpression96{{"PgClassExpression[96∈6]<br />ᐸ__relation...r_item_id”ᐳ"}}:::plan
    Constant95 & PgClassExpression96 --> List97
    PgSelect99[["PgSelect[99∈6]<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object38 & PgClassExpression68 --> PgSelect99
    List106{{"List[106∈6]<br />ᐸ104,105ᐳ<br />ᐳRelationalChecklist"}}:::plan
    PgClassExpression105{{"PgClassExpression[105∈6]<br />ᐸ__relation...t_item_id”ᐳ"}}:::plan
    Constant104 & PgClassExpression105 --> List106
    PgSelect108[["PgSelect[108∈6]<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object38 & PgClassExpression68 --> PgSelect108
    List115{{"List[115∈6]<br />ᐸ113,114ᐳ<br />ᐳRelationalChecklistItem"}}:::plan
    PgClassExpression114{{"PgClassExpression[114∈6]<br />ᐸ__relation...m_item_id”ᐳ"}}:::plan
    Constant113 & PgClassExpression114 --> List115
    First73{{"First[73∈6]"}}:::plan
    PgSelectRows74[["PgSelectRows[74∈6]"]]:::plan
    PgSelectRows74 --> First73
    PgSelect69 --> PgSelectRows74
    PgSelectSingle75{{"PgSelectSingle[75∈6]<br />ᐸrelational_topicsᐳ"}}:::plan
    First73 --> PgSelectSingle75
    PgSelectSingle75 --> PgClassExpression77
    Lambda79{{"Lambda[79∈6]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List78 --> Lambda79
    First83{{"First[83∈6]"}}:::plan
    PgSelectRows84[["PgSelectRows[84∈6]"]]:::plan
    PgSelectRows84 --> First83
    PgSelect81 --> PgSelectRows84
    PgSelectSingle85{{"PgSelectSingle[85∈6]<br />ᐸrelational_postsᐳ"}}:::plan
    First83 --> PgSelectSingle85
    PgSelectSingle85 --> PgClassExpression87
    Lambda89{{"Lambda[89∈6]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List88 --> Lambda89
    First92{{"First[92∈6]"}}:::plan
    PgSelectRows93[["PgSelectRows[93∈6]"]]:::plan
    PgSelectRows93 --> First92
    PgSelect90 --> PgSelectRows93
    PgSelectSingle94{{"PgSelectSingle[94∈6]<br />ᐸrelational_dividersᐳ"}}:::plan
    First92 --> PgSelectSingle94
    PgSelectSingle94 --> PgClassExpression96
    Lambda98{{"Lambda[98∈6]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List97 --> Lambda98
    First101{{"First[101∈6]"}}:::plan
    PgSelectRows102[["PgSelectRows[102∈6]"]]:::plan
    PgSelectRows102 --> First101
    PgSelect99 --> PgSelectRows102
    PgSelectSingle103{{"PgSelectSingle[103∈6]<br />ᐸrelational_checklistsᐳ"}}:::plan
    First101 --> PgSelectSingle103
    PgSelectSingle103 --> PgClassExpression105
    Lambda107{{"Lambda[107∈6]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List106 --> Lambda107
    First110{{"First[110∈6]"}}:::plan
    PgSelectRows111[["PgSelectRows[111∈6]"]]:::plan
    PgSelectRows111 --> First110
    PgSelect108 --> PgSelectRows111
    PgSelectSingle112{{"PgSelectSingle[112∈6]<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First110 --> PgSelectSingle112
    PgSelectSingle112 --> PgClassExpression114
    Lambda116{{"Lambda[116∈6]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List115 --> Lambda116

    %% define steps

    subgraph "Buckets for mutations/v4/polymorphic.relay.custom_delete"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,__InputObject6,Constant7,Lambda9,List14,Access36,Access37,Object38,ApplyInput52,ApplyInput63,Constant76,Constant86,Constant95,Constant104,Constant113,Access117,Constant118,Constant119,Constant122 bucket0
    Bucket1("Bucket 1 (mutationField)<br />Deps: 9, 14, 38, 52, 119, 7, 122, 4, 63, 76, 86, 95, 104, 113<br /><br />1: Lambda[13]<br />2: Object[15]<br />3: Lambda[17]<br />4: Object[19]<br />5: Lambda[21]<br />6: Object[23]<br />7: Lambda[25]<br />8: Object[27]<br />9: Lambda[29]<br />10: Object[31]<br />11: List[32]<br />12: Lambda[33]<br />13: Access[34]<br />14: PgSelect[35]<br />15: PgSelectRows[40]<br />16: First[39]<br />17: PgSelectSingle[41]<br />18: PgClassExpression[42]<br />19: PgSelect[43]<br />20: PgSelectRows[48]<br />ᐳ: 47, 49, 50, 51"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,Lambda13,Object15,Lambda17,Object19,Lambda21,Object23,Lambda25,Object27,Lambda29,Object31,List32,Lambda33,Access34,PgSelect35,First39,PgSelectRows40,PgSelectSingle41,PgClassExpression42,PgSelect43,First47,PgSelectRows48,PgSelectSingle49,PgClassExpression50,Object51 bucket1
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 119, 7, 122, 51, 4, 38, 63, 76, 86, 95, 104, 113, 50<br /><br />ROOT Object{1}ᐸ{result}ᐳ[51]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,Connection61,Lambda62 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 4, 38, 62, 63, 61, 119, 7, 76, 86, 95, 104, 113<br /><br />ROOT __ValueᐸrootValueᐳ[4]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3 bucket3
    Bucket4("Bucket 4 (nullableBoundary)<br />Deps: 38, 62, 63, 61, 119, 7, 76, 86, 95, 104, 113<br /><br />ROOT Connection{2}ᐸ57ᐳ[61]<br />1: PgSelect[64]<br />2: PgSelectRows[65]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect64,PgSelectRows65 bucket4
    Bucket5("Bucket 5 (listItem)<br />Deps: 38, 76, 86, 95, 104, 113<br /><br />ROOT __Item{5}ᐸ65ᐳ[66]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,__Item66,PgSelectSingle67,PgClassExpression68,PgClassExpression80 bucket5
    Bucket6("Bucket 6 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 38, 68, 76, 86, 95, 104, 113, 67, 80<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: 69, 81, 90, 99, 108<br />2: 74, 84, 93, 102, 111<br />ᐳ: 73, 75, 77, 78, 79, 83, 85, 87, 88, 89, 92, 94, 96, 97, 98, 101, 103, 105, 106, 107, 110, 112, 114, 115, 116"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgSelect69,First73,PgSelectRows74,PgSelectSingle75,PgClassExpression77,List78,Lambda79,PgSelect81,First83,PgSelectRows84,PgSelectSingle85,PgClassExpression87,List88,Lambda89,PgSelect90,First92,PgSelectRows93,PgSelectSingle94,PgClassExpression96,List97,Lambda98,PgSelect99,First101,PgSelectRows102,PgSelectSingle103,PgClassExpression105,List106,Lambda107,PgSelect108,First110,PgSelectRows111,PgSelectSingle112,PgClassExpression114,List115,Lambda116 bucket6
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4
    Bucket4 --> Bucket5
    Bucket5 --> Bucket6
    end
