%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left

    subgraph "Buckets for mutations/v4/polymorphic.relay.custom_delete"
    Bucket0("Bucket 0 (root)"):::bucket
    Bucket1("Bucket 1 (mutationField)<br />Deps: 9, 14, 38, 53, 137, 4, 110, 114, 118, 122, 126<br /><br />1: Lambda[13]<br />2: Object[15]<br />3: Lambda[17]<br />4: Object[19]<br />5: Lambda[21]<br />6: Object[23]<br />7: Lambda[25]<br />8: Object[27]<br />9: Lambda[29]<br />10: Object[31]<br />11: List[32]<br />12: Lambda[33]<br />13: Access[34]<br />14: PgSelect[35]<br />15: PgSelectRows[40]<br />16: First[39]<br />17: PgSelectSingle[41]<br />18: PgClassExpression[42]<br />19: PgFromExpression[47]<br />20: PgSelect[43]<br />21: PgSelectRows[49]<br />ᐳ: 48, 50, 51, 52"):::bucket
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 137, 52, 4, 38, 110, 114, 118, 122, 126, 51<br /><br />ROOT Object{1}ᐸ{result}ᐳ[52]"):::bucket
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 4, 38, 60, 137, 110, 114, 118, 122, 126<br /><br />ROOT __ValueᐸrootValueᐳ[4]"):::bucket
    Bucket4("Bucket 4 (nullableBoundary)<br />Deps: 38, 60, 137, 110, 114, 118, 122, 126<br /><br />ROOT Connection{2}ᐸ56ᐳ[60]<br />1: PgSelect[62]<br />2: PgSelectRows[63]"):::bucket
    Bucket5("Bucket 5 (listItem)<br />Deps: 38, 110, 114, 118, 122, 126<br /><br />ROOT __Item{5}ᐸ63ᐳ[64]"):::bucket
    Bucket6("Bucket 6 (polymorphic)<br />__typename: Lambda[69]<br />Deps: 69, 38, 66, 110, 114, 118, 122, 126, 68"):::bucket
    Bucket7("Bucket 7 (polymorphicPartition)<br />|RelationalTopic<br />Deps: 38, 66, 110, 68<br />ᐳRelationalTopic<br /><br />1: PgSelect[71]<br />2: PgSelectRows[76]<br />ᐳ: 75, 77, 111, 112, 113"):::bucket
    Bucket8("Bucket 8 (polymorphicPartition)<br />|RelationalPost<br />Deps: 38, 66, 114, 68<br />ᐳRelationalPost<br /><br />1: PgSelect[79]<br />2: PgSelectRows[84]<br />ᐳ: 83, 85, 115, 116, 117"):::bucket
    Bucket9("Bucket 9 (polymorphicPartition)<br />|RelationalDivider<br />Deps: 38, 66, 118, 68<br />ᐳRelationalDivider<br /><br />1: PgSelect[87]<br />2: PgSelectRows[92]<br />ᐳ: 91, 93, 119, 120, 121"):::bucket
    Bucket10("Bucket 10 (polymorphicPartition)<br />|RelationalChecklist<br />Deps: 38, 66, 122, 68<br />ᐳRelationalChecklist<br /><br />1: PgSelect[95]<br />2: PgSelectRows[100]<br />ᐳ: 99, 101, 123, 124, 125"):::bucket
    Bucket11("Bucket 11 (polymorphicPartition)<br />|RelationalChecklistItem<br />Deps: 38, 66, 126, 68<br />ᐳRelationalChecklistItem<br /><br />1: PgSelect[103]<br />2: PgSelectRows[108]<br />ᐳ: 107, 109, 127, 128, 129"):::bucket
    end
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4
    Bucket4 --> Bucket5
    Bucket5 --> Bucket6
    Bucket6 --> Bucket7 & Bucket8 & Bucket9 & Bucket10 & Bucket11

    %% plan dependencies
    __InputObject6{{"__InputObject[6∈0] ➊"}}:::plan
    Constant136{{"Constant[136∈0] ➊<br />ᐸ'WyJyZWxhdGlvbmFsX3RvcGljcyIsMV0='ᐳ"}}:::plan
    Constant136 --> __InputObject6
    Object38{{"Object[38∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access36{{"Access[36∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access37{{"Access[37∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access36 & Access37 --> Object38
    Lambda9{{"Lambda[9∈0] ➊<br />ᐸdecodeNodeIdWithCodecsᐳ"}}:::plan
    Constant136 --> Lambda9
    List14{{"List[14∈0] ➊<br />ᐸ135ᐳ"}}:::plan
    Access135{{"Access[135∈0] ➊<br />ᐸ9.base64JSON.1ᐳ"}}:::plan
    Access135 -->|rejectNull| List14
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access36
    __Value2 --> Access37
    ApplyInput53{{"ApplyInput[53∈0] ➊"}}:::plan
    __InputObject6 --> ApplyInput53
    Lambda9 --> Access135
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    Constant110{{"Constant[110∈0] ➊<br />ᐸ'relational_topics'ᐳ"}}:::plan
    Constant114{{"Constant[114∈0] ➊<br />ᐸ'relational_posts'ᐳ"}}:::plan
    Constant118{{"Constant[118∈0] ➊<br />ᐸ'relational_dividers'ᐳ"}}:::plan
    Constant122{{"Constant[122∈0] ➊<br />ᐸ'relational_checklists'ᐳ"}}:::plan
    Constant126{{"Constant[126∈0] ➊<br />ᐸ'relational_checklist_items'ᐳ"}}:::plan
    Constant137{{"Constant[137∈0] ➊<br />ᐸ1ᐳ"}}:::plan
    List32{{"List[32∈1] ➊<br />ᐸ15,19,23,27,31ᐳ"}}:::plan
    Object15{{"Object[15∈1] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object19{{"Object[19∈1] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object23{{"Object[23∈1] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object27{{"Object[27∈1] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object31{{"Object[31∈1] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object15 & Object19 & Object23 & Object27 & Object31 --> List32
    PgSelect43[["PgSelect[43∈1] ➊<br />ᐸcustom_delete_relational_item(mutation)ᐳ"]]:::sideeffectplan
    PgFromExpression47{{"PgFromExpression[47∈1] ➊"}}:::plan
    Object38 & PgFromExpression47 & ApplyInput53 --> PgSelect43
    Lambda13[["Lambda[13∈1] ➊"]]:::unbatchedplan
    Lambda13 & List14 --> Object15
    Lambda17[["Lambda[17∈1] ➊"]]:::unbatchedplan
    Lambda17 & List14 --> Object19
    Lambda21[["Lambda[21∈1] ➊"]]:::unbatchedplan
    Lambda21 & List14 --> Object23
    Lambda25[["Lambda[25∈1] ➊"]]:::unbatchedplan
    Lambda25 & List14 --> Object27
    Lambda29[["Lambda[29∈1] ➊"]]:::unbatchedplan
    Lambda29 & List14 --> Object31
    PgSelect35[["PgSelect[35∈1] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Access34{{"Access[34∈1] ➊<br />ᐸ33.0ᐳ"}}:::plan
    Object38 & Access34 --> PgSelect35
    Lambda9 --> Lambda13
    Lambda9 --> Lambda17
    Lambda9 --> Lambda21
    Lambda9 --> Lambda25
    Lambda9 --> Lambda29
    Lambda33{{"Lambda[33∈1] ➊"}}:::plan
    List32 --> Lambda33
    Lambda33 --> Access34
    First39{{"First[39∈1] ➊"}}:::plan
    PgSelectRows40[["PgSelectRows[40∈1] ➊"]]:::plan
    PgSelectRows40 --> First39
    PgSelect35 --> PgSelectRows40
    PgSelectSingle41{{"PgSelectSingle[41∈1] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    First39 --> PgSelectSingle41
    PgClassExpression42{{"PgClassExpression[42∈1] ➊<br />ᐸ__relational_items__ᐳ"}}:::plan
    PgSelectSingle41 --> PgClassExpression42
    PgClassExpression42 --> PgFromExpression47
    First48{{"First[48∈1] ➊"}}:::plan
    PgSelectRows49[["PgSelectRows[49∈1] ➊"]]:::plan
    PgSelectRows49 --> First48
    PgSelect43 --> PgSelectRows49
    PgSelectSingle50{{"PgSelectSingle[50∈1] ➊<br />ᐸcustom_delete_relational_itemᐳ"}}:::plan
    First48 --> PgSelectSingle50
    PgClassExpression51{{"PgClassExpression[51∈1] ➊<br />ᐸ__custom_d...l_item__.vᐳ"}}:::plan
    PgSelectSingle50 --> PgClassExpression51
    Object52{{"Object[52∈1] ➊<br />ᐸ{result}ᐳ"}}:::plan
    PgClassExpression51 --> Object52
    Connection60{{"Connection[60∈2] ➊<br />ᐸ56ᐳ"}}:::plan
    Constant137 --> Connection60
    PgSelect62[["PgSelect[62∈4] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object38 & Connection60 & Constant137 --> PgSelect62
    PgSelectRows63[["PgSelectRows[63∈4] ➊"]]:::plan
    PgSelect62 --> PgSelectRows63
    __Item64[/"__Item[64∈5]<br />ᐸ63ᐳ"\]:::itemplan
    PgSelectRows63 ==> __Item64
    PgSelectSingle65{{"PgSelectSingle[65∈5]<br />ᐸrelational_itemsᐳ"}}:::plan
    __Item64 --> PgSelectSingle65
    PgClassExpression66{{"PgClassExpression[66∈5]<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle65 --> PgClassExpression66
    PgClassExpression68{{"PgClassExpression[68∈5]<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle65 --> PgClassExpression68
    Lambda69{{"Lambda[69∈5]<br />ᐸRelationalItem_typeNameFromTypeᐳ"}}:::plan
    PgClassExpression68 --> Lambda69
    PgSelect71[["PgSelect[71∈7]<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object38 & PgClassExpression66 --> PgSelect71
    List112{{"List[112∈7]^<br />ᐸ110,111ᐳ"}}:::plan
    PgClassExpression111{{"PgClassExpression[111∈7]^<br />ᐸ__relation...c_item_id”ᐳ"}}:::plan
    Constant110 & PgClassExpression111 --> List112
    First75{{"First[75∈7]^"}}:::plan
    PgSelectRows76[["PgSelectRows[76∈7]^"]]:::plan
    PgSelectRows76 --> First75
    PgSelect71 --> PgSelectRows76
    PgSelectSingle77{{"PgSelectSingle[77∈7]^<br />ᐸrelational_topicsᐳ"}}:::plan
    First75 --> PgSelectSingle77
    PgSelectSingle77 --> PgClassExpression111
    Lambda113{{"Lambda[113∈7]^<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List112 --> Lambda113
    PgSelect79[["PgSelect[79∈8]<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object38 & PgClassExpression66 --> PgSelect79
    List116{{"List[116∈8]^<br />ᐸ114,115ᐳ"}}:::plan
    PgClassExpression115{{"PgClassExpression[115∈8]^<br />ᐸ__relation...t_item_id”ᐳ"}}:::plan
    Constant114 & PgClassExpression115 --> List116
    First83{{"First[83∈8]^"}}:::plan
    PgSelectRows84[["PgSelectRows[84∈8]^"]]:::plan
    PgSelectRows84 --> First83
    PgSelect79 --> PgSelectRows84
    PgSelectSingle85{{"PgSelectSingle[85∈8]^<br />ᐸrelational_postsᐳ"}}:::plan
    First83 --> PgSelectSingle85
    PgSelectSingle85 --> PgClassExpression115
    Lambda117{{"Lambda[117∈8]^<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List116 --> Lambda117
    PgSelect87[["PgSelect[87∈9]<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object38 & PgClassExpression66 --> PgSelect87
    List120{{"List[120∈9]^<br />ᐸ118,119ᐳ"}}:::plan
    PgClassExpression119{{"PgClassExpression[119∈9]^<br />ᐸ__relation...r_item_id”ᐳ"}}:::plan
    Constant118 & PgClassExpression119 --> List120
    First91{{"First[91∈9]^"}}:::plan
    PgSelectRows92[["PgSelectRows[92∈9]^"]]:::plan
    PgSelectRows92 --> First91
    PgSelect87 --> PgSelectRows92
    PgSelectSingle93{{"PgSelectSingle[93∈9]^<br />ᐸrelational_dividersᐳ"}}:::plan
    First91 --> PgSelectSingle93
    PgSelectSingle93 --> PgClassExpression119
    Lambda121{{"Lambda[121∈9]^<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List120 --> Lambda121
    PgSelect95[["PgSelect[95∈10]<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object38 & PgClassExpression66 --> PgSelect95
    List124{{"List[124∈10]^<br />ᐸ122,123ᐳ"}}:::plan
    PgClassExpression123{{"PgClassExpression[123∈10]^<br />ᐸ__relation...t_item_id”ᐳ"}}:::plan
    Constant122 & PgClassExpression123 --> List124
    First99{{"First[99∈10]^"}}:::plan
    PgSelectRows100[["PgSelectRows[100∈10]^"]]:::plan
    PgSelectRows100 --> First99
    PgSelect95 --> PgSelectRows100
    PgSelectSingle101{{"PgSelectSingle[101∈10]^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First99 --> PgSelectSingle101
    PgSelectSingle101 --> PgClassExpression123
    Lambda125{{"Lambda[125∈10]^<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List124 --> Lambda125
    PgSelect103[["PgSelect[103∈11]<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object38 & PgClassExpression66 --> PgSelect103
    List128{{"List[128∈11]^<br />ᐸ126,127ᐳ"}}:::plan
    PgClassExpression127{{"PgClassExpression[127∈11]^<br />ᐸ__relation...m_item_id”ᐳ"}}:::plan
    Constant126 & PgClassExpression127 --> List128
    First107{{"First[107∈11]^"}}:::plan
    PgSelectRows108[["PgSelectRows[108∈11]^"]]:::plan
    PgSelectRows108 --> First107
    PgSelect103 --> PgSelectRows108
    PgSelectSingle109{{"PgSelectSingle[109∈11]^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First107 --> PgSelectSingle109
    PgSelectSingle109 --> PgClassExpression127
    Lambda129{{"Lambda[129∈11]^<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List128 --> Lambda129

    %% define steps
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,__InputObject6,Lambda9,List14,Access36,Access37,Object38,ApplyInput53,Constant110,Constant114,Constant118,Constant122,Constant126,Access135,Constant136,Constant137 bucket0
    classDef bucket1 stroke:#00bfff
    class Bucket1,Lambda13,Object15,Lambda17,Object19,Lambda21,Object23,Lambda25,Object27,Lambda29,Object31,List32,Lambda33,Access34,PgSelect35,First39,PgSelectRows40,PgSelectSingle41,PgClassExpression42,PgSelect43,PgFromExpression47,First48,PgSelectRows49,PgSelectSingle50,PgClassExpression51,Object52 bucket1
    classDef bucket2 stroke:#7f007f
    class Bucket2,Connection60 bucket2
    classDef bucket3 stroke:#ffa500
    class Bucket3 bucket3
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect62,PgSelectRows63 bucket4
    classDef bucket5 stroke:#7fff00
    class Bucket5,__Item64,PgSelectSingle65,PgClassExpression66,PgClassExpression68,Lambda69 bucket5
    classDef bucket6 stroke:#ff1493
    class Bucket6 bucket6
    classDef bucket7 stroke:#808000
    class Bucket7,PgSelect71,First75,PgSelectRows76,PgSelectSingle77,PgClassExpression111,List112,Lambda113 bucket7
    classDef bucket8 stroke:#dda0dd
    class Bucket8,PgSelect79,First83,PgSelectRows84,PgSelectSingle85,PgClassExpression115,List116,Lambda117 bucket8
    classDef bucket9 stroke:#ff0000
    class Bucket9,PgSelect87,First91,PgSelectRows92,PgSelectSingle93,PgClassExpression119,List120,Lambda121 bucket9
    classDef bucket10 stroke:#ffff00
    class Bucket10,PgSelect95,First99,PgSelectRows100,PgSelectSingle101,PgClassExpression123,List124,Lambda125 bucket10
    classDef bucket11 stroke:#00ffff
    class Bucket11,PgSelect103,First107,PgSelectRows108,PgSelectSingle109,PgClassExpression127,List128,Lambda129 bucket11

