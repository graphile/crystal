%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left

    subgraph "Buckets for mutations/v4/polymorphic.relay.custom_delete"
    Bucket0("Bucket 0 (root)<br /><br />1: <br />ᐳ: 7, 36, 37, 111, 115, 119, 123, 127, 157, 158, 6, 9, 38, 54, 156, 14<br />2: 13, 17, 21, 25, 29<br />ᐳ: 15, 19, 23, 27, 31, 32, 33, 34<br />3: PgSelect[35]<br />4: PgSelectRows[40]<br />ᐳ: 39, 41, 42, 48"):::bucket
    Bucket1("Bucket 1 (mutationField)<br />Deps: 38, 48, 54, 158, 4, 111, 115, 119, 123, 127<br /><br />1: PgSelect[44]<br />2: PgSelectRows[50]<br />ᐳ: 49, 51, 52, 53"):::bucket
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 158, 53, 4, 38, 111, 115, 119, 123, 127, 52<br /><br />ROOT Object{1}ᐸ{result}ᐳ[53]"):::bucket
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 4, 38, 61, 158, 136, 140, 144, 148, 152, 111, 115, 119, 123, 127<br /><br />ROOT __ValueᐸrootValueᐳ[4]"):::bucket
    Bucket4("Bucket 4 (nullableBoundary)<br />Deps: 38, 61, 158, 136, 140, 144, 148, 152, 111, 115, 119, 123, 127<br /><br />ROOT Connection{2}ᐸ57ᐳ[61]<br />1: PgSelect[63]<br />2: PgSelectRows[64]"):::bucket
    Bucket5("Bucket 5 (listItem)<br />Deps: 111, 115, 119, 123, 127, 63<br /><br />ROOT __Item{5}ᐸ64ᐳ[65]"):::bucket
    Bucket6("Bucket 6 (polymorphic)<br />__typename: Lambda[70]<br />Deps: 111, 115, 119, 123, 127, 63, 66, 70, 69<br /><br />1: 137, 141, 145, 149, 153<br />ᐳ: 138, 139, 142, 143, 146, 147, 150, 151, 154, 155<br />2: 77, 85, 93, 101, 109<br />ᐳ: 76, 78, 84, 86, 92, 94, 100, 102, 108, 110, 112, 113, 114, 116, 117, 118, 120, 121, 122, 124, 125, 126, 128, 129, 130"):::bucket
    Bucket7("Bucket 7 (polymorphicPartition)<br />|"):::bucket
    end
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4
    Bucket4 --> Bucket5
    Bucket5 --> Bucket6
    Bucket6 --> Bucket7

    %% plan dependencies
    List32{{"List[32∈0] ➊<br />ᐸ15,19,23,27,31ᐳ"}}:::plan
    Object15{{"Object[15∈0] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object19{{"Object[19∈0] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object23{{"Object[23∈0] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object27{{"Object[27∈0] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object31{{"Object[31∈0] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object15 & Object19 & Object23 & Object27 & Object31 --> List32
    __InputObject6{{"__InputObject[6∈0] ➊<br />More deps:<br />- Constantᐸundefinedᐳ[7]<br />- Constantᐸ'WyJyZWxhdGlvbmFsX3RvcGljcyIsMV0='ᐳ[157]"}}:::plan
    Lambda13[["Lambda[13∈0] ➊"]]:::unbatchedplan
    List14{{"List[14∈0] ➊<br />ᐸ156ᐳ"}}:::plan
    Lambda13 & List14 --> Object15
    Lambda17[["Lambda[17∈0] ➊"]]:::unbatchedplan
    Lambda17 & List14 --> Object19
    Lambda21[["Lambda[21∈0] ➊"]]:::unbatchedplan
    Lambda21 & List14 --> Object23
    Lambda25[["Lambda[25∈0] ➊"]]:::unbatchedplan
    Lambda25 & List14 --> Object27
    Lambda29[["Lambda[29∈0] ➊"]]:::unbatchedplan
    Lambda29 & List14 --> Object31
    PgSelect35[["PgSelect[35∈0] ➊<br />ᐸrelational_itemsᐳ<br />More deps:<br />- Object[38]"]]:::plan
    Access34{{"Access[34∈0] ➊<br />ᐸ33.0ᐳ"}}:::plan
    Access34 --> PgSelect35
    Object38{{"Object[38∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ<br />Dependents: 3"}}:::plan
    Access36{{"Access[36∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access37{{"Access[37∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access36 & Access37 --> Object38
    Lambda9{{"Lambda[9∈0] ➊<br />ᐸdecodeNodeIdWithCodecsᐳ<br />More deps:<br />- Constantᐸ'WyJyZWxhdGlvbmFsX3RvcGljcyIsMV0='ᐳ[157]"}}:::plan
    Lambda9 --> Lambda13
    Access156{{"Access[156∈0] ➊<br />ᐸ9.base64JSON.1ᐳ"}}:::plan
    Access156 -->|rejectNull| List14
    Lambda9 --> Lambda17
    Lambda9 --> Lambda21
    Lambda9 --> Lambda25
    Lambda9 --> Lambda29
    Lambda33{{"Lambda[33∈0] ➊"}}:::plan
    List32 --> Lambda33
    Lambda33 --> Access34
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access36
    __Value2 --> Access37
    First39{{"First[39∈0] ➊"}}:::plan
    PgSelectRows40[["PgSelectRows[40∈0] ➊"]]:::plan
    PgSelectRows40 --> First39
    PgSelect35 --> PgSelectRows40
    PgSelectSingle41{{"PgSelectSingle[41∈0] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    First39 --> PgSelectSingle41
    PgClassExpression42{{"PgClassExpression[42∈0] ➊<br />ᐸ__relational_items__ᐳ"}}:::plan
    PgSelectSingle41 --> PgClassExpression42
    PgFromExpression48{{"PgFromExpression[48∈0] ➊"}}:::plan
    PgClassExpression42 -->|trapInhibited| PgFromExpression48
    ApplyInput54{{"ApplyInput[54∈0] ➊"}}:::plan
    __InputObject6 --> ApplyInput54
    Lambda9 --> Access156
    PgSelect44[["PgSelect[44∈1] ➊<br />ᐸcustom_delete_relational_item(mutation)ᐳ<br />More deps:<br />- Object[38]"]]:::sideeffectplan
    PgFromExpression48 & ApplyInput54 --> PgSelect44
    First49{{"First[49∈1] ➊"}}:::plan
    PgSelectRows50[["PgSelectRows[50∈1] ➊"]]:::plan
    PgSelectRows50 --> First49
    PgSelect44 --> PgSelectRows50
    PgSelectSingle51{{"PgSelectSingle[51∈1] ➊<br />ᐸcustom_delete_relational_itemᐳ"}}:::plan
    First49 --> PgSelectSingle51
    PgClassExpression52{{"PgClassExpression[52∈1] ➊<br />ᐸ__custom_d...l_item__.vᐳ"}}:::plan
    PgSelectSingle51 --> PgClassExpression52
    Object53{{"Object[53∈1] ➊<br />ᐸ{result}ᐳ"}}:::plan
    PgClassExpression52 --> Object53
    Connection61{{"Connection[61∈2] ➊<br />ᐸ57ᐳ<br />More deps:<br />- Constantᐸ1ᐳ[158]"}}:::plan
    PgSelectInlineApply136["PgSelectInlineApply[136∈2] ➊"]:::plan
    PgSelectInlineApply140["PgSelectInlineApply[140∈2] ➊"]:::plan
    PgSelectInlineApply144["PgSelectInlineApply[144∈2] ➊"]:::plan
    PgSelectInlineApply148["PgSelectInlineApply[148∈2] ➊"]:::plan
    PgSelectInlineApply152["PgSelectInlineApply[152∈2] ➊"]:::plan
    PgSelect63[["PgSelect[63∈4] ➊<br />ᐸrelational_itemsᐳ<br />More deps:<br />- Object[38]<br />- Constantᐸ1ᐳ[158]"]]:::plan
    Connection61 & PgSelectInlineApply136 & PgSelectInlineApply140 & PgSelectInlineApply144 & PgSelectInlineApply148 & PgSelectInlineApply152 --> PgSelect63
    PgSelectRows64[["PgSelectRows[64∈4] ➊"]]:::plan
    PgSelect63 --> PgSelectRows64
    __Item65[/"__Item[65∈5]<br />ᐸ64ᐳ"\]:::itemplan
    PgSelectRows64 ==> __Item65
    PgSelectSingle66{{"PgSelectSingle[66∈5]<br />ᐸrelational_itemsᐳ"}}:::plan
    __Item65 --> PgSelectSingle66
    PgClassExpression69{{"PgClassExpression[69∈5]<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle66 --> PgClassExpression69
    Lambda70{{"Lambda[70∈5]<br />ᐸRelationalItem_typeNameFromTypeᐳ"}}:::plan
    PgClassExpression69 --> Lambda70
    List113{{"List[113∈6]^<br />ᐸ111,112ᐳ<br />More deps:<br />- Constantᐸ'relational_topics'ᐳ[111]"}}:::plan
    PgClassExpression112{{"PgClassExpression[112∈6]^<br />ᐸ__relation...c_item_id”ᐳ"}}:::plan
    PgClassExpression112 --> List113
    List117{{"List[117∈6]^<br />ᐸ115,116ᐳ<br />More deps:<br />- Constantᐸ'relational_posts'ᐳ[115]"}}:::plan
    PgClassExpression116{{"PgClassExpression[116∈6]^<br />ᐸ__relation...t_item_id”ᐳ"}}:::plan
    PgClassExpression116 --> List117
    List121{{"List[121∈6]^<br />ᐸ119,120ᐳ<br />More deps:<br />- Constantᐸ'relational_dividers'ᐳ[119]"}}:::plan
    PgClassExpression120{{"PgClassExpression[120∈6]^<br />ᐸ__relation...r_item_id”ᐳ"}}:::plan
    PgClassExpression120 --> List121
    List125{{"List[125∈6]^<br />ᐸ123,124ᐳ<br />More deps:<br />- Constantᐸ'relational_checklists'ᐳ[123]"}}:::plan
    PgClassExpression124{{"PgClassExpression[124∈6]^<br />ᐸ__relation...t_item_id”ᐳ"}}:::plan
    PgClassExpression124 --> List125
    List129{{"List[129∈6]^<br />ᐸ127,128ᐳ<br />More deps:<br />- Constantᐸ'relational_checklist_items'ᐳ[127]"}}:::plan
    PgClassExpression128{{"PgClassExpression[128∈6]^<br />ᐸ__relation...m_item_id”ᐳ"}}:::plan
    PgClassExpression128 --> List129
    List138{{"List[138∈6]^<br />ᐸ137,66ᐳ"}}:::plan
    Access137{{"Access[137∈6] ➊<br />ᐸ63.m.joinDetailsFor72ᐳ<br />ᐳRelationalTopic"}}:::plan
    Access137 & PgSelectSingle66 --> List138
    List142{{"List[142∈6]^<br />ᐸ141,66ᐳ"}}:::plan
    Access141{{"Access[141∈6] ➊<br />ᐸ63.m.joinDetailsFor80ᐳ<br />ᐳRelationalPost"}}:::plan
    Access141 & PgSelectSingle66 --> List142
    List146{{"List[146∈6]^<br />ᐸ145,66ᐳ"}}:::plan
    Access145{{"Access[145∈6] ➊<br />ᐸ63.m.joinDetailsFor88ᐳ<br />ᐳRelationalDivider"}}:::plan
    Access145 & PgSelectSingle66 --> List146
    List150{{"List[150∈6]^<br />ᐸ149,66ᐳ"}}:::plan
    Access149{{"Access[149∈6] ➊<br />ᐸ63.m.joinDetailsFor96ᐳ<br />ᐳRelationalChecklist"}}:::plan
    Access149 & PgSelectSingle66 --> List150
    List154{{"List[154∈6]^<br />ᐸ153,66ᐳ"}}:::plan
    Access153{{"Access[153∈6] ➊<br />ᐸ63.m.joinDetailsFor104ᐳ<br />ᐳRelationalChecklistItem"}}:::plan
    Access153 & PgSelectSingle66 --> List154
    First76{{"First[76∈6]^"}}:::plan
    PgSelectRows77[["PgSelectRows[77∈6]^"]]:::plan
    PgSelectRows77 --> First76
    Lambda139{{"Lambda[139∈6]^<br />ᐸpgInlineViaJoinTransformᐳ"}}:::plan
    Lambda139 --> PgSelectRows77
    PgSelectSingle78{{"PgSelectSingle[78∈6]^<br />ᐸrelational_topicsᐳ"}}:::plan
    First76 --> PgSelectSingle78
    First84{{"First[84∈6]^"}}:::plan
    PgSelectRows85[["PgSelectRows[85∈6]^"]]:::plan
    PgSelectRows85 --> First84
    Lambda143{{"Lambda[143∈6]^<br />ᐸpgInlineViaJoinTransformᐳ"}}:::plan
    Lambda143 --> PgSelectRows85
    PgSelectSingle86{{"PgSelectSingle[86∈6]^<br />ᐸrelational_postsᐳ"}}:::plan
    First84 --> PgSelectSingle86
    First92{{"First[92∈6]^"}}:::plan
    PgSelectRows93[["PgSelectRows[93∈6]^"]]:::plan
    PgSelectRows93 --> First92
    Lambda147{{"Lambda[147∈6]^<br />ᐸpgInlineViaJoinTransformᐳ"}}:::plan
    Lambda147 --> PgSelectRows93
    PgSelectSingle94{{"PgSelectSingle[94∈6]^<br />ᐸrelational_dividersᐳ"}}:::plan
    First92 --> PgSelectSingle94
    First100{{"First[100∈6]^"}}:::plan
    PgSelectRows101[["PgSelectRows[101∈6]^"]]:::plan
    PgSelectRows101 --> First100
    Lambda151{{"Lambda[151∈6]^<br />ᐸpgInlineViaJoinTransformᐳ"}}:::plan
    Lambda151 --> PgSelectRows101
    PgSelectSingle102{{"PgSelectSingle[102∈6]^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First100 --> PgSelectSingle102
    First108{{"First[108∈6]^"}}:::plan
    PgSelectRows109[["PgSelectRows[109∈6]^"]]:::plan
    PgSelectRows109 --> First108
    Lambda155{{"Lambda[155∈6]^<br />ᐸpgInlineViaJoinTransformᐳ"}}:::plan
    Lambda155 --> PgSelectRows109
    PgSelectSingle110{{"PgSelectSingle[110∈6]^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First108 --> PgSelectSingle110
    PgSelectSingle78 --> PgClassExpression112
    Lambda114{{"Lambda[114∈6]^<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List113 --> Lambda114
    PgSelectSingle86 --> PgClassExpression116
    Lambda118{{"Lambda[118∈6]^<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List117 --> Lambda118
    PgSelectSingle94 --> PgClassExpression120
    Lambda122{{"Lambda[122∈6]^<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List121 --> Lambda122
    PgSelectSingle102 --> PgClassExpression124
    Lambda126{{"Lambda[126∈6]^<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List125 --> Lambda126
    PgSelectSingle110 --> PgClassExpression128
    Lambda130{{"Lambda[130∈6]^<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List129 --> Lambda130
    PgSelect63 --> Access137
    List138 --> Lambda139
    PgSelect63 --> Access141
    List142 --> Lambda143
    PgSelect63 --> Access145
    List146 --> Lambda147
    PgSelect63 --> Access149
    List150 --> Lambda151
    PgSelect63 --> Access153
    List154 --> Lambda155

    %% define steps
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__InputObject6,Lambda9,Lambda13,List14,Object15,Lambda17,Object19,Lambda21,Object23,Lambda25,Object27,Lambda29,Object31,List32,Lambda33,Access34,PgSelect35,Access36,Access37,Object38,First39,PgSelectRows40,PgSelectSingle41,PgClassExpression42,PgFromExpression48,ApplyInput54,Access156 bucket0
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect44,First49,PgSelectRows50,PgSelectSingle51,PgClassExpression52,Object53 bucket1
    classDef bucket2 stroke:#7f007f
    class Bucket2,Connection61,PgSelectInlineApply136,PgSelectInlineApply140,PgSelectInlineApply144,PgSelectInlineApply148,PgSelectInlineApply152 bucket2
    classDef bucket3 stroke:#ffa500
    class Bucket3 bucket3
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect63,PgSelectRows64 bucket4
    classDef bucket5 stroke:#7fff00
    class Bucket5,__Item65,PgSelectSingle66,PgClassExpression69,Lambda70 bucket5
    classDef bucket6 stroke:#ff1493
    class Bucket6,First76,PgSelectRows77,PgSelectSingle78,First84,PgSelectRows85,PgSelectSingle86,First92,PgSelectRows93,PgSelectSingle94,First100,PgSelectRows101,PgSelectSingle102,First108,PgSelectRows109,PgSelectSingle110,PgClassExpression112,List113,Lambda114,PgClassExpression116,List117,Lambda118,PgClassExpression120,List121,Lambda122,PgClassExpression124,List125,Lambda126,PgClassExpression128,List129,Lambda130,Access137,List138,Lambda139,Access141,List142,Lambda143,Access145,List146,Lambda147,Access149,List150,Lambda151,Access153,List154,Lambda155 bucket6
    classDef bucket7 stroke:#808000
    class Bucket7 bucket7

