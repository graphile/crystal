%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left

    subgraph "Buckets for queries/unions-table/by-id-18"
    Bucket0("Bucket 0 (root)<br /><br />1: <br />ᐳ: 8, 9, 68, 142, 10<br />2: PgSelect[7], PgUnionAll[19]<br />ᐳ: 141, 21, 66, 67, 69, 70, 72, 73<br />3: PgSelectRows[12]<br />ᐳ: 11, 13, 14, 16, 17, 18, 25, 26"):::bucket
    Bucket1("Bucket 1 (polymorphic)<br />__typename: Access[25]<br />Deps: 25, 10, 26"):::bucket
    Bucket2("Bucket 2 (polymorphic)<br />__typename: Access[72]<br />Deps: 72, 10, 73"):::bucket
    Bucket3("Bucket 3 (polymorphicPartition)<br />|UnionTopic<br />Deps: 10, 26<br />ᐳUnionTopic<br /><br />1: PgSelect[27]<br />2: PgSelectRows[32]<br />ᐳ: 31, 33, 113, 123"):::bucket
    Bucket4("Bucket 4 (polymorphicPartition)<br />|UnionPost<br />Deps: 10, 26<br />ᐳUnionPost<br /><br />1: PgSelect[35]<br />2: PgSelectRows[40]<br />ᐳ: 39, 41, 114, 124, 133, 139"):::bucket
    Bucket5("Bucket 5 (polymorphicPartition)<br />|UnionDivider<br />Deps: 10, 26<br />ᐳUnionDivider<br /><br />1: PgSelect[43]<br />2: PgSelectRows[48]<br />ᐳ: 47, 49, 115, 125, 134"):::bucket
    Bucket6("Bucket 6 (polymorphicPartition)<br />|UnionChecklist<br />Deps: 10, 26<br />ᐳUnionChecklist<br /><br />1: PgSelect[51]<br />2: PgSelectRows[56]<br />ᐳ: 55, 57, 116, 126"):::bucket
    Bucket7("Bucket 7 (polymorphicPartition)<br />|UnionChecklistItem<br />Deps: 10, 26<br />ᐳUnionChecklistItem<br /><br />1: PgSelect[59]<br />2: PgSelectRows[64]<br />ᐳ: 63, 65, 117, 127, 135"):::bucket
    Bucket8("Bucket 8 (polymorphicPartition)<br />|UnionTopic<br />Deps: 10, 73<br />ᐳUnionTopic<br /><br />1: PgSelect[74]<br />2: PgSelectRows[79]<br />ᐳ: 78, 80, 118, 128"):::bucket
    Bucket9("Bucket 9 (polymorphicPartition)<br />|UnionPost<br />Deps: 10, 73<br />ᐳUnionPost<br /><br />1: PgSelect[82]<br />2: PgSelectRows[87]<br />ᐳ: 86, 88, 119, 129, 136, 140"):::bucket
    Bucket10("Bucket 10 (polymorphicPartition)<br />|UnionDivider<br />Deps: 10, 73<br />ᐳUnionDivider<br /><br />1: PgSelect[90]<br />2: PgSelectRows[95]<br />ᐳ: 94, 96, 120, 130, 137"):::bucket
    Bucket11("Bucket 11 (polymorphicPartition)<br />|UnionChecklist<br />Deps: 10, 73<br />ᐳUnionChecklist<br /><br />1: PgSelect[98]<br />2: PgSelectRows[103]<br />ᐳ: 102, 104, 121, 131"):::bucket
    Bucket12("Bucket 12 (polymorphicPartition)<br />|UnionChecklistItem<br />Deps: 10, 73<br />ᐳUnionChecklistItem<br /><br />1: PgSelect[106]<br />2: PgSelectRows[111]<br />ᐳ: 110, 112, 122, 132, 138"):::bucket
    end
    Bucket0 --> Bucket1 & Bucket2
    Bucket1 --> Bucket3 & Bucket4 & Bucket5 & Bucket6 & Bucket7
    Bucket2 --> Bucket8 & Bucket9 & Bucket10 & Bucket11 & Bucket12

    %% plan dependencies
    List69{{"List[69∈0] ➊<br />ᐸ66,67,68ᐳ<br />More deps:<br />- Constantᐸ[HIDDEN]ᐳ[68]"}}:::plan
    Access66{{"Access[66∈0] ➊<br />ᐸ21.0ᐳ"}}:::plan
    Access67{{"Access[67∈0] ➊<br />ᐸ21.1ᐳ"}}:::plan
    Access66 & Access67 --> List69
    PgSelect7[["PgSelect[7∈0] ➊<br />ᐸunion_itemsᐳ<br />More deps:<br />- Object[10]<br />- Constantᐸ18ᐳ[142]"]]:::plan
    Object10{{"Object[10∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ<br />Dependents: 12"}}:::plan
    Access8{{"Access[8∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access9{{"Access[9∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access8 & Access9 --> Object10
    Object18{{"Object[18∈0] ➊<br />ᐸ{__typename,id}ᐳ"}}:::plan
    Lambda16{{"Lambda[16∈0] ➊<br />ᐸunionItemTypeNameFromTypeᐳ"}}:::plan
    PgClassExpression17{{"PgClassExpression[17∈0] ➊<br />ᐸ__union_items__.”id”ᐳ"}}:::plan
    Lambda16 & PgClassExpression17 --> Object18
    PgUnionAll19[["PgUnionAll[19∈0] ➊<br />ᐸUnionTopic,UnionPost,UnionDivider,UnionChecklist,UnionChecklistItemᐳ<br />More deps:<br />- Object[10]<br />- Constantᐸ18ᐳ[142]"]]:::plan
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access8
    __Value2 --> Access9
    First11{{"First[11∈0] ➊"}}:::plan
    PgSelectRows12[["PgSelectRows[12∈0] ➊"]]:::plan
    PgSelectRows12 --> First11
    PgSelect7 --> PgSelectRows12
    PgSelectSingle13{{"PgSelectSingle[13∈0] ➊<br />ᐸunion_itemsᐳ"}}:::plan
    First11 --> PgSelectSingle13
    PgClassExpression14{{"PgClassExpression[14∈0] ➊<br />ᐸ__union_items__.”type”ᐳ"}}:::plan
    PgSelectSingle13 --> PgClassExpression14
    PgClassExpression14 -->|rejectNull| Lambda16
    PgSelectSingle13 --> PgClassExpression17
    First21{{"First[21∈0] ➊"}}:::plan
    Access141{{"Access[141∈0] ➊<br />ᐸ19.itemsᐳ"}}:::plan
    Access141 --> First21
    Access26{{"Access[26∈0] ➊<br />ᐸ18.idᐳ"}}:::plan
    Object18 -->|rejectNull| Access26
    First21 --> Access66
    First21 --> Access67
    Lambda70{{"Lambda[70∈0] ➊<br />ᐸtoSpecifierᐳ"}}:::plan
    List69 --> Lambda70
    Access73{{"Access[73∈0] ➊<br />ᐸ70.idᐳ"}}:::plan
    Lambda70 -->|rejectNull| Access73
    PgUnionAll19 --> Access141
    PgSelect27[["PgSelect[27∈3] ➊<br />ᐸunion_topicsᐳ<br />ᐳUnionTopic<br />More deps:<br />- Object[10]"]]:::plan
    Access26 --> PgSelect27
    First31{{"First[31∈3] ➊^"}}:::plan
    PgSelectRows32[["PgSelectRows[32∈3] ➊^"]]:::plan
    PgSelectRows32 --> First31
    PgSelect27 --> PgSelectRows32
    PgSelectSingle33{{"PgSelectSingle[33∈3] ➊^<br />ᐸunion_topicsᐳ"}}:::plan
    First31 --> PgSelectSingle33
    PgClassExpression113{{"PgClassExpression[113∈3] ➊^<br />ᐸ__union_topics__.”id”ᐳ"}}:::plan
    PgSelectSingle33 --> PgClassExpression113
    PgClassExpression123{{"PgClassExpression[123∈3] ➊^<br />ᐸ__union_to...__.”title”ᐳ"}}:::plan
    PgClassExpression113 o--o PgClassExpression123
    PgSelect35[["PgSelect[35∈4] ➊<br />ᐸunion_postsᐳ<br />ᐳUnionPost<br />More deps:<br />- Object[10]"]]:::plan
    Access26 --> PgSelect35
    First39{{"First[39∈4] ➊^"}}:::plan
    PgSelectRows40[["PgSelectRows[40∈4] ➊^"]]:::plan
    PgSelectRows40 --> First39
    PgSelect35 --> PgSelectRows40
    PgSelectSingle41{{"PgSelectSingle[41∈4] ➊^<br />ᐸunion_postsᐳ"}}:::plan
    First39 --> PgSelectSingle41
    PgClassExpression114{{"PgClassExpression[114∈4] ➊^<br />ᐸ__union_posts__.”id”ᐳ"}}:::plan
    PgSelectSingle41 --> PgClassExpression114
    PgClassExpression124{{"PgClassExpression[124∈4] ➊^<br />ᐸ__union_posts__.”title”ᐳ"}}:::plan
    PgClassExpression114 o--o PgClassExpression124
    PgClassExpression133{{"PgClassExpression[133∈4] ➊^<br />ᐸ__union_po...scription”ᐳ"}}:::plan
    PgClassExpression124 o--o PgClassExpression133
    PgClassExpression139{{"PgClassExpression[139∈4] ➊^<br />ᐸ__union_posts__.”note”ᐳ"}}:::plan
    PgClassExpression133 o--o PgClassExpression139
    PgSelect43[["PgSelect[43∈5] ➊<br />ᐸunion_dividersᐳ<br />ᐳUnionDivider<br />More deps:<br />- Object[10]"]]:::plan
    Access26 --> PgSelect43
    First47{{"First[47∈5] ➊^"}}:::plan
    PgSelectRows48[["PgSelectRows[48∈5] ➊^"]]:::plan
    PgSelectRows48 --> First47
    PgSelect43 --> PgSelectRows48
    PgSelectSingle49{{"PgSelectSingle[49∈5] ➊^<br />ᐸunion_dividersᐳ"}}:::plan
    First47 --> PgSelectSingle49
    PgClassExpression115{{"PgClassExpression[115∈5] ➊^<br />ᐸ__union_dividers__.”id”ᐳ"}}:::plan
    PgSelectSingle49 --> PgClassExpression115
    PgClassExpression125{{"PgClassExpression[125∈5] ➊^<br />ᐸ__union_di...__.”title”ᐳ"}}:::plan
    PgClassExpression115 o--o PgClassExpression125
    PgClassExpression134{{"PgClassExpression[134∈5] ➊^<br />ᐸ__union_di...__.”color”ᐳ"}}:::plan
    PgClassExpression125 o--o PgClassExpression134
    PgSelect51[["PgSelect[51∈6] ➊<br />ᐸunion_checklistsᐳ<br />ᐳUnionChecklist<br />More deps:<br />- Object[10]"]]:::plan
    Access26 --> PgSelect51
    First55{{"First[55∈6] ➊^"}}:::plan
    PgSelectRows56[["PgSelectRows[56∈6] ➊^"]]:::plan
    PgSelectRows56 --> First55
    PgSelect51 --> PgSelectRows56
    PgSelectSingle57{{"PgSelectSingle[57∈6] ➊^<br />ᐸunion_checklistsᐳ"}}:::plan
    First55 --> PgSelectSingle57
    PgClassExpression116{{"PgClassExpression[116∈6] ➊^<br />ᐸ__union_ch...sts__.”id”ᐳ"}}:::plan
    PgSelectSingle57 --> PgClassExpression116
    PgClassExpression126{{"PgClassExpression[126∈6] ➊^<br />ᐸ__union_ch...__.”title”ᐳ"}}:::plan
    PgClassExpression116 o--o PgClassExpression126
    PgSelect59[["PgSelect[59∈7] ➊<br />ᐸunion_checklist_itemsᐳ<br />ᐳUnionChecklistItem<br />More deps:<br />- Object[10]"]]:::plan
    Access26 --> PgSelect59
    First63{{"First[63∈7] ➊^"}}:::plan
    PgSelectRows64[["PgSelectRows[64∈7] ➊^"]]:::plan
    PgSelectRows64 --> First63
    PgSelect59 --> PgSelectRows64
    PgSelectSingle65{{"PgSelectSingle[65∈7] ➊^<br />ᐸunion_checklist_itemsᐳ"}}:::plan
    First63 --> PgSelectSingle65
    PgClassExpression117{{"PgClassExpression[117∈7] ➊^<br />ᐸ__union_ch...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle65 --> PgClassExpression117
    PgClassExpression127{{"PgClassExpression[127∈7] ➊^<br />ᐸ__union_ch...scription”ᐳ"}}:::plan
    PgClassExpression117 o--o PgClassExpression127
    PgClassExpression135{{"PgClassExpression[135∈7] ➊^<br />ᐸ__union_ch...s__.”note”ᐳ"}}:::plan
    PgClassExpression127 o--o PgClassExpression135
    PgSelect74[["PgSelect[74∈8] ➊<br />ᐸunion_topicsᐳ<br />ᐳUnionTopic<br />More deps:<br />- Object[10]"]]:::plan
    Access73 --> PgSelect74
    First78{{"First[78∈8] ➊^"}}:::plan
    PgSelectRows79[["PgSelectRows[79∈8] ➊^"]]:::plan
    PgSelectRows79 --> First78
    PgSelect74 --> PgSelectRows79
    PgSelectSingle80{{"PgSelectSingle[80∈8] ➊^<br />ᐸunion_topicsᐳ"}}:::plan
    First78 --> PgSelectSingle80
    PgClassExpression118{{"PgClassExpression[118∈8] ➊^<br />ᐸ__union_topics__.”id”ᐳ"}}:::plan
    PgSelectSingle80 --> PgClassExpression118
    PgClassExpression128{{"PgClassExpression[128∈8] ➊^<br />ᐸ__union_to...__.”title”ᐳ"}}:::plan
    PgClassExpression118 o--o PgClassExpression128
    PgSelect82[["PgSelect[82∈9] ➊<br />ᐸunion_postsᐳ<br />ᐳUnionPost<br />More deps:<br />- Object[10]"]]:::plan
    Access73 --> PgSelect82
    First86{{"First[86∈9] ➊^"}}:::plan
    PgSelectRows87[["PgSelectRows[87∈9] ➊^"]]:::plan
    PgSelectRows87 --> First86
    PgSelect82 --> PgSelectRows87
    PgSelectSingle88{{"PgSelectSingle[88∈9] ➊^<br />ᐸunion_postsᐳ"}}:::plan
    First86 --> PgSelectSingle88
    PgClassExpression119{{"PgClassExpression[119∈9] ➊^<br />ᐸ__union_posts__.”id”ᐳ"}}:::plan
    PgSelectSingle88 --> PgClassExpression119
    PgClassExpression129{{"PgClassExpression[129∈9] ➊^<br />ᐸ__union_posts__.”title”ᐳ"}}:::plan
    PgClassExpression119 o--o PgClassExpression129
    PgClassExpression136{{"PgClassExpression[136∈9] ➊^<br />ᐸ__union_po...scription”ᐳ"}}:::plan
    PgClassExpression129 o--o PgClassExpression136
    PgClassExpression140{{"PgClassExpression[140∈9] ➊^<br />ᐸ__union_posts__.”note”ᐳ"}}:::plan
    PgClassExpression136 o--o PgClassExpression140
    PgSelect90[["PgSelect[90∈10] ➊<br />ᐸunion_dividersᐳ<br />ᐳUnionDivider<br />More deps:<br />- Object[10]"]]:::plan
    Access73 --> PgSelect90
    First94{{"First[94∈10] ➊^"}}:::plan
    PgSelectRows95[["PgSelectRows[95∈10] ➊^"]]:::plan
    PgSelectRows95 --> First94
    PgSelect90 --> PgSelectRows95
    PgSelectSingle96{{"PgSelectSingle[96∈10] ➊^<br />ᐸunion_dividersᐳ"}}:::plan
    First94 --> PgSelectSingle96
    PgClassExpression120{{"PgClassExpression[120∈10] ➊^<br />ᐸ__union_dividers__.”id”ᐳ"}}:::plan
    PgSelectSingle96 --> PgClassExpression120
    PgClassExpression130{{"PgClassExpression[130∈10] ➊^<br />ᐸ__union_di...__.”title”ᐳ"}}:::plan
    PgClassExpression120 o--o PgClassExpression130
    PgClassExpression137{{"PgClassExpression[137∈10] ➊^<br />ᐸ__union_di...__.”color”ᐳ"}}:::plan
    PgClassExpression130 o--o PgClassExpression137
    PgSelect98[["PgSelect[98∈11] ➊<br />ᐸunion_checklistsᐳ<br />ᐳUnionChecklist<br />More deps:<br />- Object[10]"]]:::plan
    Access73 --> PgSelect98
    First102{{"First[102∈11] ➊^"}}:::plan
    PgSelectRows103[["PgSelectRows[103∈11] ➊^"]]:::plan
    PgSelectRows103 --> First102
    PgSelect98 --> PgSelectRows103
    PgSelectSingle104{{"PgSelectSingle[104∈11] ➊^<br />ᐸunion_checklistsᐳ"}}:::plan
    First102 --> PgSelectSingle104
    PgClassExpression121{{"PgClassExpression[121∈11] ➊^<br />ᐸ__union_ch...sts__.”id”ᐳ"}}:::plan
    PgSelectSingle104 --> PgClassExpression121
    PgClassExpression131{{"PgClassExpression[131∈11] ➊^<br />ᐸ__union_ch...__.”title”ᐳ"}}:::plan
    PgClassExpression121 o--o PgClassExpression131
    PgSelect106[["PgSelect[106∈12] ➊<br />ᐸunion_checklist_itemsᐳ<br />ᐳUnionChecklistItem<br />More deps:<br />- Object[10]"]]:::plan
    Access73 --> PgSelect106
    First110{{"First[110∈12] ➊^"}}:::plan
    PgSelectRows111[["PgSelectRows[111∈12] ➊^"]]:::plan
    PgSelectRows111 --> First110
    PgSelect106 --> PgSelectRows111
    PgSelectSingle112{{"PgSelectSingle[112∈12] ➊^<br />ᐸunion_checklist_itemsᐳ"}}:::plan
    First110 --> PgSelectSingle112
    PgClassExpression122{{"PgClassExpression[122∈12] ➊^<br />ᐸ__union_ch...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle112 --> PgClassExpression122
    PgClassExpression132{{"PgClassExpression[132∈12] ➊^<br />ᐸ__union_ch...scription”ᐳ"}}:::plan
    PgClassExpression122 o--o PgClassExpression132
    PgClassExpression138{{"PgClassExpression[138∈12] ➊^<br />ᐸ__union_ch...s__.”note”ᐳ"}}:::plan
    PgClassExpression132 o--o PgClassExpression138

    %% define steps
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,PgSelect7,Access8,Access9,Object10,First11,PgSelectRows12,PgSelectSingle13,PgClassExpression14,Lambda16,PgClassExpression17,Object18,PgUnionAll19,First21,Access26,Access66,Access67,List69,Lambda70,Access73,Access141 bucket0
    classDef bucket1 stroke:#00bfff
    class Bucket1 bucket1
    classDef bucket2 stroke:#7f007f
    class Bucket2 bucket2
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgSelect27,First31,PgSelectRows32,PgSelectSingle33,PgClassExpression113,PgClassExpression123 bucket3
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect35,First39,PgSelectRows40,PgSelectSingle41,PgClassExpression114,PgClassExpression124,PgClassExpression133,PgClassExpression139 bucket4
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgSelect43,First47,PgSelectRows48,PgSelectSingle49,PgClassExpression115,PgClassExpression125,PgClassExpression134 bucket5
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgSelect51,First55,PgSelectRows56,PgSelectSingle57,PgClassExpression116,PgClassExpression126 bucket6
    classDef bucket7 stroke:#808000
    class Bucket7,PgSelect59,First63,PgSelectRows64,PgSelectSingle65,PgClassExpression117,PgClassExpression127,PgClassExpression135 bucket7
    classDef bucket8 stroke:#dda0dd
    class Bucket8,PgSelect74,First78,PgSelectRows79,PgSelectSingle80,PgClassExpression118,PgClassExpression128 bucket8
    classDef bucket9 stroke:#ff0000
    class Bucket9,PgSelect82,First86,PgSelectRows87,PgSelectSingle88,PgClassExpression119,PgClassExpression129,PgClassExpression136,PgClassExpression140 bucket9
    classDef bucket10 stroke:#ffff00
    class Bucket10,PgSelect90,First94,PgSelectRows95,PgSelectSingle96,PgClassExpression120,PgClassExpression130,PgClassExpression137 bucket10
    classDef bucket11 stroke:#00ffff
    class Bucket11,PgSelect98,First102,PgSelectRows103,PgSelectSingle104,PgClassExpression121,PgClassExpression131 bucket11
    classDef bucket12 stroke:#4169e1
    class Bucket12,PgSelect106,First110,PgSelectRows111,PgSelectSingle112,PgClassExpression122,PgClassExpression132,PgClassExpression138 bucket12

