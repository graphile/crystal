%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    Object11{{"Object[11∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access9{{"Access[9∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access10{{"Access[10∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access9 & Access10 --> Object11
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access9
    __Value2 --> Access10
    Lambda157{{"Lambda[157∈0] ➊<br />ᐸcalculateLimitAndOffsetSQLᐳ"}}:::plan
    Constant294{{"Constant[294∈0] ➊<br />ᐸ[Object: null prototype] {   cursorLower: null,   cursorUppeᐳ"}}:::plan
    Constant294 --> Lambda157
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    Constant6{{"Constant[6∈0] ➊<br />ᐸ'POST'ᐳ"}}:::plan
    Constant7{{"Constant[7∈0] ➊<br />ᐸ2ᐳ"}}:::plan
    Constant13{{"Constant[13∈0] ➊<br />ᐸ'Post ꖛ1'ᐳ"}}:::plan
    Constant14{{"Constant[14∈0] ➊<br />ᐸ'Desc 1'ᐳ"}}:::plan
    Constant15{{"Constant[15∈0] ➊<br />ᐸnullᐳ"}}:::plan
    Constant27{{"Constant[27∈0] ➊<br />ᐸ'Post ꖛ2'ᐳ"}}:::plan
    Constant28{{"Constant[28∈0] ➊<br />ᐸ'Desc 2'ᐳ"}}:::plan
    Constant41{{"Constant[41∈0] ➊<br />ᐸ'Post ꖛ3'ᐳ"}}:::plan
    Constant42{{"Constant[42∈0] ➊<br />ᐸ'Desc 3'ᐳ"}}:::plan
    PgInsertSingle16[["PgInsertSingle[16∈1] ➊<br />ᐸrelational_posts(id,title,description,note)ᐳ"]]:::sideeffectplan
    PgClassExpression12{{"PgClassExpression[12∈1] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    Object11 & PgClassExpression12 & Constant13 & Constant14 & Constant15 --> PgInsertSingle16
    PgInsertSingle30[["PgInsertSingle[30∈1] ➊<br />ᐸrelational_posts(id,title,description,note)ᐳ"]]:::sideeffectplan
    PgClassExpression26{{"PgClassExpression[26∈1] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    Object11 & PgClassExpression26 & Constant27 & Constant28 & Constant15 --> PgInsertSingle30
    PgInsertSingle44[["PgInsertSingle[44∈1] ➊<br />ᐸrelational_posts(id,title,description,note)ᐳ"]]:::sideeffectplan
    PgClassExpression40{{"PgClassExpression[40∈1] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    Object11 & PgClassExpression40 & Constant41 & Constant42 & Constant15 --> PgInsertSingle44
    PgInsertSingle8[["PgInsertSingle[8∈1] ➊<br />ᐸrelational_items(type,author_id)ᐳ"]]:::sideeffectplan
    Object11 & Constant6 & Constant7 --> PgInsertSingle8
    PgInsertSingle22[["PgInsertSingle[22∈1] ➊<br />ᐸrelational_items(type,author_id)ᐳ"]]:::sideeffectplan
    Object11 & Constant6 & Constant7 --> PgInsertSingle22
    PgInsertSingle36[["PgInsertSingle[36∈1] ➊<br />ᐸrelational_items(type,author_id)ᐳ"]]:::sideeffectplan
    Object11 & Constant6 & Constant7 --> PgInsertSingle36
    PgInsertSingle8 --> PgClassExpression12
    PgInsertSingle22 --> PgClassExpression26
    PgInsertSingle36 --> PgClassExpression40
    PgClassExpression48{{"PgClassExpression[48∈1] ➊<br />ᐸ__relational_posts__ᐳ"}}:::plan
    PgInsertSingle44 --> PgClassExpression48
    PgSelect50[["PgSelect[50∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Constant295{{"Constant[295∈2] ➊<br />ᐸ1000000ᐳ"}}:::plan
    Object11 & Constant295 & Lambda157 --> PgSelect50
    PgSelect85[["PgSelect[85∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Constant296{{"Constant[296∈2] ➊<br />ᐸ1000001ᐳ"}}:::plan
    Object11 & Constant296 & Lambda157 --> PgSelect85
    PgSelect118[["PgSelect[118∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Constant297{{"Constant[297∈2] ➊<br />ᐸ1000002ᐳ"}}:::plan
    Object11 & Constant297 & Lambda157 --> PgSelect118
    First54{{"First[54∈2] ➊"}}:::plan
    PgSelect50 --> First54
    PgSelectSingle55{{"PgSelectSingle[55∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    First54 --> PgSelectSingle55
    First87{{"First[87∈2] ➊"}}:::plan
    PgSelect85 --> First87
    PgSelectSingle88{{"PgSelectSingle[88∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    First87 --> PgSelectSingle88
    First120{{"First[120∈2] ➊"}}:::plan
    PgSelect118 --> First120
    PgSelectSingle121{{"PgSelectSingle[121∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    First120 --> PgSelectSingle121
    PgPolymorphic57{{"PgPolymorphic[57∈3] ➊"}}:::plan
    PgClassExpression56{{"PgClassExpression[56∈3] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle55 & PgClassExpression56 --> PgPolymorphic57
    PgPolymorphic90{{"PgPolymorphic[90∈3] ➊"}}:::plan
    PgClassExpression89{{"PgClassExpression[89∈3] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle88 & PgClassExpression89 --> PgPolymorphic90
    PgPolymorphic123{{"PgPolymorphic[123∈3] ➊"}}:::plan
    PgClassExpression122{{"PgClassExpression[122∈3] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle121 & PgClassExpression122 --> PgPolymorphic123
    PgSelectSingle55 --> PgClassExpression56
    PgSelectSingle88 --> PgClassExpression89
    PgSelectSingle121 --> PgClassExpression122
    PgSelect59[["PgSelect[59∈4] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    PgClassExpression58{{"PgClassExpression[58∈4] ➊<br />ᐸ__relation...ems__.”id”ᐳ<br />ᐳRelationalTopic"}}:::plan
    Object11 & PgClassExpression58 & Lambda157 --> PgSelect59
    PgSelect65[["PgSelect[65∈4] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression58 & Lambda157 --> PgSelect65
    PgSelect72[["PgSelect[72∈4] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression58 & Lambda157 --> PgSelect72
    PgSelect76[["PgSelect[76∈4] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression58 & Lambda157 --> PgSelect76
    PgSelect80[["PgSelect[80∈4] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression58 & Lambda157 --> PgSelect80
    PgSelectSingle55 --> PgClassExpression58
    First63{{"First[63∈4] ➊"}}:::plan
    PgSelect59 --> First63
    PgSelectSingle64{{"PgSelectSingle[64∈4] ➊<br />ᐸrelational_topicsᐳ"}}:::plan
    First63 --> PgSelectSingle64
    First67{{"First[67∈4] ➊"}}:::plan
    PgSelect65 --> First67
    PgSelectSingle68{{"PgSelectSingle[68∈4] ➊<br />ᐸrelational_postsᐳ"}}:::plan
    First67 --> PgSelectSingle68
    PgClassExpression69{{"PgClassExpression[69∈4] ➊<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle68 --> PgClassExpression69
    PgClassExpression70{{"PgClassExpression[70∈4] ➊<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle68 --> PgClassExpression70
    PgClassExpression71{{"PgClassExpression[71∈4] ➊<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle68 --> PgClassExpression71
    First74{{"First[74∈4] ➊"}}:::plan
    PgSelect72 --> First74
    PgSelectSingle75{{"PgSelectSingle[75∈4] ➊<br />ᐸrelational_dividersᐳ"}}:::plan
    First74 --> PgSelectSingle75
    First78{{"First[78∈4] ➊"}}:::plan
    PgSelect76 --> First78
    PgSelectSingle79{{"PgSelectSingle[79∈4] ➊<br />ᐸrelational_checklistsᐳ"}}:::plan
    First78 --> PgSelectSingle79
    First82{{"First[82∈4] ➊"}}:::plan
    PgSelect80 --> First82
    PgSelectSingle83{{"PgSelectSingle[83∈4] ➊<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First82 --> PgSelectSingle83
    PgSelect92[["PgSelect[92∈5] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    PgClassExpression91{{"PgClassExpression[91∈5] ➊<br />ᐸ__relation...ems__.”id”ᐳ<br />ᐳRelationalTopic"}}:::plan
    Object11 & PgClassExpression91 & Lambda157 --> PgSelect92
    PgSelect98[["PgSelect[98∈5] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression91 & Lambda157 --> PgSelect98
    PgSelect105[["PgSelect[105∈5] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression91 & Lambda157 --> PgSelect105
    PgSelect109[["PgSelect[109∈5] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression91 & Lambda157 --> PgSelect109
    PgSelect113[["PgSelect[113∈5] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression91 & Lambda157 --> PgSelect113
    PgSelectSingle88 --> PgClassExpression91
    First96{{"First[96∈5] ➊"}}:::plan
    PgSelect92 --> First96
    PgSelectSingle97{{"PgSelectSingle[97∈5] ➊<br />ᐸrelational_topicsᐳ"}}:::plan
    First96 --> PgSelectSingle97
    First100{{"First[100∈5] ➊"}}:::plan
    PgSelect98 --> First100
    PgSelectSingle101{{"PgSelectSingle[101∈5] ➊<br />ᐸrelational_postsᐳ"}}:::plan
    First100 --> PgSelectSingle101
    PgClassExpression102{{"PgClassExpression[102∈5] ➊<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle101 --> PgClassExpression102
    PgClassExpression103{{"PgClassExpression[103∈5] ➊<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle101 --> PgClassExpression103
    PgClassExpression104{{"PgClassExpression[104∈5] ➊<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle101 --> PgClassExpression104
    First107{{"First[107∈5] ➊"}}:::plan
    PgSelect105 --> First107
    PgSelectSingle108{{"PgSelectSingle[108∈5] ➊<br />ᐸrelational_dividersᐳ"}}:::plan
    First107 --> PgSelectSingle108
    First111{{"First[111∈5] ➊"}}:::plan
    PgSelect109 --> First111
    PgSelectSingle112{{"PgSelectSingle[112∈5] ➊<br />ᐸrelational_checklistsᐳ"}}:::plan
    First111 --> PgSelectSingle112
    First115{{"First[115∈5] ➊"}}:::plan
    PgSelect113 --> First115
    PgSelectSingle116{{"PgSelectSingle[116∈5] ➊<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First115 --> PgSelectSingle116
    PgSelect125[["PgSelect[125∈6] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    PgClassExpression124{{"PgClassExpression[124∈6] ➊<br />ᐸ__relation...ems__.”id”ᐳ<br />ᐳRelationalTopic"}}:::plan
    Object11 & PgClassExpression124 & Lambda157 --> PgSelect125
    PgSelect131[["PgSelect[131∈6] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression124 & Lambda157 --> PgSelect131
    PgSelect138[["PgSelect[138∈6] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression124 & Lambda157 --> PgSelect138
    PgSelect142[["PgSelect[142∈6] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression124 & Lambda157 --> PgSelect142
    PgSelect146[["PgSelect[146∈6] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression124 & Lambda157 --> PgSelect146
    PgSelectSingle121 --> PgClassExpression124
    First129{{"First[129∈6] ➊"}}:::plan
    PgSelect125 --> First129
    PgSelectSingle130{{"PgSelectSingle[130∈6] ➊<br />ᐸrelational_topicsᐳ"}}:::plan
    First129 --> PgSelectSingle130
    First133{{"First[133∈6] ➊"}}:::plan
    PgSelect131 --> First133
    PgSelectSingle134{{"PgSelectSingle[134∈6] ➊<br />ᐸrelational_postsᐳ"}}:::plan
    First133 --> PgSelectSingle134
    PgClassExpression135{{"PgClassExpression[135∈6] ➊<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle134 --> PgClassExpression135
    PgClassExpression136{{"PgClassExpression[136∈6] ➊<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle134 --> PgClassExpression136
    PgClassExpression137{{"PgClassExpression[137∈6] ➊<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle134 --> PgClassExpression137
    First140{{"First[140∈6] ➊"}}:::plan
    PgSelect138 --> First140
    PgSelectSingle141{{"PgSelectSingle[141∈6] ➊<br />ᐸrelational_dividersᐳ"}}:::plan
    First140 --> PgSelectSingle141
    First144{{"First[144∈6] ➊"}}:::plan
    PgSelect142 --> First144
    PgSelectSingle145{{"PgSelectSingle[145∈6] ➊<br />ᐸrelational_checklistsᐳ"}}:::plan
    First144 --> PgSelectSingle145
    First148{{"First[148∈6] ➊"}}:::plan
    PgSelect146 --> First148
    PgSelectSingle149{{"PgSelectSingle[149∈6] ➊<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First148 --> PgSelectSingle149

    %% define steps

    %% implicit side effects
    PgInsertSingle16 -.-o PgInsertSingle22
    PgInsertSingle30 -.-o PgInsertSingle36

    subgraph "Buckets for mutations/basics/create-three-relational-posts"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Constant6,Constant7,Access9,Access10,Object11,Constant13,Constant14,Constant15,Constant27,Constant28,Constant41,Constant42,Lambda157,Constant294 bucket0
    Bucket1("Bucket 1 (mutationField)<br />Deps: 11, 6, 7, 13, 14, 15, 27, 28, 41, 42, 157, 4<br /><br />1: PgInsertSingle[8]<br />2: PgClassExpression[12]<br />3: PgInsertSingle[16]<br />4: PgInsertSingle[22]<br />5: PgClassExpression[26]<br />6: PgInsertSingle[30]<br />7: PgInsertSingle[36]<br />8: PgClassExpression[40]<br />9: PgInsertSingle[44]<br />10: <br />ᐳ: PgClassExpression[48]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgInsertSingle8,PgClassExpression12,PgInsertSingle16,PgInsertSingle22,PgClassExpression26,PgInsertSingle30,PgInsertSingle36,PgClassExpression40,PgInsertSingle44,PgClassExpression48 bucket1
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 11, 157, 48, 4<br /><br />ROOT PgClassExpression{1}ᐸ__relational_posts__ᐳ[48]<br />1: <br />ᐳ: 295, 296, 297<br />2: 50, 85, 118<br />ᐳ: 54, 55, 87, 88, 120, 121"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,PgSelect50,First54,PgSelectSingle55,PgSelect85,First87,PgSelectSingle88,PgSelect118,First120,PgSelectSingle121,Constant295,Constant296,Constant297 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 55, 88, 121, 4, 11, 157<br /><br />ROOT __ValueᐸrootValueᐳ[4]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgClassExpression56,PgPolymorphic57,PgClassExpression89,PgPolymorphic90,PgClassExpression122,PgPolymorphic123 bucket3
    Bucket4("Bucket 4 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 55, 11, 157, 57<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: <br />ᐳ: PgClassExpression[58]<br />2: 59, 65, 72, 76, 80<br />ᐳ: 63, 64, 67, 68, 69, 70, 71, 74, 75, 78, 79, 82, 83"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgClassExpression58,PgSelect59,First63,PgSelectSingle64,PgSelect65,First67,PgSelectSingle68,PgClassExpression69,PgClassExpression70,PgClassExpression71,PgSelect72,First74,PgSelectSingle75,PgSelect76,First78,PgSelectSingle79,PgSelect80,First82,PgSelectSingle83 bucket4
    Bucket5("Bucket 5 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 88, 11, 157, 90<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: <br />ᐳ: PgClassExpression[91]<br />2: 92, 98, 105, 109, 113<br />ᐳ: 96, 97, 100, 101, 102, 103, 104, 107, 108, 111, 112, 115, 116"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgClassExpression91,PgSelect92,First96,PgSelectSingle97,PgSelect98,First100,PgSelectSingle101,PgClassExpression102,PgClassExpression103,PgClassExpression104,PgSelect105,First107,PgSelectSingle108,PgSelect109,First111,PgSelectSingle112,PgSelect113,First115,PgSelectSingle116 bucket5
    Bucket6("Bucket 6 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 121, 11, 157, 123<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: <br />ᐳ: PgClassExpression[124]<br />2: 125, 131, 138, 142, 146<br />ᐳ: 129, 130, 133, 134, 135, 136, 137, 140, 141, 144, 145, 148, 149"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgClassExpression124,PgSelect125,First129,PgSelectSingle130,PgSelect131,First133,PgSelectSingle134,PgClassExpression135,PgClassExpression136,PgClassExpression137,PgSelect138,First140,PgSelectSingle141,PgSelect142,First144,PgSelectSingle145,PgSelect146,First148,PgSelectSingle149 bucket6
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4 & Bucket5 & Bucket6
    end
