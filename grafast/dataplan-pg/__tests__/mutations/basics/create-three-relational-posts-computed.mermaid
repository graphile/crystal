%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    Object11{{"Object[11∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access9{{"Access[9∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access10{{"Access[10∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access9 & Access10 --> Object11
    PgFromExpression12{{"PgFromExpression[12∈0] ➊"}}:::plan
    Constant6{{"Constant[6∈0] ➊<br />ᐸ2ᐳ"}}:::plan
    Constant7{{"Constant[7∈0] ➊<br />ᐸ'Computed post ꖛ1'ᐳ"}}:::plan
    Constant6 & Constant7 --> PgFromExpression12
    PgFromExpression19{{"PgFromExpression[19∈0] ➊"}}:::plan
    Constant14{{"Constant[14∈0] ➊<br />ᐸ'Computed post ꖛ2'ᐳ"}}:::plan
    Constant6 & Constant14 --> PgFromExpression19
    PgFromExpression26{{"PgFromExpression[26∈0] ➊"}}:::plan
    Constant21{{"Constant[21∈0] ➊<br />ᐸ'Computed post ꖛ3'ᐳ"}}:::plan
    Constant6 & Constant21 --> PgFromExpression26
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access9
    __Value2 --> Access10
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    Constant150{{"Constant[150∈0] ➊<br />ᐸ1000000ᐳ"}}:::plan
    Constant151{{"Constant[151∈0] ➊<br />ᐸ1000001ᐳ"}}:::plan
    Constant152{{"Constant[152∈0] ➊<br />ᐸ1000002ᐳ"}}:::plan
    PgSelect8[["PgSelect[8∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object11 & PgFromExpression12 --> PgSelect8
    PgSelect15[["PgSelect[15∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object11 & PgFromExpression19 --> PgSelect15
    PgSelect22[["PgSelect[22∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object11 & PgFromExpression26 --> PgSelect22
    First27{{"First[27∈1] ➊"}}:::plan
    PgSelectRows28[["PgSelectRows[28∈1] ➊"]]:::plan
    PgSelectRows28 --> First27
    PgSelect22 --> PgSelectRows28
    PgSelectSingle29{{"PgSelectSingle[29∈1] ➊<br />ᐸrelational_postsᐳ"}}:::plan
    First27 --> PgSelectSingle29
    PgClassExpression30{{"PgClassExpression[30∈1] ➊<br />ᐸ__relational_posts__ᐳ"}}:::plan
    PgSelectSingle29 --> PgClassExpression30
    PgSelect32[["PgSelect[32∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object11 & Constant150 --> PgSelect32
    PgPolymorphic40{{"PgPolymorphic[40∈2] ➊"}}:::plan
    PgSelectSingle38{{"PgSelectSingle[38∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    PgClassExpression39{{"PgClassExpression[39∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle38 & PgClassExpression39 --> PgPolymorphic40
    PgSelect73[["PgSelect[73∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object11 & Constant151 --> PgSelect73
    PgPolymorphic79{{"PgPolymorphic[79∈2] ➊"}}:::plan
    PgSelectSingle77{{"PgSelectSingle[77∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    PgClassExpression78{{"PgClassExpression[78∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle77 & PgClassExpression78 --> PgPolymorphic79
    PgSelect112[["PgSelect[112∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object11 & Constant152 --> PgSelect112
    PgPolymorphic118{{"PgPolymorphic[118∈2] ➊"}}:::plan
    PgSelectSingle116{{"PgSelectSingle[116∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    PgClassExpression117{{"PgClassExpression[117∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle116 & PgClassExpression117 --> PgPolymorphic118
    First36{{"First[36∈2] ➊"}}:::plan
    PgSelectRows37[["PgSelectRows[37∈2] ➊"]]:::plan
    PgSelectRows37 --> First36
    PgSelect32 --> PgSelectRows37
    First36 --> PgSelectSingle38
    PgSelectSingle38 --> PgClassExpression39
    PgClassExpression41{{"PgClassExpression[41∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle38 --> PgClassExpression41
    First75{{"First[75∈2] ➊"}}:::plan
    PgSelectRows76[["PgSelectRows[76∈2] ➊"]]:::plan
    PgSelectRows76 --> First75
    PgSelect73 --> PgSelectRows76
    First75 --> PgSelectSingle77
    PgSelectSingle77 --> PgClassExpression78
    PgClassExpression80{{"PgClassExpression[80∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle77 --> PgClassExpression80
    First114{{"First[114∈2] ➊"}}:::plan
    PgSelectRows115[["PgSelectRows[115∈2] ➊"]]:::plan
    PgSelectRows115 --> First114
    PgSelect112 --> PgSelectRows115
    First114 --> PgSelectSingle116
    PgSelectSingle116 --> PgClassExpression117
    PgClassExpression119{{"PgClassExpression[119∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle116 --> PgClassExpression119
    PgSelect42[["PgSelect[42∈4] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression41 --> PgSelect42
    PgSelect49[["PgSelect[49∈4] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression41 --> PgSelect49
    PgSelect57[["PgSelect[57∈4] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression41 --> PgSelect57
    PgSelect62[["PgSelect[62∈4] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression41 --> PgSelect62
    PgSelect67[["PgSelect[67∈4] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression41 --> PgSelect67
    First46{{"First[46∈4] ➊^"}}:::plan
    PgSelectRows47[["PgSelectRows[47∈4] ➊^"]]:::plan
    PgSelectRows47 --> First46
    PgSelect42 --> PgSelectRows47
    PgSelectSingle48{{"PgSelectSingle[48∈4] ➊^<br />ᐸrelational_topicsᐳ"}}:::plan
    First46 --> PgSelectSingle48
    First51{{"First[51∈4] ➊^"}}:::plan
    PgSelectRows52[["PgSelectRows[52∈4] ➊^"]]:::plan
    PgSelectRows52 --> First51
    PgSelect49 --> PgSelectRows52
    PgSelectSingle53{{"PgSelectSingle[53∈4] ➊^<br />ᐸrelational_postsᐳ"}}:::plan
    First51 --> PgSelectSingle53
    PgClassExpression54{{"PgClassExpression[54∈4] ➊^<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle53 --> PgClassExpression54
    PgClassExpression55{{"PgClassExpression[55∈4] ➊^<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle53 --> PgClassExpression55
    PgClassExpression56{{"PgClassExpression[56∈4] ➊^<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle53 --> PgClassExpression56
    First59{{"First[59∈4] ➊^"}}:::plan
    PgSelectRows60[["PgSelectRows[60∈4] ➊^"]]:::plan
    PgSelectRows60 --> First59
    PgSelect57 --> PgSelectRows60
    PgSelectSingle61{{"PgSelectSingle[61∈4] ➊^<br />ᐸrelational_dividersᐳ"}}:::plan
    First59 --> PgSelectSingle61
    First64{{"First[64∈4] ➊^"}}:::plan
    PgSelectRows65[["PgSelectRows[65∈4] ➊^"]]:::plan
    PgSelectRows65 --> First64
    PgSelect62 --> PgSelectRows65
    PgSelectSingle66{{"PgSelectSingle[66∈4] ➊^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First64 --> PgSelectSingle66
    First69{{"First[69∈4] ➊^"}}:::plan
    PgSelectRows70[["PgSelectRows[70∈4] ➊^"]]:::plan
    PgSelectRows70 --> First69
    PgSelect67 --> PgSelectRows70
    PgSelectSingle71{{"PgSelectSingle[71∈4] ➊^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First69 --> PgSelectSingle71
    PgSelect81[["PgSelect[81∈5] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression80 --> PgSelect81
    PgSelect88[["PgSelect[88∈5] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression80 --> PgSelect88
    PgSelect96[["PgSelect[96∈5] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression80 --> PgSelect96
    PgSelect101[["PgSelect[101∈5] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression80 --> PgSelect101
    PgSelect106[["PgSelect[106∈5] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression80 --> PgSelect106
    First85{{"First[85∈5] ➊^"}}:::plan
    PgSelectRows86[["PgSelectRows[86∈5] ➊^"]]:::plan
    PgSelectRows86 --> First85
    PgSelect81 --> PgSelectRows86
    PgSelectSingle87{{"PgSelectSingle[87∈5] ➊^<br />ᐸrelational_topicsᐳ"}}:::plan
    First85 --> PgSelectSingle87
    First90{{"First[90∈5] ➊^"}}:::plan
    PgSelectRows91[["PgSelectRows[91∈5] ➊^"]]:::plan
    PgSelectRows91 --> First90
    PgSelect88 --> PgSelectRows91
    PgSelectSingle92{{"PgSelectSingle[92∈5] ➊^<br />ᐸrelational_postsᐳ"}}:::plan
    First90 --> PgSelectSingle92
    PgClassExpression93{{"PgClassExpression[93∈5] ➊^<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle92 --> PgClassExpression93
    PgClassExpression94{{"PgClassExpression[94∈5] ➊^<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle92 --> PgClassExpression94
    PgClassExpression95{{"PgClassExpression[95∈5] ➊^<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle92 --> PgClassExpression95
    First98{{"First[98∈5] ➊^"}}:::plan
    PgSelectRows99[["PgSelectRows[99∈5] ➊^"]]:::plan
    PgSelectRows99 --> First98
    PgSelect96 --> PgSelectRows99
    PgSelectSingle100{{"PgSelectSingle[100∈5] ➊^<br />ᐸrelational_dividersᐳ"}}:::plan
    First98 --> PgSelectSingle100
    First103{{"First[103∈5] ➊^"}}:::plan
    PgSelectRows104[["PgSelectRows[104∈5] ➊^"]]:::plan
    PgSelectRows104 --> First103
    PgSelect101 --> PgSelectRows104
    PgSelectSingle105{{"PgSelectSingle[105∈5] ➊^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First103 --> PgSelectSingle105
    First108{{"First[108∈5] ➊^"}}:::plan
    PgSelectRows109[["PgSelectRows[109∈5] ➊^"]]:::plan
    PgSelectRows109 --> First108
    PgSelect106 --> PgSelectRows109
    PgSelectSingle110{{"PgSelectSingle[110∈5] ➊^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First108 --> PgSelectSingle110
    PgSelect120[["PgSelect[120∈6] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression119 --> PgSelect120
    PgSelect127[["PgSelect[127∈6] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression119 --> PgSelect127
    PgSelect135[["PgSelect[135∈6] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression119 --> PgSelect135
    PgSelect140[["PgSelect[140∈6] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression119 --> PgSelect140
    PgSelect145[["PgSelect[145∈6] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression119 --> PgSelect145
    First124{{"First[124∈6] ➊^"}}:::plan
    PgSelectRows125[["PgSelectRows[125∈6] ➊^"]]:::plan
    PgSelectRows125 --> First124
    PgSelect120 --> PgSelectRows125
    PgSelectSingle126{{"PgSelectSingle[126∈6] ➊^<br />ᐸrelational_topicsᐳ"}}:::plan
    First124 --> PgSelectSingle126
    First129{{"First[129∈6] ➊^"}}:::plan
    PgSelectRows130[["PgSelectRows[130∈6] ➊^"]]:::plan
    PgSelectRows130 --> First129
    PgSelect127 --> PgSelectRows130
    PgSelectSingle131{{"PgSelectSingle[131∈6] ➊^<br />ᐸrelational_postsᐳ"}}:::plan
    First129 --> PgSelectSingle131
    PgClassExpression132{{"PgClassExpression[132∈6] ➊^<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle131 --> PgClassExpression132
    PgClassExpression133{{"PgClassExpression[133∈6] ➊^<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle131 --> PgClassExpression133
    PgClassExpression134{{"PgClassExpression[134∈6] ➊^<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle131 --> PgClassExpression134
    First137{{"First[137∈6] ➊^"}}:::plan
    PgSelectRows138[["PgSelectRows[138∈6] ➊^"]]:::plan
    PgSelectRows138 --> First137
    PgSelect135 --> PgSelectRows138
    PgSelectSingle139{{"PgSelectSingle[139∈6] ➊^<br />ᐸrelational_dividersᐳ"}}:::plan
    First137 --> PgSelectSingle139
    First142{{"First[142∈6] ➊^"}}:::plan
    PgSelectRows143[["PgSelectRows[143∈6] ➊^"]]:::plan
    PgSelectRows143 --> First142
    PgSelect140 --> PgSelectRows143
    PgSelectSingle144{{"PgSelectSingle[144∈6] ➊^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First142 --> PgSelectSingle144
    First147{{"First[147∈6] ➊^"}}:::plan
    PgSelectRows148[["PgSelectRows[148∈6] ➊^"]]:::plan
    PgSelectRows148 --> First147
    PgSelect145 --> PgSelectRows148
    PgSelectSingle149{{"PgSelectSingle[149∈6] ➊^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First147 --> PgSelectSingle149

    %% define steps

    %% implicit side effects
    PgSelect8 -.-o PgSelect15
    PgSelect15 -.-o PgSelect22

    subgraph "Buckets for mutations/basics/create-three-relational-posts-computed"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Constant6,Constant7,Access9,Access10,Object11,PgFromExpression12,Constant14,PgFromExpression19,Constant21,PgFromExpression26,Constant150,Constant151,Constant152 bucket0
    Bucket1("Bucket 1 (mutationField)<br />Deps: 11, 12, 19, 26, 150, 151, 152, 4<br /><br />1: PgSelect[8]<br />2: PgSelect[15]<br />3: PgSelect[22]<br />4: PgSelectRows[28]<br />ᐳ: 27, 29, 30"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect8,PgSelect15,PgSelect22,First27,PgSelectRows28,PgSelectSingle29,PgClassExpression30 bucket1
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 11, 150, 151, 152, 30, 4<br /><br />ROOT PgClassExpression{1}ᐸ__relational_posts__ᐳ[30]<br />1: 32, 73, 112<br />2: 37, 76, 115<br />ᐳ: 36, 38, 39, 40, 41, 75, 77, 78, 79, 80, 114, 116, 117, 118, 119"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,PgSelect32,First36,PgSelectRows37,PgSelectSingle38,PgClassExpression39,PgPolymorphic40,PgClassExpression41,PgSelect73,First75,PgSelectRows76,PgSelectSingle77,PgClassExpression78,PgPolymorphic79,PgClassExpression80,PgSelect112,First114,PgSelectRows115,PgSelectSingle116,PgClassExpression117,PgPolymorphic118,PgClassExpression119 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 4, 11, 41, 40, 80, 79, 119, 118<br /><br />ROOT __ValueᐸrootValueᐳ[4]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3 bucket3
    Bucket4("Bucket 4 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 11, 41, 40<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: 42, 49, 57, 62, 67<br />2: 47, 52, 60, 65, 70<br />ᐳ: 46, 48, 51, 53, 54, 55, 56, 59, 61, 64, 66, 69, 71"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect42,First46,PgSelectRows47,PgSelectSingle48,PgSelect49,First51,PgSelectRows52,PgSelectSingle53,PgClassExpression54,PgClassExpression55,PgClassExpression56,PgSelect57,First59,PgSelectRows60,PgSelectSingle61,PgSelect62,First64,PgSelectRows65,PgSelectSingle66,PgSelect67,First69,PgSelectRows70,PgSelectSingle71 bucket4
    Bucket5("Bucket 5 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 11, 80, 79<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: 81, 88, 96, 101, 106<br />2: 86, 91, 99, 104, 109<br />ᐳ: 85, 87, 90, 92, 93, 94, 95, 98, 100, 103, 105, 108, 110"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgSelect81,First85,PgSelectRows86,PgSelectSingle87,PgSelect88,First90,PgSelectRows91,PgSelectSingle92,PgClassExpression93,PgClassExpression94,PgClassExpression95,PgSelect96,First98,PgSelectRows99,PgSelectSingle100,PgSelect101,First103,PgSelectRows104,PgSelectSingle105,PgSelect106,First108,PgSelectRows109,PgSelectSingle110 bucket5
    Bucket6("Bucket 6 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 11, 119, 118<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: 120, 127, 135, 140, 145<br />2: 125, 130, 138, 143, 148<br />ᐳ: 124, 126, 129, 131, 132, 133, 134, 137, 139, 142, 144, 147, 149"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgSelect120,First124,PgSelectRows125,PgSelectSingle126,PgSelect127,First129,PgSelectRows130,PgSelectSingle131,PgClassExpression132,PgClassExpression133,PgClassExpression134,PgSelect135,First137,PgSelectRows138,PgSelectSingle139,PgSelect140,First142,PgSelectRows143,PgSelectSingle144,PgSelect145,First147,PgSelectRows148,PgSelectSingle149 bucket6
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4 & Bucket5 & Bucket6
    end
