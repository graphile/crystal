%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    Object11{{"Object[11∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access9{{"Access[9∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access10{{"Access[10∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access9 & Access10 --> Object11
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access9
    __Value2 --> Access10
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    Constant112{{"Constant[112∈0] ➊<br />ᐸ4ᐳ"}}:::plan
    Constant113{{"Constant[113∈0] ➊<br />ᐸ3141592ᐳ"}}:::plan
    PgDeleteSingle8[["PgDeleteSingle[8∈1] ➊<br />ᐸrelational_posts(id)ᐳ"]]:::sideeffectplan
    Object11 & Constant112 --> PgDeleteSingle8
    PgSelect15[["PgSelect[15∈2] ➊<br />ᐸrelational_postsᐳ"]]:::plan
    PgFromExpression19{{"PgFromExpression[19∈2] ➊"}}:::plan
    PgSelectInlineApply94["PgSelectInlineApply[94∈2] ➊"]:::plan
    PgFromExpression98{{"PgFromExpression[98∈2] ➊"}}:::plan
    PgSelectInlineApply99["PgSelectInlineApply[99∈2] ➊"]:::plan
    Object11 & PgFromExpression19 & PgSelectInlineApply94 & PgFromExpression98 & PgSelectInlineApply99 --> PgSelect15
    PgClassExpression12{{"PgClassExpression[12∈2] ➊<br />ᐸ__relation...sts__.”id”ᐳ"}}:::plan
    Access13{{"Access[13∈2] ➊<br />ᐸ8.tᐳ"}}:::plan
    Access13 --> PgClassExpression12
    PgDeleteSingle8 --> Access13
    PgClassExpression14{{"PgClassExpression[14∈2] ➊<br />ᐸ__relational_posts__ᐳ"}}:::plan
    Access13 --> PgClassExpression14
    PgClassExpression14 --> PgFromExpression19
    First20{{"First[20∈2] ➊"}}:::plan
    PgSelectRows21[["PgSelectRows[21∈2] ➊"]]:::plan
    PgSelectRows21 --> First20
    PgSelect15 --> PgSelectRows21
    PgSelectSingle22{{"PgSelectSingle[22∈2] ➊<br />ᐸrelational_postsᐳ"}}:::plan
    First20 --> PgSelectSingle22
    Access95{{"Access[95∈2] ➊<br />ᐸ15.m.joinDetailsFor37ᐳ"}}:::plan
    PgSelect15 --> Access95
    Access100{{"Access[100∈2] ➊<br />ᐸ15.m.joinDetailsFor28ᐳ"}}:::plan
    PgSelect15 --> Access100
    PgSelect43[["PgSelect[43∈3] ➊<br />ᐸpeopleᐳ"]]:::plan
    PgClassExpression42{{"PgClassExpression[42∈3] ➊<br />ᐸ__relation...author_id”ᐳ"}}:::plan
    Object11 & PgClassExpression42 --> PgSelect43
    List96{{"List[96∈3] ➊<br />ᐸ95,22ᐳ"}}:::plan
    Access95 & PgSelectSingle22 --> List96
    List101{{"List[101∈3] ➊<br />ᐸ100,22ᐳ"}}:::plan
    Access100 & PgSelectSingle22 --> List101
    PgClassExpression23{{"PgClassExpression[23∈3] ➊<br />ᐸ__relation...sts__.”id”ᐳ"}}:::plan
    PgSelectSingle22 --> PgClassExpression23
    PgClassExpression24{{"PgClassExpression[24∈3] ➊<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle22 --> PgClassExpression24
    PgClassExpression25{{"PgClassExpression[25∈3] ➊<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle22 --> PgClassExpression25
    PgClassExpression26{{"PgClassExpression[26∈3] ➊<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle22 --> PgClassExpression26
    First33{{"First[33∈3] ➊"}}:::plan
    PgSelectRows34[["PgSelectRows[34∈3] ➊"]]:::plan
    PgSelectRows34 --> First33
    Lambda102{{"Lambda[102∈3] ➊<br />ᐸpgInlineViaJoinTransformᐳ"}}:::plan
    Lambda102 --> PgSelectRows34
    PgSelectSingle35{{"PgSelectSingle[35∈3] ➊<br />ᐸtextᐳ"}}:::plan
    First33 --> PgSelectSingle35
    PgClassExpression36{{"PgClassExpression[36∈3] ➊<br />ᐸ__relation..._lower__.vᐳ"}}:::plan
    PgSelectSingle35 --> PgClassExpression36
    First39{{"First[39∈3] ➊"}}:::plan
    PgSelectRows40[["PgSelectRows[40∈3] ➊"]]:::plan
    PgSelectRows40 --> First39
    Lambda97{{"Lambda[97∈3] ➊<br />ᐸpgInlineViaJoinTransformᐳ"}}:::plan
    Lambda97 --> PgSelectRows40
    PgSelectSingle41{{"PgSelectSingle[41∈3] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    First39 --> PgSelectSingle41
    PgSelectSingle41 --> PgClassExpression42
    First45{{"First[45∈3] ➊"}}:::plan
    PgSelectRows46[["PgSelectRows[46∈3] ➊"]]:::plan
    PgSelectRows46 --> First45
    PgSelect43 --> PgSelectRows46
    PgSelectSingle47{{"PgSelectSingle[47∈3] ➊<br />ᐸpeopleᐳ"}}:::plan
    First45 --> PgSelectSingle47
    List96 --> Lambda97
    List101 --> Lambda102
    PgClassExpression48{{"PgClassExpression[48∈4] ➊<br />ᐸ__people__.”person_id”ᐳ"}}:::plan
    PgSelectSingle47 --> PgClassExpression48
    PgClassExpression49{{"PgClassExpression[49∈4] ➊<br />ᐸ__people__.”username”ᐳ"}}:::plan
    PgSelectSingle47 --> PgClassExpression49
    PgDeleteSingle52[["PgDeleteSingle[52∈5] ➊<br />ᐸrelational_posts(id)ᐳ"]]:::sideeffectplan
    Object55{{"Object[55∈5] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Object55 & Constant113 --> PgDeleteSingle52
    Access53{{"Access[53∈5] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access54{{"Access[54∈5] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access53 & Access54 --> Object55
    __Value2 --> Access53
    __Value2 --> Access54
    PgSelect59[["PgSelect[59∈6] ➊<br />ᐸrelational_postsᐳ"]]:::plan
    PgFromExpression63{{"PgFromExpression[63∈6] ➊"}}:::plan
    PgSelectInlineApply103["PgSelectInlineApply[103∈6] ➊"]:::plan
    PgFromExpression107{{"PgFromExpression[107∈6] ➊"}}:::plan
    PgSelectInlineApply108["PgSelectInlineApply[108∈6] ➊"]:::plan
    Object55 & PgFromExpression63 & PgSelectInlineApply103 & PgFromExpression107 & PgSelectInlineApply108 --> PgSelect59
    PgClassExpression56{{"PgClassExpression[56∈6] ➊<br />ᐸ__relation...sts__.”id”ᐳ"}}:::plan
    Access57{{"Access[57∈6] ➊<br />ᐸ52.tᐳ"}}:::plan
    Access57 --> PgClassExpression56
    PgDeleteSingle52 --> Access57
    PgClassExpression58{{"PgClassExpression[58∈6] ➊<br />ᐸ__relational_posts__ᐳ"}}:::plan
    Access57 --> PgClassExpression58
    PgClassExpression58 --> PgFromExpression63
    First64{{"First[64∈6] ➊"}}:::plan
    PgSelectRows65[["PgSelectRows[65∈6] ➊"]]:::plan
    PgSelectRows65 --> First64
    PgSelect59 --> PgSelectRows65
    PgSelectSingle66{{"PgSelectSingle[66∈6] ➊<br />ᐸrelational_postsᐳ"}}:::plan
    First64 --> PgSelectSingle66
    Access104{{"Access[104∈6] ➊<br />ᐸ59.m.joinDetailsFor81ᐳ"}}:::plan
    PgSelect59 --> Access104
    Access109{{"Access[109∈6] ➊<br />ᐸ59.m.joinDetailsFor72ᐳ"}}:::plan
    PgSelect59 --> Access109
    PgSelect87[["PgSelect[87∈7] ➊<br />ᐸpeopleᐳ"]]:::plan
    PgClassExpression86{{"PgClassExpression[86∈7] ➊<br />ᐸ__relation...author_id”ᐳ"}}:::plan
    Object55 & PgClassExpression86 --> PgSelect87
    List105{{"List[105∈7] ➊<br />ᐸ104,66ᐳ"}}:::plan
    Access104 & PgSelectSingle66 --> List105
    List110{{"List[110∈7] ➊<br />ᐸ109,66ᐳ"}}:::plan
    Access109 & PgSelectSingle66 --> List110
    PgClassExpression67{{"PgClassExpression[67∈7] ➊<br />ᐸ__relation...sts__.”id”ᐳ"}}:::plan
    PgSelectSingle66 --> PgClassExpression67
    PgClassExpression68{{"PgClassExpression[68∈7] ➊<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle66 --> PgClassExpression68
    PgClassExpression69{{"PgClassExpression[69∈7] ➊<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle66 --> PgClassExpression69
    PgClassExpression70{{"PgClassExpression[70∈7] ➊<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle66 --> PgClassExpression70
    First77{{"First[77∈7] ➊"}}:::plan
    PgSelectRows78[["PgSelectRows[78∈7] ➊"]]:::plan
    PgSelectRows78 --> First77
    Lambda111{{"Lambda[111∈7] ➊<br />ᐸpgInlineViaJoinTransformᐳ"}}:::plan
    Lambda111 --> PgSelectRows78
    PgSelectSingle79{{"PgSelectSingle[79∈7] ➊<br />ᐸtextᐳ"}}:::plan
    First77 --> PgSelectSingle79
    PgClassExpression80{{"PgClassExpression[80∈7] ➊<br />ᐸ__relation..._lower__.vᐳ"}}:::plan
    PgSelectSingle79 --> PgClassExpression80
    First83{{"First[83∈7] ➊"}}:::plan
    PgSelectRows84[["PgSelectRows[84∈7] ➊"]]:::plan
    PgSelectRows84 --> First83
    Lambda106{{"Lambda[106∈7] ➊<br />ᐸpgInlineViaJoinTransformᐳ"}}:::plan
    Lambda106 --> PgSelectRows84
    PgSelectSingle85{{"PgSelectSingle[85∈7] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    First83 --> PgSelectSingle85
    PgSelectSingle85 --> PgClassExpression86
    First89{{"First[89∈7] ➊"}}:::plan
    PgSelectRows90[["PgSelectRows[90∈7] ➊"]]:::plan
    PgSelectRows90 --> First89
    PgSelect87 --> PgSelectRows90
    PgSelectSingle91{{"PgSelectSingle[91∈7] ➊<br />ᐸpeopleᐳ"}}:::plan
    First89 --> PgSelectSingle91
    List105 --> Lambda106
    List110 --> Lambda111
    PgClassExpression92{{"PgClassExpression[92∈8] ➊<br />ᐸ__people__.”person_id”ᐳ"}}:::plan
    PgSelectSingle91 --> PgClassExpression92
    PgClassExpression93{{"PgClassExpression[93∈8] ➊<br />ᐸ__people__.”username”ᐳ"}}:::plan
    PgSelectSingle91 --> PgClassExpression93

    %% define steps

    subgraph "Buckets for mutations/basics/delete-relational-post"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Access9,Access10,Object11,Constant112,Constant113 bucket0
    Bucket1("Bucket 1 (mutationField)<br />Deps: 11, 112"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgDeleteSingle8 bucket1
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 8, 11<br /><br />ROOT PgDeleteSingle{1}ᐸrelational_posts(id)ᐳ[8]<br />1: 94, 99<br />ᐳ: 13, 98, 12, 14, 19<br />2: PgSelect[15]<br />ᐳ: Access[95], Access[100]<br />3: PgSelectRows[21]<br />ᐳ: First[20], PgSelectSingle[22]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,PgClassExpression12,Access13,PgClassExpression14,PgSelect15,PgFromExpression19,First20,PgSelectRows21,PgSelectSingle22,PgSelectInlineApply94,Access95,PgFromExpression98,PgSelectInlineApply99,Access100 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 22, 11, 95, 100<br /><br />ROOT PgSelectSingle{2}ᐸrelational_postsᐳ[22]<br />1: <br />ᐳ: 23, 24, 25, 26, 96, 101, 97, 102<br />2: PgSelectRows[34], PgSelectRows[40]<br />ᐳ: 33, 35, 36, 39, 41, 42<br />3: PgSelect[43]<br />4: PgSelectRows[46]<br />ᐳ: First[45], PgSelectSingle[47]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgClassExpression23,PgClassExpression24,PgClassExpression25,PgClassExpression26,First33,PgSelectRows34,PgSelectSingle35,PgClassExpression36,First39,PgSelectRows40,PgSelectSingle41,PgClassExpression42,PgSelect43,First45,PgSelectRows46,PgSelectSingle47,List96,Lambda97,List101,Lambda102 bucket3
    Bucket4("Bucket 4 (nullableBoundary)<br />Deps: 47<br /><br />ROOT PgSelectSingle{3}ᐸpeopleᐳ[47]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgClassExpression48,PgClassExpression49 bucket4
    Bucket5("Bucket 5 (mutationField)<br />Deps: 113, 2<br /><br />1: Access[53]<br />2: Access[54]<br />3: Object[55]<br />4: PgDeleteSingle[52]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgDeleteSingle52,Access53,Access54,Object55 bucket5
    Bucket6("Bucket 6 (nullableBoundary)<br />Deps: 52, 55<br /><br />ROOT PgDeleteSingle{5}ᐸrelational_posts(id)ᐳ[52]<br />1: 103, 108<br />ᐳ: 57, 107, 56, 58, 63<br />2: PgSelect[59]<br />ᐳ: Access[104], Access[109]<br />3: PgSelectRows[65]<br />ᐳ: First[64], PgSelectSingle[66]"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgClassExpression56,Access57,PgClassExpression58,PgSelect59,PgFromExpression63,First64,PgSelectRows65,PgSelectSingle66,PgSelectInlineApply103,Access104,PgFromExpression107,PgSelectInlineApply108,Access109 bucket6
    Bucket7("Bucket 7 (nullableBoundary)<br />Deps: 66, 55, 104, 109<br /><br />ROOT PgSelectSingle{6}ᐸrelational_postsᐳ[66]<br />1: <br />ᐳ: 67, 68, 69, 70, 105, 110, 106, 111<br />2: PgSelectRows[78], PgSelectRows[84]<br />ᐳ: 77, 79, 80, 83, 85, 86<br />3: PgSelect[87]<br />4: PgSelectRows[90]<br />ᐳ: First[89], PgSelectSingle[91]"):::bucket
    classDef bucket7 stroke:#808000
    class Bucket7,PgClassExpression67,PgClassExpression68,PgClassExpression69,PgClassExpression70,First77,PgSelectRows78,PgSelectSingle79,PgClassExpression80,First83,PgSelectRows84,PgSelectSingle85,PgClassExpression86,PgSelect87,First89,PgSelectRows90,PgSelectSingle91,List105,Lambda106,List110,Lambda111 bucket7
    Bucket8("Bucket 8 (nullableBoundary)<br />Deps: 91<br /><br />ROOT PgSelectSingle{7}ᐸpeopleᐳ[91]"):::bucket
    classDef bucket8 stroke:#dda0dd
    class Bucket8,PgClassExpression92,PgClassExpression93 bucket8
    Bucket0 --> Bucket1 & Bucket5
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4
    Bucket5 --> Bucket6
    Bucket6 --> Bucket7
    Bucket7 --> Bucket8
    end
